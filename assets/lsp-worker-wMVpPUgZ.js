var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,n)=>{for(var r in n)t(e,r,{get:n[r],enumerable:!0})},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e),f=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s})),p=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Message=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType=exports.RequestType0=exports.AbstractMessageSignature=exports.ParameterStructures=exports.ResponseError=exports.ErrorCodes=void 0;let t=f();var n;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(n||(exports.ErrorCodes=n={}));var r=class e extends Error{constructor(r,i,a){super(i),this.code=t.number(r)?r:n.UnknownErrorCode,this.data=a,Object.setPrototypeOf(this,e.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};exports.ResponseError=r;var i=class e{constructor(e){this.kind=e}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};exports.ParameterStructures=i,i.auto=new i(`auto`),i.byPosition=new i(`byPosition`),i.byName=new i(`byName`);var a=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return i.auto}};exports.AbstractMessageSignature=a;var o=class extends a{constructor(e){super(e,0)}};exports.RequestType0=o;var s=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.RequestType=s;var c=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.RequestType1=c;var l=class extends a{constructor(e){super(e,2)}};exports.RequestType2=l;var u=class extends a{constructor(e){super(e,3)}};exports.RequestType3=u;var d=class extends a{constructor(e){super(e,4)}};exports.RequestType4=d;var p=class extends a{constructor(e){super(e,5)}};exports.RequestType5=p;var m=class extends a{constructor(e){super(e,6)}};exports.RequestType6=m;var h=class extends a{constructor(e){super(e,7)}};exports.RequestType7=h;var g=class extends a{constructor(e){super(e,8)}};exports.RequestType8=g;var _=class extends a{constructor(e){super(e,9)}};exports.RequestType9=_;var v=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.NotificationType=v;var y=class extends a{constructor(e){super(e,0)}};exports.NotificationType0=y;var b=class extends a{constructor(e,t=i.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};exports.NotificationType1=b;var x=class extends a{constructor(e){super(e,2)}};exports.NotificationType2=x;var ee=class extends a{constructor(e){super(e,3)}};exports.NotificationType3=ee;var S=class extends a{constructor(e){super(e,4)}};exports.NotificationType4=S;var C=class extends a{constructor(e){super(e,5)}};exports.NotificationType5=C;var w=class extends a{constructor(e){super(e,6)}};exports.NotificationType6=w;var te=class extends a{constructor(e){super(e,7)}};exports.NotificationType7=te;var T=class extends a{constructor(e){super(e,8)}};exports.NotificationType8=T;var E=class extends a{constructor(e){super(e,9)}};exports.NotificationType9=E;var D;(function(e){function n(e){let n=e;return n&&t.string(n.method)&&(t.string(n.id)||t.number(n.id))}e.isRequest=n;function r(e){let n=e;return n&&t.string(n.method)&&e.id===void 0}e.isNotification=r;function i(e){let n=e;return n&&(n.result!==void 0||!!n.error)&&(t.string(n.id)||t.number(n.id)||n.id===null)}e.isResponse=i})(D||(exports.Message=D={}))})),m=s((exports=>{var t;Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LRUCache=exports.LinkedMap=exports.Touch=void 0;var n;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(n||(exports.Touch=n={}));var r=class{constructor(){this[t]=`LinkedMap`,this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=n.None){let r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error(`Invalid list`);let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw Error(`LinkedMap got modified during iteration.`);r=r.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.key,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:t.value,done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw Error(`LinkedMap got modified during iteration.`);if(t){let e={value:[t.key,t.value],done:!1};return t=t.next,e}else return{value:void 0,done:!0}}};return n}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw Error(`Invalid list`);this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw Error(`Invalid list`);this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw Error(`Invalid list`);e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw Error(`Invalid list`);e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw Error(`Invalid list`);t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw Error(`Invalid list`);if(!(t!==n.First&&t!==n.Last)){if(t===n.First){if(e===this._head)return;let t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;let t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};exports.LinkedMap=r;var i=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};exports.LRUCache=i})),h=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Disposable=void 0;var t;(function(e){function t(e){return{dispose:e}}e.create=t})(t||(exports.Disposable=t={}))})),g=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});let t;function n(){if(t===void 0)throw Error(`No runtime abstraction layer installed`);return t}(function(e){function n(e){if(e===void 0)throw Error(`No runtime abstraction layer provided`);t=e}e.install=n})(n||={}),exports.default=n})),_=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Emitter=exports.Event=void 0;let t=g();var n;(function(e){let t={dispose(){}};e.None=function(){return t}})(n||(exports.Event=n={}));var r=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e)if(this._contexts[r]===t){this._callbacks.splice(r,1),this._contexts.splice(r,1);return}else n=!0;if(n)throw Error(`When adding a listener with a context, you should remove it with the same context`)}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let a=0,o=r.length;a<o;a++)try{n.push(r[a].apply(i[a],e))}catch(e){(0,t.default)().console.error(e)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},i=class e{constructor(e){this._options=e}get event(){return this._event||=(t,n,i)=>{this._callbacks||=new r,this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let a={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),a.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(i)&&i.push(a),a},this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&=(this._callbacks.dispose(),void 0)}};exports.Emitter=i,i._noop=function(){}})),v=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CancellationTokenSource=exports.CancellationToken=void 0;let t=g(),n=f(),r=_();var i;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function t(t){let r=t;return r&&(r===e.None||r===e.Cancelled||n.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(i||(exports.CancellationToken=i={}));let a=Object.freeze(function(e,n){let r=(0,t.default)().timer.setTimeout(e.bind(n),0);return{dispose(){r.dispose()}}});var o=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||=new r.Emitter,this._emitter.event)}dispose(){this._emitter&&=(this._emitter.dispose(),void 0)}},s=class{get token(){return this._token||=new o,this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=i.None}};exports.CancellationTokenSource=s})),y=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SharedArrayReceiverStrategy=exports.SharedArraySenderStrategy=void 0;let t=v();var n;(function(e){e.Continue=0,e.Cancelled=1})(n||={});var r=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=n.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,n.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};exports.SharedArraySenderStrategy=r;var i=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===n.Cancelled}get onCancellationRequested(){throw Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`)}},a=class{constructor(e){this.token=new i(e)}cancel(){}dispose(){}},o=class{constructor(){this.kind=`request`}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new t.CancellationTokenSource:new a(n)}};exports.SharedArrayReceiverStrategy=o})),b=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.Semaphore=void 0;let t=g();var n=class{constructor(e=1){if(e<=0)throw Error(`Capacity must be greater than 0`);this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,t.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error(`To many thunks active`);try{let t=e.thunk();t instanceof Promise?t.then(t=>{this._active--,e.resolve(t),this.runNext()},t=>{this._active--,e.reject(t),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};exports.Semaphore=n})),x=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=void 0;let t=g(),n=f(),r=_(),i=b();var a;(function(e){function t(e){let t=e;return t&&n.func(t.listen)&&n.func(t.dispose)&&n.func(t.onError)&&n.func(t.onClose)&&n.func(t.onPartialMessage)}e.is=t})(a||(exports.MessageReader=a={}));var o=class{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:Error(`Reader received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};exports.AbstractMessageReader=o;var s;(function(e){function n(e){let n,r,i=new Map,a,o=new Map;if(e===void 0||typeof e==`string`)n=e??`utf-8`;else{if(n=e.charset??`utf-8`,e.contentDecoder!==void 0&&(r=e.contentDecoder,i.set(r.name,r)),e.contentDecoders!==void 0)for(let t of e.contentDecoders)i.set(t.name,t);if(e.contentTypeDecoder!==void 0&&(a=e.contentTypeDecoder,o.set(a.name,a)),e.contentTypeDecoders!==void 0)for(let t of e.contentTypeDecoders)o.set(t.name,t)}return a===void 0&&(a=(0,t.default)().applicationJson.decoder,o.set(a.name,a)),{charset:n,contentDecoder:r,contentDecoders:i,contentTypeDecoder:a,contentTypeDecoders:o}}e.fromOptions=n})(s||={});var c=class extends o{constructor(e,n){super(),this.readable=e,this.options=s.fromOptions(n),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new i.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(e=>{this.onData(e)});return this.readable.onError(e=>this.fireError(e)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let e=this.buffer.tryReadHeaders(!0);if(!e)return;let t=e.get(`content-length`);if(!t){this.fireError(Error(`Header must provide a Content-Length property.\n${JSON.stringify(Object.fromEntries(e))}`));return}let n=parseInt(t);if(isNaN(n)){this.fireError(Error(`Content-Length value must be a number. Got ${t}`));return}this.nextMessageLength=n}let e=this.buffer.tryReadBody(this.nextMessageLength);if(e===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let t=this.options.contentDecoder===void 0?e:await this.options.contentDecoder.decode(e),n=await this.options.contentTypeDecoder.decode(t,this.options);this.callback(n)}).catch(e=>{this.fireError(e)})}}catch(e){this.fireError(e)}}clearPartialMessageTimer(){this.partialMessageTimer&&=(this.partialMessageTimer.dispose(),void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};exports.ReadableStreamMessageReader=c})),ee=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=void 0;let t=g(),n=f(),r=b(),i=_();var a;(function(e){function t(e){let t=e;return t&&n.func(t.dispose)&&n.func(t.onClose)&&n.func(t.onError)&&n.func(t.write)}e.is=t})(a||(exports.MessageWriter=a={}));var o=class{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:Error(`Writer received error. Reason: ${n.string(e.message)?e.message:`unknown`}`)}};exports.AbstractMessageWriter=o;var s;(function(e){function n(e){return e===void 0||typeof e==`string`?{charset:e??`utf-8`,contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:e.charset??`utf-8`,contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}e.fromOptions=n})(s||={});var c=class extends o{constructor(e,t){super(),this.writable=e,this.options=s.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(e=>this.fireError(e)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>{let t=this.options.contentTypeEncoder.encode(e,this.options).then(e=>this.options.contentEncoder===void 0?e:this.options.contentEncoder.encode(e));return t.then(t=>{let n=[];return n.push(`Content-Length: `,t.byteLength.toString(),`\r
`),n.push(`\r
`),this.doWrite(e,n,t)},e=>{throw this.fireError(e),e})})}async doWrite(e,t,n){try{return await this.writable.write(t.join(``),`ascii`),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};exports.WriteableStreamMessageWriter=c})),S=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.AbstractMessageBuffer=void 0;var t=class{constructor(e=`utf-8`){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e==`string`?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,n=0,r=0,i=0;row:for(;n<this._chunks.length;){let e=this._chunks[n];r=0;column:for(;r<e.length;){let n=e[r];switch(n){case 13:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case 10:switch(t){case 1:t=2;break;case 3:t=4,r++;break row;default:t=0}break;default:t=0}r++}i+=e.byteLength,n++}if(t!==4)return;let a=this._read(i+r),o=new Map,s=this.toString(a,`ascii`).split(`\r
`);if(s.length<2)return o;for(let t=0;t<s.length-2;t++){let n=s[t],r=n.indexOf(`:`);if(r===-1)throw Error(`Message header must separate key and value using ':'\n${n}`);let i=n.substr(0,r),a=n.substr(r+1).trim();o.set(e?i.toLowerCase():i,a)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw Error(`Cannot read so many bytes!`);if(this._chunks[0].byteLength===e){let t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){let t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}let t=this.allocNative(e),n=0;for(;e>0;){let r=this._chunks[0];if(r.byteLength>e){let i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}};exports.AbstractMessageBuffer=t})),C=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createMessageConnection=exports.ConnectionOptions=exports.MessageStrategy=exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.RequestCancellationReceiverStrategy=exports.IdCancellationReceiverStrategy=exports.ConnectionStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=exports.SetTraceNotification=exports.TraceFormat=exports.TraceValues=exports.Trace=exports.NullLogger=exports.ProgressType=exports.ProgressToken=void 0;let t=g(),n=f(),r=p(),i=m(),a=_(),o=v();var s;(function(e){e.type=new r.NotificationType(`$/cancelRequest`)})(s||={});var c;(function(e){function t(e){return typeof e==`string`||typeof e==`number`}e.is=t})(c||(exports.ProgressToken=c={}));var l;(function(e){e.type=new r.NotificationType(`$/progress`)})(l||={});var u=class{constructor(){}};exports.ProgressType=u;var d;(function(e){function t(e){return n.func(e)}e.is=t})(d||={}),exports.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var h;(function(e){e[e.Off=0]=`Off`,e[e.Messages=1]=`Messages`,e[e.Compact=2]=`Compact`,e[e.Verbose=3]=`Verbose`})(h||(exports.Trace=h={}));var y;(function(e){e.Off=`off`,e.Messages=`messages`,e.Compact=`compact`,e.Verbose=`verbose`})(y||(exports.TraceValues=y={})),(function(e){function t(t){if(!n.string(t))return e.Off;switch(t=t.toLowerCase(),t){case`off`:return e.Off;case`messages`:return e.Messages;case`compact`:return e.Compact;case`verbose`:return e.Verbose;default:return e.Off}}e.fromString=t;function r(t){switch(t){case e.Off:return`off`;case e.Messages:return`messages`;case e.Compact:return`compact`;case e.Verbose:return`verbose`;default:return`off`}}e.toString=r})(h||(exports.Trace=h={}));var b;(function(e){e.Text=`text`,e.JSON=`json`})(b||(exports.TraceFormat=b={})),(function(e){function t(t){return n.string(t)?(t=t.toLowerCase(),t===`json`?e.JSON:e.Text):e.Text}e.fromString=t})(b||(exports.TraceFormat=b={}));var x;(function(e){e.type=new r.NotificationType(`$/setTrace`)})(x||(exports.SetTraceNotification=x={}));var ee;(function(e){e.type=new r.NotificationType(`$/logTrace`)})(ee||(exports.LogTraceNotification=ee={}));var S;(function(e){e[e.Closed=1]=`Closed`,e[e.Disposed=2]=`Disposed`,e[e.AlreadyListening=3]=`AlreadyListening`})(S||(exports.ConnectionErrors=S={}));var C=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};exports.ConnectionError=C;var w;(function(e){function t(e){let t=e;return t&&n.func(t.cancelUndispatched)}e.is=t})(w||(exports.ConnectionStrategy=w={}));var te;(function(e){function t(e){let t=e;return t&&(t.kind===void 0||t.kind===`id`)&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(te||(exports.IdCancellationReceiverStrategy=te={}));var T;(function(e){function t(e){let t=e;return t&&t.kind===`request`&&n.func(t.createCancellationTokenSource)&&(t.dispose===void 0||n.func(t.dispose))}e.is=t})(T||(exports.RequestCancellationReceiverStrategy=T={}));var E;(function(e){e.Message=Object.freeze({createCancellationTokenSource(e){return new o.CancellationTokenSource}});function t(e){return te.is(e)||T.is(e)}e.is=t})(E||(exports.CancellationReceiverStrategy=E={}));var D;(function(e){e.Message=Object.freeze({sendCancellation(e,t){return e.sendNotification(s.type,{id:t})},cleanup(e){}});function t(e){let t=e;return t&&n.func(t.sendCancellation)&&n.func(t.cleanup)}e.is=t})(D||(exports.CancellationSenderStrategy=D={}));var O;(function(e){e.Message=Object.freeze({receiver:E.Message,sender:D.Message});function t(e){let t=e;return t&&E.is(t.receiver)&&D.is(t.sender)}e.is=t})(O||(exports.CancellationStrategy=O={}));var k;(function(e){function t(e){let t=e;return t&&n.func(t.handleMessage)}e.is=t})(k||(exports.MessageStrategy=k={}));var A;(function(e){function t(e){let t=e;return t&&(O.is(t.cancellationStrategy)||w.is(t.connectionStrategy)||k.is(t.messageStrategy))}e.is=t})(A||(exports.ConnectionOptions=A={}));var j;(function(e){e[e.New=1]=`New`,e[e.Listening=2]=`Listening`,e[e.Closed=3]=`Closed`,e[e.Disposed=4]=`Disposed`})(j||={});function M(u,f,p,m){let g=p===void 0?exports.NullLogger:p,_=0,v=0,y=0,w,T=new Map,E,D=new Map,A=new Map,M,N=new i.LinkedMap,P=new Map,F=new Set,I=new Map,L=h.Off,R=b.Text,z,B=j.New,ne=new a.Emitter,V=new a.Emitter,re=new a.Emitter,ie=new a.Emitter,ae=new a.Emitter,H=m&&m.cancellationStrategy?m.cancellationStrategy:O.Message;function U(e){if(e===null)throw Error(`Can't send requests with id null since the response can't be correlated.`);return`req-`+e.toString()}function W(e){return e===null?`res-unknown-`+(++y).toString():`res-`+e.toString()}function G(){return`not-`+(++v).toString()}function K(e,t){r.Message.isRequest(t)?e.set(U(t.id),t):r.Message.isResponse(t)?e.set(W(t.id),t):e.set(G(),t)}function oe(e){}function se(){return B===j.Listening}function ce(){return B===j.Closed}function q(){return B===j.Disposed}function le(){(B===j.New||B===j.Listening)&&(B=j.Closed,V.fire(void 0))}function J(e){ne.fire([e,void 0,void 0])}function ue(e){ne.fire(e)}u.onClose(le),u.onError(J),f.onClose(le),f.onError(ue);function de(){M||N.size===0||(M=(0,t.default)().timer.setImmediate(()=>{M=void 0,fe()}))}function Y(e){r.Message.isRequest(e)?me(e):r.Message.isNotification(e)?ge(e):r.Message.isResponse(e)?he(e):_e(e)}function fe(){if(N.size===0)return;let e=N.shift();try{let t=m?.messageStrategy;k.is(t)?t.handleMessage(e,Y):Y(e)}finally{de()}}let pe=e=>{try{if(r.Message.isNotification(e)&&e.method===s.type.method){let t=e.params.id,n=U(t),i=N.get(n);if(r.Message.isRequest(i)){let r=m?.connectionStrategy,a=r&&r.cancelUndispatched?r.cancelUndispatched(i,oe):void 0;if(a&&(a.error!==void 0||a.result!==void 0)){N.delete(n),I.delete(t),a.id=i.id,xe(a,e.method,Date.now()),f.write(a).catch(()=>g.error(`Sending response for canceled message failed.`));return}}let a=I.get(t);if(a!==void 0){a.cancel(),Ce(e);return}else F.add(t)}K(N,e)}finally{de()}};function me(e){if(q())return;function t(t,n,i){let a={jsonrpc:`2.0`,id:e.id};t instanceof r.ResponseError?a.error=t.toJson():a.result=t===void 0?null:t,xe(a,n,i),f.write(a).catch(()=>g.error(`Sending response failed.`))}function i(t,n,r){let i={jsonrpc:`2.0`,id:e.id,error:t.toJson()};xe(i,n,r),f.write(i).catch(()=>g.error(`Sending response failed.`))}function a(t,n,r){t===void 0&&(t=null);let i={jsonrpc:`2.0`,id:e.id,result:t};xe(i,n,r),f.write(i).catch(()=>g.error(`Sending response failed.`))}Se(e);let o=T.get(e.method),s,c;o&&(s=o.type,c=o.handler);let l=Date.now();if(c||w){let o=e.id??String(Date.now()),u=te.is(H.receiver)?H.receiver.createCancellationTokenSource(o):H.receiver.createCancellationTokenSource(e);e.id!==null&&F.has(e.id)&&u.cancel(),e.id!==null&&I.set(o,u);try{let d;if(c)if(e.params===void 0){if(s!==void 0&&s.numberOfParams!==0){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${s.numberOfParams} params but received none.`),e.method,l);return}d=c(u.token)}else if(Array.isArray(e.params)){if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byName){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);return}d=c(...e.params,u.token)}else{if(s!==void 0&&s.parameterStructures===r.ParameterStructures.byPosition){i(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);return}d=c(e.params,u.token)}else w&&(d=w(e.method,e.params,u.token));let f=d;d?f.then?f.then(n=>{I.delete(o),t(n,e.method,l)},t=>{I.delete(o),t instanceof r.ResponseError?i(t,e.method,l):t&&n.string(t.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}):(I.delete(o),t(d,e.method,l)):(I.delete(o),a(d,e.method,l))}catch(a){I.delete(o),a instanceof r.ResponseError?t(a,e.method,l):a&&n.string(a.message)?i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${a.message}`),e.method,l):i(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else i(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}function he(e){if(!q())if(e.id===null)e.error?g.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):g.error(`Received response message without id. No further error information provided.`);else{let t=e.id,n=P.get(t);if(we(e,n),n!==void 0){P.delete(t);try{if(e.error){let t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else if(e.result!==void 0)n.resolve(e.result);else throw Error(`Should never happen.`)}catch(e){e.message?g.error(`Response handler '${n.method}' failed with message: ${e.message}`):g.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}function ge(e){if(q())return;let t,n;if(e.method===s.type.method){let t=e.params.id;F.delete(t),Ce(e);return}else{let r=D.get(e.method);r&&(n=r.handler,t=r.type)}if(n||E)try{if(Ce(e),n)if(e.params===void 0)t!==void 0&&t.numberOfParams!==0&&t.parameterStructures!==r.ParameterStructures.byName&&g.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){let i=e.params;e.method===l.type.method&&i.length===2&&c.is(i[0])?n({token:i[0],value:i[1]}):(t!==void 0&&(t.parameterStructures===r.ParameterStructures.byName&&g.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&g.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${i.length} arguments`)),n(...i))}else t!==void 0&&t.parameterStructures===r.ParameterStructures.byPosition&&g.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else E&&E(e.method,e.params)}catch(t){t.message?g.error(`Notification handler '${e.method}' failed with message: ${t.message}`):g.error(`Notification handler '${e.method}' failed unexpectedly.`)}else re.fire(e)}function _e(e){if(!e){g.error(`Received empty message.`);return}g.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);let t=e;if(n.string(t.id)||n.number(t.id)){let e=t.id,n=P.get(e);n&&n.reject(Error(`The received response has neither a result nor an error property.`))}}function ve(e){if(e!=null)switch(L){case h.Verbose:return JSON.stringify(e,null,4);case h.Compact:return JSON.stringify(e);default:return}}function ye(e){if(!(L===h.Off||!z))if(R===b.Text){let t;(L===h.Verbose||L===h.Compact)&&e.params&&(t=`Params: ${ve(e.params)}\n\n`),z.log(`Sending request '${e.method} - (${e.id})'.`,t)}else Te(`send-request`,e)}function be(e){if(!(L===h.Off||!z))if(R===b.Text){let t;(L===h.Verbose||L===h.Compact)&&(t=e.params?`Params: ${ve(e.params)}\n\n`:`No parameters provided.

`),z.log(`Sending notification '${e.method}'.`,t)}else Te(`send-notification`,e)}function xe(e,t,n){if(!(L===h.Off||!z))if(R===b.Text){let r;(L===h.Verbose||L===h.Compact)&&(e.error&&e.error.data?r=`Error data: ${ve(e.error.data)}\n\n`:e.result?r=`Result: ${ve(e.result)}\n\n`:e.error===void 0&&(r=`No result returned.

`)),z.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else Te(`send-response`,e)}function Se(e){if(!(L===h.Off||!z))if(R===b.Text){let t;(L===h.Verbose||L===h.Compact)&&e.params&&(t=`Params: ${ve(e.params)}\n\n`),z.log(`Received request '${e.method} - (${e.id})'.`,t)}else Te(`receive-request`,e)}function Ce(e){if(!(L===h.Off||!z||e.method===ee.type.method))if(R===b.Text){let t;(L===h.Verbose||L===h.Compact)&&(t=e.params?`Params: ${ve(e.params)}\n\n`:`No parameters provided.

`),z.log(`Received notification '${e.method}'.`,t)}else Te(`receive-notification`,e)}function we(e,t){if(!(L===h.Off||!z))if(R===b.Text){let n;if((L===h.Verbose||L===h.Compact)&&(e.error&&e.error.data?n=`Error data: ${ve(e.error.data)}\n\n`:e.result?n=`Result: ${ve(e.result)}\n\n`:e.error===void 0&&(n=`No result returned.

`)),t){let r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:``;z.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else z.log(`Received response ${e.id} without active response promise.`,n)}else Te(`receive-response`,e)}function Te(e,t){if(!z||L===h.Off)return;let n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};z.log(n)}function Ee(){if(ce())throw new C(S.Closed,`Connection is closed.`);if(q())throw new C(S.Disposed,`Connection is disposed.`)}function De(){if(se())throw new C(S.AlreadyListening,`Connection is already listening`)}function Oe(){if(!se())throw Error(`Call listen() first.`)}function ke(e){return e===void 0?null:e}function Ae(e){if(e!==null)return e}function je(e){return e!=null&&!Array.isArray(e)&&typeof e==`object`}function Me(e,t){switch(e){case r.ParameterStructures.auto:return je(t)?Ae(t):[ke(t)];case r.ParameterStructures.byName:if(!je(t))throw Error(`Received parameters by name but param is not an object literal.`);return Ae(t);case r.ParameterStructures.byPosition:return[ke(t)];default:throw Error(`Unknown parameter structure ${e.toString()}`)}}function Ne(e,t){let n,r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=Me(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(ke(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null);break}return n}let Pe={sendNotification:(e,...t)=>{Ee();let i,a;if(n.string(e)){i=e;let n=t[0],o=0,s=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(o=1,s=n);let c=t.length,l=c-o;switch(l){case 0:a=void 0;break;case 1:a=Me(s,t[o]);break;default:if(s===r.ParameterStructures.byName)throw Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);a=t.slice(o,c).map(e=>ke(e));break}}else{let n=t;i=e.method,a=Ne(e,n)}let o={jsonrpc:`2.0`,method:i,params:a};return be(o),f.write(o).catch(e=>{throw g.error(`Sending notification failed.`),e})},onNotification:(e,t)=>{Ee();let r;return n.func(e)?E=e:t&&(n.string(e)?(r=e,D.set(e,{type:void 0,handler:t})):(r=e.method,D.set(e.method,{type:e,handler:t}))),{dispose:()=>{r===void 0?E=void 0:D.delete(r)}}},onProgress:(e,t,n)=>{if(A.has(t))throw Error(`Progress handler for token ${t} already registered`);return A.set(t,n),{dispose:()=>{A.delete(t)}}},sendProgress:(e,t,n)=>Pe.sendNotification(l.type,{token:t,value:n}),onUnhandledProgress:ie.event,sendRequest:(e,...t)=>{Ee(),Oe();let i,a,s;if(n.string(e)){i=e;let n=t[0],c=t[t.length-1],l=0,u=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,u=n);let d=t.length;o.CancellationToken.is(c)&&(--d,s=c);let f=d-l;switch(f){case 0:a=void 0;break;case 1:a=Me(u,t[l]);break;default:if(u===r.ParameterStructures.byName)throw Error(`Received ${f} parameters for 'by Name' request parameter structure.`);a=t.slice(l,d).map(e=>ke(e));break}}else{let n=t;i=e.method,a=Ne(e,n);let r=e.numberOfParams;s=o.CancellationToken.is(n[r])?n[r]:void 0}let c=_++,l;s&&(l=s.onCancellationRequested(()=>{let e=H.sender.sendCancellation(Pe,c);return e===void 0?(g.log(`Received no promise from cancellation strategy when cancelling id ${c}`),Promise.resolve()):e.catch(()=>{g.log(`Sending cancellation messages for id ${c} failed`)})}));let u={jsonrpc:`2.0`,id:c,method:i,params:a};return ye(u),typeof H.sender.enableCancellation==`function`&&H.sender.enableCancellation(u),new Promise(async(e,t)=>{let n=t=>{e(t),H.sender.cleanup(c),l?.dispose()},a=e=>{t(e),H.sender.cleanup(c),l?.dispose()},o={method:i,timerStart:Date.now(),resolve:n,reject:a};try{await f.write(u),P.set(c,o)}catch(e){throw g.error(`Sending request failed.`),o.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:`Unknown reason`)),e}})},onRequest:(e,t)=>{Ee();let r=null;return d.is(e)?(r=void 0,w=e):n.string(e)?(r=null,t!==void 0&&(r=e,T.set(e,{handler:t,type:void 0}))):t!==void 0&&(r=e.method,T.set(e.method,{type:e,handler:t})),{dispose:()=>{r!==null&&(r===void 0?w=void 0:T.delete(r))}}},hasPendingResponse:()=>P.size>0,trace:async(e,t,r)=>{let i=!1,a=b.Text;r!==void 0&&(n.boolean(r)?i=r:(i=r.sendNotification||!1,a=r.traceFormat||b.Text)),L=e,R=a,z=L===h.Off?void 0:t,i&&!ce()&&!q()&&await Pe.sendNotification(x.type,{value:h.toString(e)})},onError:ne.event,onClose:V.event,onUnhandledNotification:re.event,onDispose:ae.event,end:()=>{f.end()},dispose:()=>{if(q())return;B=j.Disposed,ae.fire(void 0);let e=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,`Pending response rejected since connection got disposed`);for(let t of P.values())t.reject(e);P=new Map,I=new Map,F=new Set,N=new i.LinkedMap,n.func(f.dispose)&&f.dispose(),n.func(u.dispose)&&u.dispose()},listen:()=>{Ee(),De(),B=j.Listening,u.listen(pe)},inspect:()=>{(0,t.default)().console.log(`inspect`)}};return Pe.onNotification(ee.type,e=>{if(L===h.Off||!z)return;let t=L===h.Verbose||L===h.Compact;z.log(e.message,t?e.verbose:void 0)}),Pe.onNotification(l.type,e=>{let t=A.get(e.token);t?t(e.value):ie.fire(e)}),Pe}exports.createMessageConnection=M})),w=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProgressType=exports.ProgressToken=exports.createMessageConnection=exports.NullLogger=exports.ConnectionOptions=exports.ConnectionStrategy=exports.AbstractMessageBuffer=exports.WriteableStreamMessageWriter=exports.AbstractMessageWriter=exports.MessageWriter=exports.ReadableStreamMessageReader=exports.AbstractMessageReader=exports.MessageReader=exports.SharedArrayReceiverStrategy=exports.SharedArraySenderStrategy=exports.CancellationToken=exports.CancellationTokenSource=exports.Emitter=exports.Event=exports.Disposable=exports.LRUCache=exports.Touch=exports.LinkedMap=exports.ParameterStructures=exports.NotificationType9=exports.NotificationType8=exports.NotificationType7=exports.NotificationType6=exports.NotificationType5=exports.NotificationType4=exports.NotificationType3=exports.NotificationType2=exports.NotificationType1=exports.NotificationType0=exports.NotificationType=exports.ErrorCodes=exports.ResponseError=exports.RequestType9=exports.RequestType8=exports.RequestType7=exports.RequestType6=exports.RequestType5=exports.RequestType4=exports.RequestType3=exports.RequestType2=exports.RequestType1=exports.RequestType0=exports.RequestType=exports.Message=exports.RAL=void 0,exports.MessageStrategy=exports.CancellationStrategy=exports.CancellationSenderStrategy=exports.CancellationReceiverStrategy=exports.ConnectionError=exports.ConnectionErrors=exports.LogTraceNotification=exports.SetTraceNotification=exports.TraceFormat=exports.TraceValues=exports.Trace=void 0;let t=p();Object.defineProperty(exports,`Message`,{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(exports,`RequestType`,{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(exports,`RequestType0`,{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(exports,`RequestType1`,{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(exports,`RequestType2`,{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(exports,`RequestType3`,{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(exports,`RequestType4`,{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(exports,`RequestType5`,{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(exports,`RequestType6`,{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(exports,`RequestType7`,{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(exports,`RequestType8`,{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(exports,`RequestType9`,{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(exports,`ResponseError`,{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(exports,`ErrorCodes`,{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(exports,`NotificationType`,{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(exports,`NotificationType0`,{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(exports,`NotificationType1`,{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(exports,`NotificationType2`,{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(exports,`NotificationType3`,{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(exports,`NotificationType4`,{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(exports,`NotificationType5`,{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(exports,`NotificationType6`,{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(exports,`NotificationType7`,{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(exports,`NotificationType8`,{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(exports,`NotificationType9`,{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(exports,`ParameterStructures`,{enumerable:!0,get:function(){return t.ParameterStructures}});let n=m();Object.defineProperty(exports,`LinkedMap`,{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(exports,`LRUCache`,{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(exports,`Touch`,{enumerable:!0,get:function(){return n.Touch}});let r=h();Object.defineProperty(exports,`Disposable`,{enumerable:!0,get:function(){return r.Disposable}});let i=_();Object.defineProperty(exports,`Event`,{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(exports,`Emitter`,{enumerable:!0,get:function(){return i.Emitter}});let a=v();Object.defineProperty(exports,`CancellationTokenSource`,{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(exports,`CancellationToken`,{enumerable:!0,get:function(){return a.CancellationToken}});let o=y();Object.defineProperty(exports,`SharedArraySenderStrategy`,{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(exports,`SharedArrayReceiverStrategy`,{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});let s=x();Object.defineProperty(exports,`MessageReader`,{enumerable:!0,get:function(){return s.MessageReader}}),Object.defineProperty(exports,`AbstractMessageReader`,{enumerable:!0,get:function(){return s.AbstractMessageReader}}),Object.defineProperty(exports,`ReadableStreamMessageReader`,{enumerable:!0,get:function(){return s.ReadableStreamMessageReader}});let c=ee();Object.defineProperty(exports,`MessageWriter`,{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(exports,`AbstractMessageWriter`,{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(exports,`WriteableStreamMessageWriter`,{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});let l=S();Object.defineProperty(exports,`AbstractMessageBuffer`,{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});let u=C();Object.defineProperty(exports,`ConnectionStrategy`,{enumerable:!0,get:function(){return u.ConnectionStrategy}}),Object.defineProperty(exports,`ConnectionOptions`,{enumerable:!0,get:function(){return u.ConnectionOptions}}),Object.defineProperty(exports,`NullLogger`,{enumerable:!0,get:function(){return u.NullLogger}}),Object.defineProperty(exports,`createMessageConnection`,{enumerable:!0,get:function(){return u.createMessageConnection}}),Object.defineProperty(exports,`ProgressToken`,{enumerable:!0,get:function(){return u.ProgressToken}}),Object.defineProperty(exports,`ProgressType`,{enumerable:!0,get:function(){return u.ProgressType}}),Object.defineProperty(exports,`Trace`,{enumerable:!0,get:function(){return u.Trace}}),Object.defineProperty(exports,`TraceValues`,{enumerable:!0,get:function(){return u.TraceValues}}),Object.defineProperty(exports,`TraceFormat`,{enumerable:!0,get:function(){return u.TraceFormat}}),Object.defineProperty(exports,`SetTraceNotification`,{enumerable:!0,get:function(){return u.SetTraceNotification}}),Object.defineProperty(exports,`LogTraceNotification`,{enumerable:!0,get:function(){return u.LogTraceNotification}}),Object.defineProperty(exports,`ConnectionErrors`,{enumerable:!0,get:function(){return u.ConnectionErrors}}),Object.defineProperty(exports,`ConnectionError`,{enumerable:!0,get:function(){return u.ConnectionError}}),Object.defineProperty(exports,`CancellationReceiverStrategy`,{enumerable:!0,get:function(){return u.CancellationReceiverStrategy}}),Object.defineProperty(exports,`CancellationSenderStrategy`,{enumerable:!0,get:function(){return u.CancellationSenderStrategy}}),Object.defineProperty(exports,`CancellationStrategy`,{enumerable:!0,get:function(){return u.CancellationStrategy}}),Object.defineProperty(exports,`MessageStrategy`,{enumerable:!0,get:function(){return u.MessageStrategy}});let d=g();exports.RAL=d.default})),te=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0});let t=w();var n=class e extends t.AbstractMessageBuffer{constructor(e=`utf-8`){super(e),this.asciiDecoder=new TextDecoder(`ascii`)}emptyBuffer(){return e.emptyBuffer}fromString(e,t){return new TextEncoder().encode(e)}toString(e,t){return t===`ascii`?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}};n.emptyBuffer=new Uint8Array;var r=class{constructor(e){this.socket=e,this._onData=new t.Emitter,this._messageListener=e=>{let n=e.data;n.arrayBuffer().then(e=>{this._onData.fire(new Uint8Array(e))},()=>{(0,t.RAL)().console.error(`Converting blob to array buffer failed.`)})},this.socket.addEventListener(`message`,this._messageListener)}onClose(e){return this.socket.addEventListener(`close`,e),t.Disposable.create(()=>this.socket.removeEventListener(`close`,e))}onError(e){return this.socket.addEventListener(`error`,e),t.Disposable.create(()=>this.socket.removeEventListener(`error`,e))}onEnd(e){return this.socket.addEventListener(`end`,e),t.Disposable.create(()=>this.socket.removeEventListener(`end`,e))}onData(e){return this._onData.event(e)}},i=class{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener(`close`,e),t.Disposable.create(()=>this.socket.removeEventListener(`close`,e))}onError(e){return this.socket.addEventListener(`error`,e),t.Disposable.create(()=>this.socket.removeEventListener(`error`,e))}onEnd(e){return this.socket.addEventListener(`end`,e),t.Disposable.create(()=>this.socket.removeEventListener(`end`,e))}write(e,t){if(typeof e==`string`){if(t!==void 0&&t!==`utf-8`)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}};let a=new TextEncoder,o=Object.freeze({messageBuffer:Object.freeze({create:e=>new n(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:`application/json`,encode:(e,t)=>{if(t.charset!==`utf-8`)throw Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(a.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:`application/json`,decode:(e,t)=>{if(!(e instanceof Uint8Array))throw Error(`In a Browser environments only Uint8Arrays are supported.`);return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new r(e),asWritableStream:e=>new i(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function s(){return o}(function(e){function n(){t.RAL.install(o)}e.install=n})(s||={}),exports.default=s})),T=s((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createMessageConnection=exports.BrowserMessageWriter=exports.BrowserMessageReader=void 0;let r=te();r.default.install();let i=w();n(w(),exports);var a=class extends i.AbstractMessageReader{constructor(e){super(),this._onData=new i.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener(`error`,e=>this.fireError(e)),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}};exports.BrowserMessageReader=a;var o=class extends i.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.addEventListener(`error`,e=>this.fireError(e))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};exports.BrowserMessageWriter=o;function s(e,t,n,r){return n===void 0&&(n=i.NullLogger),i.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,i.createMessageConnection)(e,t,n,r)}exports.createMessageConnection=s})),E=s(((exports,t)=>{t.exports=T()})),D={};c(D,{AnnotatedTextEdit:()=>K,ChangeAnnotation:()=>W,ChangeAnnotationIdentifier:()=>G,CodeAction:()=>ze,CodeActionContext:()=>Re,CodeActionKind:()=>Ie,CodeActionTriggerKind:()=>Le,CodeDescription:()=>ie,CodeLens:()=>Be,Color:()=>I,ColorInformation:()=>L,ColorPresentation:()=>R,Command:()=>H,CompletionItem:()=>Ce,CompletionItemKind:()=>_e,CompletionItemLabelDetails:()=>Se,CompletionItemTag:()=>ye,CompletionList:()=>we,CreateFile:()=>se,DeleteFile:()=>q,Diagnostic:()=>ae,DiagnosticRelatedInformation:()=>ne,DiagnosticSeverity:()=>V,DiagnosticTag:()=>re,DocumentHighlight:()=>Ae,DocumentHighlightKind:()=>ke,DocumentLink:()=>He,DocumentSymbol:()=>Fe,DocumentUri:()=>O,EOL:()=>st,FoldingRange:()=>B,FoldingRangeKind:()=>z,FormattingOptions:()=>Ve,Hover:()=>Ee,InlayHint:()=>$e,InlayHintKind:()=>Ze,InlayHintLabelPart:()=>Qe,InlineCompletionContext:()=>at,InlineCompletionItem:()=>tt,InlineCompletionList:()=>nt,InlineCompletionTriggerKind:()=>rt,InlineValueContext:()=>Xe,InlineValueEvaluatableExpression:()=>Ye,InlineValueText:()=>qe,InlineValueVariableLookup:()=>Je,InsertReplaceEdit:()=>be,InsertTextFormat:()=>ve,InsertTextMode:()=>xe,Location:()=>P,LocationLink:()=>F,MarkedString:()=>Te,MarkupContent:()=>ge,MarkupKind:()=>he,OptionalVersionedTextDocumentIdentifier:()=>pe,ParameterInformation:()=>De,Position:()=>M,Range:()=>N,RenameFile:()=>ce,SelectedCompletionInfo:()=>it,SelectionRange:()=>Ue,SemanticTokenModifiers:()=>Ge,SemanticTokenTypes:()=>We,SemanticTokens:()=>Ke,SignatureInformation:()=>Oe,StringValue:()=>et,SymbolInformation:()=>Ne,SymbolKind:()=>je,SymbolTag:()=>Me,TextDocument:()=>ct,TextDocumentEdit:()=>oe,TextDocumentIdentifier:()=>Y,TextDocumentItem:()=>me,TextEdit:()=>U,URI:()=>k,VersionedTextDocumentIdentifier:()=>fe,WorkspaceChange:()=>de,WorkspaceEdit:()=>le,WorkspaceFolder:()=>ot,WorkspaceSymbol:()=>Pe,integer:()=>A,uinteger:()=>j});var O,k,A,j,M,N,P,F,I,L,R,z,B,ne,V,re,ie,ae,H,U,W,G,K,oe,se,ce,q,le,J,ue,de,Y,fe,pe,me,he,ge,_e,ve,ye,be,xe,Se,Ce,we,Te,Ee,De,Oe,ke,Ae,je,Me,Ne,Pe,Fe,Ie,Le,Re,ze,Be,Ve,He,Ue,We,Ge,Ke,qe,Je,Ye,Xe,Ze,Qe,$e,et,tt,nt,rt,it,at,ot,st,ct,lt,X,ut=o((()=>{(function(e){function t(e){return typeof e==`string`}e.is=t})(O||={}),(function(e){function t(e){return typeof e==`string`}e.is=t})(k||={}),(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(A||={}),(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(t){return typeof t==`number`&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(j||={}),(function(e){function t(e,t){return e===Number.MAX_VALUE&&(e=j.MAX_VALUE),t===Number.MAX_VALUE&&(t=j.MAX_VALUE),{line:e,character:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.uinteger(t.line)&&X.uinteger(t.character)}e.is=n})(M||={}),(function(e){function t(e,t,n,r){if(X.uinteger(e)&&X.uinteger(t)&&X.uinteger(n)&&X.uinteger(r))return{start:M.create(e,t),end:M.create(n,r)};if(M.is(e)&&M.is(t))return{start:e,end:t};throw Error(`Range#create called with invalid arguments[${e}, ${t}, ${n}, ${r}]`)}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&M.is(t.start)&&M.is(t.end)}e.is=n})(N||={}),(function(e){function t(e,t){return{uri:e,range:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&N.is(t.range)&&(X.string(t.uri)||X.undefined(t.uri))}e.is=n})(P||={}),(function(e){function t(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&N.is(t.targetRange)&&X.string(t.targetUri)&&N.is(t.targetSelectionRange)&&(N.is(t.originSelectionRange)||X.undefined(t.originSelectionRange))}e.is=n})(F||={}),(function(e){function t(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.numberRange(t.red,0,1)&&X.numberRange(t.green,0,1)&&X.numberRange(t.blue,0,1)&&X.numberRange(t.alpha,0,1)}e.is=n})(I||={}),(function(e){function t(e,t){return{range:e,color:t}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&N.is(t.range)&&I.is(t.color)}e.is=n})(L||={}),(function(e){function t(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.string(t.label)&&(X.undefined(t.textEdit)||U.is(t))&&(X.undefined(t.additionalTextEdits)||X.typedArray(t.additionalTextEdits,U.is))}e.is=n})(R||={}),(function(e){e.Comment=`comment`,e.Imports=`imports`,e.Region=`region`})(z||={}),(function(e){function t(e,t,n,r,i,a){let o={startLine:e,endLine:t};return X.defined(n)&&(o.startCharacter=n),X.defined(r)&&(o.endCharacter=r),X.defined(i)&&(o.kind=i),X.defined(a)&&(o.collapsedText=a),o}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.uinteger(t.startLine)&&X.uinteger(t.startLine)&&(X.undefined(t.startCharacter)||X.uinteger(t.startCharacter))&&(X.undefined(t.endCharacter)||X.uinteger(t.endCharacter))&&(X.undefined(t.kind)||X.string(t.kind))}e.is=n})(B||={}),(function(e){function t(e,t){return{location:e,message:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&P.is(t.location)&&X.string(t.message)}e.is=n})(ne||={}),(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(V||={}),(function(e){e.Unnecessary=1,e.Deprecated=2})(re||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&X.string(t.href)}e.is=t})(ie||={}),(function(e){function t(e,t,n,r,i,a){let o={range:e,message:t};return X.defined(n)&&(o.severity=n),X.defined(r)&&(o.code=r),X.defined(i)&&(o.source=i),X.defined(a)&&(o.relatedInformation=a),o}e.create=t;function n(e){var t;let n=e;return X.defined(n)&&N.is(n.range)&&X.string(n.message)&&(X.number(n.severity)||X.undefined(n.severity))&&(X.integer(n.code)||X.string(n.code)||X.undefined(n.code))&&(X.undefined(n.codeDescription)||X.string((t=n.codeDescription)?.href))&&(X.string(n.source)||X.undefined(n.source))&&(X.undefined(n.relatedInformation)||X.typedArray(n.relatedInformation,ne.is))}e.is=n})(ae||={}),(function(e){function t(e,t,...n){let r={title:e,command:t};return X.defined(n)&&n.length>0&&(r.arguments=n),r}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.title)&&X.string(t.command)}e.is=n})(H||={}),(function(e){function t(e,t){return{range:e,newText:t}}e.replace=t;function n(e,t){return{range:{start:e,end:e},newText:t}}e.insert=n;function r(e){return{range:e,newText:``}}e.del=r;function i(e){let t=e;return X.objectLiteral(t)&&X.string(t.newText)&&N.is(t.range)}e.is=i})(U||={}),(function(e){function t(e,t,n){let r={label:e};return t!==void 0&&(r.needsConfirmation=t),n!==void 0&&(r.description=n),r}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&X.string(t.label)&&(X.boolean(t.needsConfirmation)||t.needsConfirmation===void 0)&&(X.string(t.description)||t.description===void 0)}e.is=n})(W||={}),(function(e){function t(e){let t=e;return X.string(t)}e.is=t})(G||={}),(function(e){function t(e,t,n){return{range:e,newText:t,annotationId:n}}e.replace=t;function n(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}}e.insert=n;function r(e,t){return{range:e,newText:``,annotationId:t}}e.del=r;function i(e){let t=e;return U.is(t)&&(W.is(t.annotationId)||G.is(t.annotationId))}e.is=i})(K||={}),(function(e){function t(e,t){return{textDocument:e,edits:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&pe.is(t.textDocument)&&Array.isArray(t.edits)}e.is=n})(oe||={}),(function(e){function t(e,t,n){let r={kind:`create`,uri:e};return t!==void 0&&(t.overwrite!==void 0||t.ignoreIfExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){let t=e;return t&&t.kind===`create`&&X.string(t.uri)&&(t.options===void 0||(t.options.overwrite===void 0||X.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||X.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||G.is(t.annotationId))}e.is=n})(se||={}),(function(e){function t(e,t,n,r){let i={kind:`rename`,oldUri:e,newUri:t};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(i.options=n),r!==void 0&&(i.annotationId=r),i}e.create=t;function n(e){let t=e;return t&&t.kind===`rename`&&X.string(t.oldUri)&&X.string(t.newUri)&&(t.options===void 0||(t.options.overwrite===void 0||X.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===void 0||X.boolean(t.options.ignoreIfExists)))&&(t.annotationId===void 0||G.is(t.annotationId))}e.is=n})(ce||={}),(function(e){function t(e,t,n){let r={kind:`delete`,uri:e};return t!==void 0&&(t.recursive!==void 0||t.ignoreIfNotExists!==void 0)&&(r.options=t),n!==void 0&&(r.annotationId=n),r}e.create=t;function n(e){let t=e;return t&&t.kind===`delete`&&X.string(t.uri)&&(t.options===void 0||(t.options.recursive===void 0||X.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===void 0||X.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===void 0||G.is(t.annotationId))}e.is=n})(q||={}),(function(e){function t(e){let t=e;return t&&(t.changes!==void 0||t.documentChanges!==void 0)&&(t.documentChanges===void 0||t.documentChanges.every(e=>X.string(e.kind)?se.is(e)||ce.is(e)||q.is(e):oe.is(e)))}e.is=t})(le||={}),J=class{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,n){let r,i;if(n===void 0?r=U.insert(e,t):G.is(n)?(i=n,r=K.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=K.insert(e,t,i)),this.edits.push(r),i!==void 0)return i}replace(e,t,n){let r,i;if(n===void 0?r=U.replace(e,t):G.is(n)?(i=n,r=K.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=K.replace(e,t,i)),this.edits.push(r),i!==void 0)return i}delete(e,t){let n,r;if(t===void 0?n=U.del(e):G.is(t)?(r=t,n=K.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=K.del(e,r)),this.edits.push(n),r!==void 0)return r}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw Error(`Text edit change is not configured to manage change annotations.`)}},ue=class{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let n;if(G.is(e)?n=e:(n=this.nextId(),t=e),this._annotations[n]!==void 0)throw Error(`Id ${n} is already in use.`);if(t===void 0)throw Error(`No annotation provided for id ${n}`);return this._annotations[n]=t,this._size++,n}nextId(){return this._counter++,this._counter.toString()}},de=class{constructor(e){this._textEditChanges=Object.create(null),e===void 0?this._workspaceEdit={}:(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new ue(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(e=>{if(oe.is(e)){let t=new J(e.edits,this._changeAnnotations);this._textEditChanges[e.textDocument.uri]=t}})):e.changes&&Object.keys(e.changes).forEach(t=>{let n=new J(e.changes[t]);this._textEditChanges[t]=n}))}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(pe.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){let e=[],r={textDocument:t,edits:e};this._workspaceEdit.documentChanges.push(r),n=new J(e,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error(`Workspace edit is not configured for normal text edit changes.`);let t=this._textEditChanges[e];if(!t){let n=[];this._workspaceEdit.changes[e]=n,t=new J(n),this._textEditChanges[e]=t}return t}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ue,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let r;W.is(t)||G.is(t)?r=t:n=t;let i,a;if(r===void 0?i=se.create(e,n):(a=G.is(r)?r:this._changeAnnotations.manage(r),i=se.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a}renameFile(e,t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let i;W.is(n)||G.is(n)?i=n:r=n;let a,o;if(i===void 0?a=ce.create(e,t,r):(o=G.is(i)?i:this._changeAnnotations.manage(i),a=ce.create(e,t,r,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o}deleteFile(e,t,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error(`Workspace edit is not configured for document changes.`);let r;W.is(t)||G.is(t)?r=t:n=t;let i,a;if(r===void 0?i=q.create(e,n):(a=G.is(r)?r:this._changeAnnotations.manage(r),i=q.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),a!==void 0)return a}},(function(e){function t(e){return{uri:e}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)}e.is=n})(Y||={}),(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&X.integer(t.version)}e.is=n})(fe||={}),(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&(t.version===null||X.integer(t.version))}e.is=n})(pe||={}),(function(e){function t(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.string(t.uri)&&X.string(t.languageId)&&X.integer(t.version)&&X.string(t.text)}e.is=n})(me||={}),(function(e){e.PlainText=`plaintext`,e.Markdown=`markdown`;function t(t){let n=t;return n===e.PlainText||n===e.Markdown}e.is=t})(he||={}),(function(e){function t(e){let t=e;return X.objectLiteral(e)&&he.is(t.kind)&&X.string(t.value)}e.is=t})(ge||={}),(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(_e||={}),(function(e){e.PlainText=1,e.Snippet=2})(ve||={}),(function(e){e.Deprecated=1})(ye||={}),(function(e){function t(e,t,n){return{newText:e,insert:t,replace:n}}e.create=t;function n(e){let t=e;return t&&X.string(t.newText)&&N.is(t.insert)&&N.is(t.replace)}e.is=n})(be||={}),(function(e){e.asIs=1,e.adjustIndentation=2})(xe||={}),(function(e){function t(e){let t=e;return t&&(X.string(t.detail)||t.detail===void 0)&&(X.string(t.description)||t.description===void 0)}e.is=t})(Se||={}),(function(e){function t(e){return{label:e}}e.create=t})(Ce||={}),(function(e){function t(e,t){return{items:e||[],isIncomplete:!!t}}e.create=t})(we||={}),(function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,`\\$&`)}e.fromPlainText=t;function n(e){let t=e;return X.string(t)||X.objectLiteral(t)&&X.string(t.language)&&X.string(t.value)}e.is=n})(Te||={}),(function(e){function t(e){let t=e;return!!t&&X.objectLiteral(t)&&(ge.is(t.contents)||Te.is(t.contents)||X.typedArray(t.contents,Te.is))&&(e.range===void 0||N.is(e.range))}e.is=t})(Ee||={}),(function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=t})(De||={}),(function(e){function t(e,t,...n){let r={label:e};return X.defined(t)&&(r.documentation=t),X.defined(n)?r.parameters=n:r.parameters=[],r}e.create=t})(Oe||={}),(function(e){e.Text=1,e.Read=2,e.Write=3})(ke||={}),(function(e){function t(e,t){let n={range:e};return X.number(t)&&(n.kind=t),n}e.create=t})(Ae||={}),(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(je||={}),(function(e){e.Deprecated=1})(Me||={}),(function(e){function t(e,t,n,r,i){let a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a}e.create=t})(Ne||={}),(function(e){function t(e,t,n,r){return r===void 0?{name:e,kind:t,location:{uri:n}}:{name:e,kind:t,location:{uri:n,range:r}}}e.create=t})(Pe||={}),(function(e){function t(e,t,n,r,i,a){let o={name:e,detail:t,kind:n,range:r,selectionRange:i};return a!==void 0&&(o.children=a),o}e.create=t;function n(e){let t=e;return t&&X.string(t.name)&&X.number(t.kind)&&N.is(t.range)&&N.is(t.selectionRange)&&(t.detail===void 0||X.string(t.detail))&&(t.deprecated===void 0||X.boolean(t.deprecated))&&(t.children===void 0||Array.isArray(t.children))&&(t.tags===void 0||Array.isArray(t.tags))}e.is=n})(Fe||={}),(function(e){e.Empty=``,e.QuickFix=`quickfix`,e.Refactor=`refactor`,e.RefactorExtract=`refactor.extract`,e.RefactorInline=`refactor.inline`,e.RefactorRewrite=`refactor.rewrite`,e.Source=`source`,e.SourceOrganizeImports=`source.organizeImports`,e.SourceFixAll=`source.fixAll`})(Ie||={}),(function(e){e.Invoked=1,e.Automatic=2})(Le||={}),(function(e){function t(e,t,n){let r={diagnostics:e};return t!=null&&(r.only=t),n!=null&&(r.triggerKind=n),r}e.create=t;function n(e){let t=e;return X.defined(t)&&X.typedArray(t.diagnostics,ae.is)&&(t.only===void 0||X.typedArray(t.only,X.string))&&(t.triggerKind===void 0||t.triggerKind===Le.Invoked||t.triggerKind===Le.Automatic)}e.is=n})(Re||={}),(function(e){function t(e,t,n){let r={title:e},i=!0;return typeof t==`string`?(i=!1,r.kind=t):H.is(t)?r.command=t:r.edit=t,i&&n!==void 0&&(r.kind=n),r}e.create=t;function n(e){let t=e;return t&&X.string(t.title)&&(t.diagnostics===void 0||X.typedArray(t.diagnostics,ae.is))&&(t.kind===void 0||X.string(t.kind))&&(t.edit!==void 0||t.command!==void 0)&&(t.command===void 0||H.is(t.command))&&(t.isPreferred===void 0||X.boolean(t.isPreferred))&&(t.edit===void 0||le.is(t.edit))}e.is=n})(ze||={}),(function(e){function t(e,t){let n={range:e};return X.defined(t)&&(n.data=t),n}e.create=t;function n(e){let t=e;return X.defined(t)&&N.is(t.range)&&(X.undefined(t.command)||H.is(t.command))}e.is=n})(Be||={}),(function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&X.uinteger(t.tabSize)&&X.boolean(t.insertSpaces)}e.is=n})(Ve||={}),(function(e){function t(e,t,n){return{range:e,target:t,data:n}}e.create=t;function n(e){let t=e;return X.defined(t)&&N.is(t.range)&&(X.undefined(t.target)||X.string(t.target))}e.is=n})(He||={}),(function(e){function t(e,t){return{range:e,parent:t}}e.create=t;function n(t){let n=t;return X.objectLiteral(n)&&N.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=n})(Ue||={}),(function(e){e.namespace=`namespace`,e.type=`type`,e.class=`class`,e.enum=`enum`,e.interface=`interface`,e.struct=`struct`,e.typeParameter=`typeParameter`,e.parameter=`parameter`,e.variable=`variable`,e.property=`property`,e.enumMember=`enumMember`,e.event=`event`,e.function=`function`,e.method=`method`,e.macro=`macro`,e.keyword=`keyword`,e.modifier=`modifier`,e.comment=`comment`,e.string=`string`,e.number=`number`,e.regexp=`regexp`,e.operator=`operator`,e.decorator=`decorator`})(We||={}),(function(e){e.declaration=`declaration`,e.definition=`definition`,e.readonly=`readonly`,e.static=`static`,e.deprecated=`deprecated`,e.abstract=`abstract`,e.async=`async`,e.modification=`modification`,e.documentation=`documentation`,e.defaultLibrary=`defaultLibrary`})(Ge||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&(t.resultId===void 0||typeof t.resultId==`string`)&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==`number`)}e.is=t})(Ke||={}),(function(e){function t(e,t){return{range:e,text:t}}e.create=t;function n(e){let t=e;return t!=null&&N.is(t.range)&&X.string(t.text)}e.is=n})(qe||={}),(function(e){function t(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}}e.create=t;function n(e){let t=e;return t!=null&&N.is(t.range)&&X.boolean(t.caseSensitiveLookup)&&(X.string(t.variableName)||t.variableName===void 0)}e.is=n})(Je||={}),(function(e){function t(e,t){return{range:e,expression:t}}e.create=t;function n(e){let t=e;return t!=null&&N.is(t.range)&&(X.string(t.expression)||t.expression===void 0)}e.is=n})(Ye||={}),(function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}e.create=t;function n(e){let t=e;return X.defined(t)&&N.is(e.stoppedLocation)}e.is=n})(Xe||={}),(function(e){e.Type=1,e.Parameter=2;function t(e){return e===1||e===2}e.is=t})(Ze||={}),(function(e){function t(e){return{value:e}}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&(t.tooltip===void 0||X.string(t.tooltip)||ge.is(t.tooltip))&&(t.location===void 0||P.is(t.location))&&(t.command===void 0||H.is(t.command))}e.is=n})(Qe||={}),(function(e){function t(e,t,n){let r={position:e,label:t};return n!==void 0&&(r.kind=n),r}e.create=t;function n(e){let t=e;return X.objectLiteral(t)&&M.is(t.position)&&(X.string(t.label)||X.typedArray(t.label,Qe.is))&&(t.kind===void 0||Ze.is(t.kind))&&t.textEdits===void 0||X.typedArray(t.textEdits,U.is)&&(t.tooltip===void 0||X.string(t.tooltip)||ge.is(t.tooltip))&&(t.paddingLeft===void 0||X.boolean(t.paddingLeft))&&(t.paddingRight===void 0||X.boolean(t.paddingRight))}e.is=n})($e||={}),(function(e){function t(e){return{kind:`snippet`,value:e}}e.createSnippet=t})(et||={}),(function(e){function t(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}}e.create=t})(tt||={}),(function(e){function t(e){return{items:e}}e.create=t})(nt||={}),(function(e){e.Invoked=0,e.Automatic=1})(rt||={}),(function(e){function t(e,t){return{range:e,text:t}}e.create=t})(it||={}),(function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}e.create=t})(at||={}),(function(e){function t(e){let t=e;return X.objectLiteral(t)&&k.is(t.uri)&&X.string(t.name)}e.is=t})(ot||={}),st=[`
`,`\r
`,`\r`],(function(e){function t(e,t,n,r){return new lt(e,t,n,r)}e.create=t;function n(e){let t=e;return!!(X.defined(t)&&X.string(t.uri)&&(X.undefined(t.languageId)||X.string(t.languageId))&&X.uinteger(t.lineCount)&&X.func(t.getText)&&X.func(t.positionAt)&&X.func(t.offsetAt))}e.is=n;function r(e,t){let n=e.getText(),r=i(t,(e,t)=>{let n=e.range.start.line-t.range.start.line;return n===0?e.range.start.character-t.range.start.character:n}),a=n.length;for(let t=r.length-1;t>=0;t--){let i=r[t],o=e.offsetAt(i.range.start),s=e.offsetAt(i.range.end);if(s<=a)n=n.substring(0,o)+i.newText+n.substring(s,n.length);else throw Error(`Overlapping edit`);a=o}return n}e.applyEdits=r;function i(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),a=e.slice(n);i(r,t),i(a,t);let o=0,s=0,c=0;for(;o<r.length&&s<a.length;){let n=t(r[o],a[s]);n<=0?e[c++]=r[o++]:e[c++]=a[s++]}for(;o<r.length;)e[c++]=r[o++];for(;s<a.length;)e[c++]=a[s++];return e}})(ct||={}),lt=class{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,n=!0;for(let r=0;r<t.length;r++){n&&=(e.push(r),!1);let i=t.charAt(r);n=i===`\r`||i===`
`,i===`\r`&&r+1<t.length&&t.charAt(r+1)===`
`&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(r===0)return M.create(0,e);for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return M.create(i,e-t[i])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)}get lineCount(){return this.getLineOffsets().length}},(function(e){let t=Object.prototype.toString;function n(e){return e!==void 0}e.defined=n;function r(e){return e===void 0}e.undefined=r;function i(e){return e===!0||e===!1}e.boolean=i;function a(e){return t.call(e)===`[object String]`}e.string=a;function o(e){return t.call(e)===`[object Number]`}e.number=o;function s(e,n,r){return t.call(e)===`[object Number]`&&n<=e&&e<=r}e.numberRange=s;function c(e){return t.call(e)===`[object Number]`&&-2147483648<=e&&e<=2147483647}e.integer=c;function l(e){return t.call(e)===`[object Number]`&&0<=e&&e<=2147483647}e.uinteger=l;function u(e){return t.call(e)===`[object Function]`}e.func=u;function d(e){return typeof e==`object`&&!!e}e.objectLiteral=d;function f(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=f})(X||={})})),Z=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProtocolNotificationType=exports.ProtocolNotificationType0=exports.ProtocolRequestType=exports.ProtocolRequestType0=exports.RegistrationType=exports.MessageDirection=void 0;let t=T();var n;(function(e){e.clientToServer=`clientToServer`,e.serverToClient=`serverToClient`,e.both=`both`})(n||(exports.MessageDirection=n={}));var r=class{constructor(e){this.method=e}};exports.RegistrationType=r;var i=class extends t.RequestType0{constructor(e){super(e)}};exports.ProtocolRequestType0=i;var a=class extends t.RequestType{constructor(e){super(e,t.ParameterStructures.byName)}};exports.ProtocolRequestType=a;var o=class extends t.NotificationType0{constructor(e){super(e)}};exports.ProtocolNotificationType0=o;var s=class extends t.NotificationType{constructor(e){super(e,t.ParameterStructures.byName)}};exports.ProtocolNotificationType=s})),dt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.objectLiteral=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}exports.typedArray=c;function l(e){return typeof e==`object`&&!!e}exports.objectLiteral=l})),ft=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ImplementationRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/implementation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ImplementationRequest=n={}))})),pt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeDefinitionRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/typeDefinition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.TypeDefinitionRequest=n={}))})),mt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=void 0;let t=Z();var n;(function(e){e.method=`workspace/workspaceFolders`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(n||(exports.WorkspaceFoldersRequest=n={}));var r;(function(e){e.method=`workspace/didChangeWorkspaceFolders`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(r||(exports.DidChangeWorkspaceFoldersNotification=r={}))})),ht=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ConfigurationRequest=void 0;let t=Z();var n;(function(e){e.method=`workspace/configuration`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ConfigurationRequest=n={}))})),gt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ColorPresentationRequest=exports.DocumentColorRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/documentColor`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.DocumentColorRequest=n={}));var r;(function(e){e.method=`textDocument/colorPresentation`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.ColorPresentationRequest=r={}))})),_t=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FoldingRangeRefreshRequest=exports.FoldingRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/foldingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.FoldingRangeRequest=n={}));var r;(function(e){e.method=`workspace/foldingRange/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(exports.FoldingRangeRefreshRequest=r={}))})),vt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DeclarationRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/declaration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.DeclarationRequest=n={}))})),yt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SelectionRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/selectionRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.SelectionRangeRequest=n={}))})),bt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=void 0;let t=T(),n=Z();var r;(function(e){e.type=new t.ProgressType;function n(t){return t===e.type}e.is=n})(r||(exports.WorkDoneProgress=r={}));var i;(function(e){e.method=`window/workDoneProgress/create`,e.messageDirection=n.MessageDirection.serverToClient,e.type=new n.ProtocolRequestType(e.method)})(i||(exports.WorkDoneProgressCreateRequest=i={}));var a;(function(e){e.method=`window/workDoneProgress/cancel`,e.messageDirection=n.MessageDirection.clientToServer,e.type=new n.ProtocolNotificationType(e.method)})(a||(exports.WorkDoneProgressCancelNotification=a={}))})),xt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.CallHierarchyPrepareRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/prepareCallHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.CallHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`callHierarchy/incomingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.CallHierarchyIncomingCallsRequest=r={}));var i;(function(e){e.method=`callHierarchy/outgoingCalls`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.CallHierarchyOutgoingCallsRequest=i={}))})),St=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.SemanticTokensRegistrationType=exports.TokenFormat=void 0;let t=Z();var n;(function(e){e.Relative=`relative`})(n||(exports.TokenFormat=n={}));var r;(function(e){e.method=`textDocument/semanticTokens`,e.type=new t.RegistrationType(e.method)})(r||(exports.SemanticTokensRegistrationType=r={}));var i;(function(e){e.method=`textDocument/semanticTokens/full`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(i||(exports.SemanticTokensRequest=i={}));var a;(function(e){e.method=`textDocument/semanticTokens/full/delta`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(a||(exports.SemanticTokensDeltaRequest=a={}));var o;(function(e){e.method=`textDocument/semanticTokens/range`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method),e.registrationMethod=r.method})(o||(exports.SemanticTokensRangeRequest=o={}));var s;(function(e){e.method=`workspace/semanticTokens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(s||(exports.SemanticTokensRefreshRequest=s={}))})),Ct=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ShowDocumentRequest=void 0;let t=Z();var n;(function(e){e.method=`window/showDocument`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.ShowDocumentRequest=n={}))})),wt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LinkedEditingRangeRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/linkedEditingRange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.LinkedEditingRangeRequest=n={}))})),Tt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.DidRenameFilesNotification=exports.WillRenameFilesRequest=exports.DidCreateFilesNotification=exports.WillCreateFilesRequest=exports.FileOperationPatternKind=void 0;let t=Z();var n;(function(e){e.file=`file`,e.folder=`folder`})(n||(exports.FileOperationPatternKind=n={}));var r;(function(e){e.method=`workspace/willCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.WillCreateFilesRequest=r={}));var i;(function(e){e.method=`workspace/didCreateFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(i||(exports.DidCreateFilesNotification=i={}));var a;(function(e){e.method=`workspace/willRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(a||(exports.WillRenameFilesRequest=a={}));var o;(function(e){e.method=`workspace/didRenameFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(o||(exports.DidRenameFilesNotification=o={}));var s;(function(e){e.method=`workspace/didDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(s||(exports.DidDeleteFilesNotification=s={}));var c;(function(e){e.method=`workspace/willDeleteFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(c||(exports.WillDeleteFilesRequest=c={}))})),Et=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=void 0;let t=Z();var n;(function(e){e.document=`document`,e.project=`project`,e.group=`group`,e.scheme=`scheme`,e.global=`global`})(n||(exports.UniquenessLevel=n={}));var r;(function(e){e.$import=`import`,e.$export=`export`,e.local=`local`})(r||(exports.MonikerKind=r={}));var i;(function(e){e.method=`textDocument/moniker`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.MonikerRequest=i={}))})),Dt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeHierarchySubtypesRequest=exports.TypeHierarchySupertypesRequest=exports.TypeHierarchyPrepareRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/prepareTypeHierarchy`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.TypeHierarchyPrepareRequest=n={}));var r;(function(e){e.method=`typeHierarchy/supertypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.TypeHierarchySupertypesRequest=r={}));var i;(function(e){e.method=`typeHierarchy/subtypes`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(i||(exports.TypeHierarchySubtypesRequest=i={}))})),Ot=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineValueRefreshRequest=exports.InlineValueRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlineValue`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlineValueRequest=n={}));var r;(function(e){e.method=`workspace/inlineValue/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(r||(exports.InlineValueRefreshRequest=r={}))})),kt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlayHintRefreshRequest=exports.InlayHintResolveRequest=exports.InlayHintRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlayHint`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlayHintRequest=n={}));var r;(function(e){e.method=`inlayHint/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(r||(exports.InlayHintResolveRequest=r={}));var i;(function(e){e.method=`workspace/inlayHint/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(i||(exports.InlayHintRefreshRequest=i={}))})),At=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DiagnosticRefreshRequest=exports.WorkspaceDiagnosticRequest=exports.DocumentDiagnosticRequest=exports.DocumentDiagnosticReportKind=exports.DiagnosticServerCancellationData=void 0;let t=T(),n=dt(),r=Z();var i;(function(e){function t(e){let t=e;return t&&n.boolean(t.retriggerRequest)}e.is=t})(i||(exports.DiagnosticServerCancellationData=i={}));var a;(function(e){e.Full=`full`,e.Unchanged=`unchanged`})(a||(exports.DocumentDiagnosticReportKind=a={}));var o;(function(e){e.method=`textDocument/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(o||(exports.DocumentDiagnosticRequest=o={}));var s;(function(e){e.method=`workspace/diagnostic`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolRequestType(e.method),e.partialResult=new t.ProgressType})(s||(exports.WorkspaceDiagnosticRequest=s={}));var c;(function(e){e.method=`workspace/diagnostic/refresh`,e.messageDirection=r.MessageDirection.serverToClient,e.type=new r.ProtocolRequestType0(e.method)})(c||(exports.DiagnosticRefreshRequest=c={}))})),jt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DidCloseNotebookDocumentNotification=exports.DidSaveNotebookDocumentNotification=exports.DidChangeNotebookDocumentNotification=exports.NotebookCellArrayChange=exports.DidOpenNotebookDocumentNotification=exports.NotebookDocumentSyncRegistrationType=exports.NotebookDocument=exports.NotebookCell=exports.ExecutionSummary=exports.NotebookCellKind=void 0;let t=(ut(),d(D)),n=dt(),r=Z();var i;(function(e){e.Markup=1,e.Code=2;function t(e){return e===1||e===2}e.is=t})(i||(exports.NotebookCellKind=i={}));var a;(function(e){function r(e,t){let n={executionOrder:e};return(t===!0||t===!1)&&(n.success=t),n}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.executionOrder)&&(r.success===void 0||n.boolean(r.success))}e.is=i;function a(e,t){return e===t?!0:e==null||t==null?!1:e.executionOrder===t.executionOrder&&e.success===t.success}e.equals=a})(a||(exports.ExecutionSummary=a={}));var o;(function(e){function r(e,t){return{kind:e,document:t}}e.create=r;function o(e){let r=e;return n.objectLiteral(r)&&i.is(r.kind)&&t.DocumentUri.is(r.document)&&(r.metadata===void 0||n.objectLiteral(r.metadata))}e.is=o;function s(e,t){let n=new Set;return e.document!==t.document&&n.add(`document`),e.kind!==t.kind&&n.add(`kind`),e.executionSummary!==t.executionSummary&&n.add(`executionSummary`),(e.metadata!==void 0||t.metadata!==void 0)&&!c(e.metadata,t.metadata)&&n.add(`metadata`),(e.executionSummary!==void 0||t.executionSummary!==void 0)&&!a.equals(e.executionSummary,t.executionSummary)&&n.add(`executionSummary`),n}e.diff=s;function c(e,t){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t||typeof e!=`object`)return!1;let r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;if(r&&i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1}if(n.objectLiteral(e)&&n.objectLiteral(t)){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!c(n,r)))return!1;for(let r=0;r<n.length;r++){let i=n[r];if(!c(e[i],t[i]))return!1}}return!0}})(o||(exports.NotebookCell=o={}));var s;(function(e){function r(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}}e.create=r;function i(e){let r=e;return n.objectLiteral(r)&&n.string(r.uri)&&t.integer.is(r.version)&&n.typedArray(r.cells,o.is)}e.is=i})(s||(exports.NotebookDocument=s={}));var c;(function(e){e.method=`notebookDocument/sync`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.RegistrationType(e.method)})(c||(exports.NotebookDocumentSyncRegistrationType=c={}));var l;(function(e){e.method=`notebookDocument/didOpen`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(l||(exports.DidOpenNotebookDocumentNotification=l={}));var u;(function(e){function r(e){let r=e;return n.objectLiteral(r)&&t.uinteger.is(r.start)&&t.uinteger.is(r.deleteCount)&&(r.cells===void 0||n.typedArray(r.cells,o.is))}e.is=r;function i(e,t,n){let r={start:e,deleteCount:t};return n!==void 0&&(r.cells=n),r}e.create=i})(u||(exports.NotebookCellArrayChange=u={}));var f;(function(e){e.method=`notebookDocument/didChange`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(f||(exports.DidChangeNotebookDocumentNotification=f={}));var p;(function(e){e.method=`notebookDocument/didSave`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(p||(exports.DidSaveNotebookDocumentNotification=p={}));var m;(function(e){e.method=`notebookDocument/didClose`,e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.ProtocolNotificationType(e.method),e.registrationMethod=c.method})(m||(exports.DidCloseNotebookDocumentNotification=m={}))})),Mt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineCompletionRequest=void 0;let t=Z();var n;(function(e){e.method=`textDocument/inlineCompletion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(n||(exports.InlineCompletionRequest=n={}))})),Nt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkspaceSymbolRequest=exports.CodeActionResolveRequest=exports.CodeActionRequest=exports.DocumentSymbolRequest=exports.DocumentHighlightRequest=exports.ReferencesRequest=exports.DefinitionRequest=exports.SignatureHelpRequest=exports.SignatureHelpTriggerKind=exports.HoverRequest=exports.CompletionResolveRequest=exports.CompletionRequest=exports.CompletionTriggerKind=exports.PublishDiagnosticsNotification=exports.WatchKind=exports.RelativePattern=exports.FileChangeType=exports.DidChangeWatchedFilesNotification=exports.WillSaveTextDocumentWaitUntilRequest=exports.WillSaveTextDocumentNotification=exports.TextDocumentSaveReason=exports.DidSaveTextDocumentNotification=exports.DidCloseTextDocumentNotification=exports.DidChangeTextDocumentNotification=exports.TextDocumentContentChangeEvent=exports.DidOpenTextDocumentNotification=exports.TextDocumentSyncKind=exports.TelemetryEventNotification=exports.LogMessageNotification=exports.ShowMessageRequest=exports.ShowMessageNotification=exports.MessageType=exports.DidChangeConfigurationNotification=exports.ExitNotification=exports.ShutdownRequest=exports.InitializedNotification=exports.InitializeErrorCodes=exports.InitializeRequest=exports.WorkDoneProgressOptions=exports.TextDocumentRegistrationOptions=exports.StaticRegistrationOptions=exports.PositionEncodingKind=exports.FailureHandlingKind=exports.ResourceOperationKind=exports.UnregistrationRequest=exports.RegistrationRequest=exports.DocumentSelector=exports.NotebookCellTextDocumentFilter=exports.NotebookDocumentFilter=exports.TextDocumentFilter=void 0,exports.MonikerRequest=exports.MonikerKind=exports.UniquenessLevel=exports.WillDeleteFilesRequest=exports.DidDeleteFilesNotification=exports.WillRenameFilesRequest=exports.DidRenameFilesNotification=exports.WillCreateFilesRequest=exports.DidCreateFilesNotification=exports.FileOperationPatternKind=exports.LinkedEditingRangeRequest=exports.ShowDocumentRequest=exports.SemanticTokensRegistrationType=exports.SemanticTokensRefreshRequest=exports.SemanticTokensRangeRequest=exports.SemanticTokensDeltaRequest=exports.SemanticTokensRequest=exports.TokenFormat=exports.CallHierarchyPrepareRequest=exports.CallHierarchyOutgoingCallsRequest=exports.CallHierarchyIncomingCallsRequest=exports.WorkDoneProgressCancelNotification=exports.WorkDoneProgressCreateRequest=exports.WorkDoneProgress=exports.SelectionRangeRequest=exports.DeclarationRequest=exports.FoldingRangeRefreshRequest=exports.FoldingRangeRequest=exports.ColorPresentationRequest=exports.DocumentColorRequest=exports.ConfigurationRequest=exports.DidChangeWorkspaceFoldersNotification=exports.WorkspaceFoldersRequest=exports.TypeDefinitionRequest=exports.ImplementationRequest=exports.ApplyWorkspaceEditRequest=exports.ExecuteCommandRequest=exports.PrepareRenameRequest=exports.RenameRequest=exports.PrepareSupportDefaultBehavior=exports.DocumentOnTypeFormattingRequest=exports.DocumentRangesFormattingRequest=exports.DocumentRangeFormattingRequest=exports.DocumentFormattingRequest=exports.DocumentLinkResolveRequest=exports.DocumentLinkRequest=exports.CodeLensRefreshRequest=exports.CodeLensResolveRequest=exports.CodeLensRequest=exports.WorkspaceSymbolResolveRequest=void 0,exports.InlineCompletionRequest=exports.DidCloseNotebookDocumentNotification=exports.DidSaveNotebookDocumentNotification=exports.DidChangeNotebookDocumentNotification=exports.NotebookCellArrayChange=exports.DidOpenNotebookDocumentNotification=exports.NotebookDocumentSyncRegistrationType=exports.NotebookDocument=exports.NotebookCell=exports.ExecutionSummary=exports.NotebookCellKind=exports.DiagnosticRefreshRequest=exports.WorkspaceDiagnosticRequest=exports.DocumentDiagnosticRequest=exports.DocumentDiagnosticReportKind=exports.DiagnosticServerCancellationData=exports.InlayHintRefreshRequest=exports.InlayHintResolveRequest=exports.InlayHintRequest=exports.InlineValueRefreshRequest=exports.InlineValueRequest=exports.TypeHierarchySupertypesRequest=exports.TypeHierarchySubtypesRequest=exports.TypeHierarchyPrepareRequest=void 0;let t=Z(),n=(ut(),d(D)),r=dt(),i=ft();Object.defineProperty(exports,`ImplementationRequest`,{enumerable:!0,get:function(){return i.ImplementationRequest}});let a=pt();Object.defineProperty(exports,`TypeDefinitionRequest`,{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});let o=mt();Object.defineProperty(exports,`WorkspaceFoldersRequest`,{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(exports,`DidChangeWorkspaceFoldersNotification`,{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});let s=ht();Object.defineProperty(exports,`ConfigurationRequest`,{enumerable:!0,get:function(){return s.ConfigurationRequest}});let c=gt();Object.defineProperty(exports,`DocumentColorRequest`,{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(exports,`ColorPresentationRequest`,{enumerable:!0,get:function(){return c.ColorPresentationRequest}});let l=_t();Object.defineProperty(exports,`FoldingRangeRequest`,{enumerable:!0,get:function(){return l.FoldingRangeRequest}}),Object.defineProperty(exports,`FoldingRangeRefreshRequest`,{enumerable:!0,get:function(){return l.FoldingRangeRefreshRequest}});let u=vt();Object.defineProperty(exports,`DeclarationRequest`,{enumerable:!0,get:function(){return u.DeclarationRequest}});let f=yt();Object.defineProperty(exports,`SelectionRangeRequest`,{enumerable:!0,get:function(){return f.SelectionRangeRequest}});let p=bt();Object.defineProperty(exports,`WorkDoneProgress`,{enumerable:!0,get:function(){return p.WorkDoneProgress}}),Object.defineProperty(exports,`WorkDoneProgressCreateRequest`,{enumerable:!0,get:function(){return p.WorkDoneProgressCreateRequest}}),Object.defineProperty(exports,`WorkDoneProgressCancelNotification`,{enumerable:!0,get:function(){return p.WorkDoneProgressCancelNotification}});let m=xt();Object.defineProperty(exports,`CallHierarchyIncomingCallsRequest`,{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(exports,`CallHierarchyOutgoingCallsRequest`,{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(exports,`CallHierarchyPrepareRequest`,{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});let h=St();Object.defineProperty(exports,`TokenFormat`,{enumerable:!0,get:function(){return h.TokenFormat}}),Object.defineProperty(exports,`SemanticTokensRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRequest}}),Object.defineProperty(exports,`SemanticTokensDeltaRequest`,{enumerable:!0,get:function(){return h.SemanticTokensDeltaRequest}}),Object.defineProperty(exports,`SemanticTokensRangeRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRangeRequest}}),Object.defineProperty(exports,`SemanticTokensRefreshRequest`,{enumerable:!0,get:function(){return h.SemanticTokensRefreshRequest}}),Object.defineProperty(exports,`SemanticTokensRegistrationType`,{enumerable:!0,get:function(){return h.SemanticTokensRegistrationType}});let g=Ct();Object.defineProperty(exports,`ShowDocumentRequest`,{enumerable:!0,get:function(){return g.ShowDocumentRequest}});let _=wt();Object.defineProperty(exports,`LinkedEditingRangeRequest`,{enumerable:!0,get:function(){return _.LinkedEditingRangeRequest}});let v=Tt();Object.defineProperty(exports,`FileOperationPatternKind`,{enumerable:!0,get:function(){return v.FileOperationPatternKind}}),Object.defineProperty(exports,`DidCreateFilesNotification`,{enumerable:!0,get:function(){return v.DidCreateFilesNotification}}),Object.defineProperty(exports,`WillCreateFilesRequest`,{enumerable:!0,get:function(){return v.WillCreateFilesRequest}}),Object.defineProperty(exports,`DidRenameFilesNotification`,{enumerable:!0,get:function(){return v.DidRenameFilesNotification}}),Object.defineProperty(exports,`WillRenameFilesRequest`,{enumerable:!0,get:function(){return v.WillRenameFilesRequest}}),Object.defineProperty(exports,`DidDeleteFilesNotification`,{enumerable:!0,get:function(){return v.DidDeleteFilesNotification}}),Object.defineProperty(exports,`WillDeleteFilesRequest`,{enumerable:!0,get:function(){return v.WillDeleteFilesRequest}});let y=Et();Object.defineProperty(exports,`UniquenessLevel`,{enumerable:!0,get:function(){return y.UniquenessLevel}}),Object.defineProperty(exports,`MonikerKind`,{enumerable:!0,get:function(){return y.MonikerKind}}),Object.defineProperty(exports,`MonikerRequest`,{enumerable:!0,get:function(){return y.MonikerRequest}});let b=Dt();Object.defineProperty(exports,`TypeHierarchyPrepareRequest`,{enumerable:!0,get:function(){return b.TypeHierarchyPrepareRequest}}),Object.defineProperty(exports,`TypeHierarchySubtypesRequest`,{enumerable:!0,get:function(){return b.TypeHierarchySubtypesRequest}}),Object.defineProperty(exports,`TypeHierarchySupertypesRequest`,{enumerable:!0,get:function(){return b.TypeHierarchySupertypesRequest}});let x=Ot();Object.defineProperty(exports,`InlineValueRequest`,{enumerable:!0,get:function(){return x.InlineValueRequest}}),Object.defineProperty(exports,`InlineValueRefreshRequest`,{enumerable:!0,get:function(){return x.InlineValueRefreshRequest}});let ee=kt();Object.defineProperty(exports,`InlayHintRequest`,{enumerable:!0,get:function(){return ee.InlayHintRequest}}),Object.defineProperty(exports,`InlayHintResolveRequest`,{enumerable:!0,get:function(){return ee.InlayHintResolveRequest}}),Object.defineProperty(exports,`InlayHintRefreshRequest`,{enumerable:!0,get:function(){return ee.InlayHintRefreshRequest}});let S=At();Object.defineProperty(exports,`DiagnosticServerCancellationData`,{enumerable:!0,get:function(){return S.DiagnosticServerCancellationData}}),Object.defineProperty(exports,`DocumentDiagnosticReportKind`,{enumerable:!0,get:function(){return S.DocumentDiagnosticReportKind}}),Object.defineProperty(exports,`DocumentDiagnosticRequest`,{enumerable:!0,get:function(){return S.DocumentDiagnosticRequest}}),Object.defineProperty(exports,`WorkspaceDiagnosticRequest`,{enumerable:!0,get:function(){return S.WorkspaceDiagnosticRequest}}),Object.defineProperty(exports,`DiagnosticRefreshRequest`,{enumerable:!0,get:function(){return S.DiagnosticRefreshRequest}});let C=jt();Object.defineProperty(exports,`NotebookCellKind`,{enumerable:!0,get:function(){return C.NotebookCellKind}}),Object.defineProperty(exports,`ExecutionSummary`,{enumerable:!0,get:function(){return C.ExecutionSummary}}),Object.defineProperty(exports,`NotebookCell`,{enumerable:!0,get:function(){return C.NotebookCell}}),Object.defineProperty(exports,`NotebookDocument`,{enumerable:!0,get:function(){return C.NotebookDocument}}),Object.defineProperty(exports,`NotebookDocumentSyncRegistrationType`,{enumerable:!0,get:function(){return C.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(exports,`DidOpenNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidOpenNotebookDocumentNotification}}),Object.defineProperty(exports,`NotebookCellArrayChange`,{enumerable:!0,get:function(){return C.NotebookCellArrayChange}}),Object.defineProperty(exports,`DidChangeNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidChangeNotebookDocumentNotification}}),Object.defineProperty(exports,`DidSaveNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidSaveNotebookDocumentNotification}}),Object.defineProperty(exports,`DidCloseNotebookDocumentNotification`,{enumerable:!0,get:function(){return C.DidCloseNotebookDocumentNotification}});let w=Mt();Object.defineProperty(exports,`InlineCompletionRequest`,{enumerable:!0,get:function(){return w.InlineCompletionRequest}});var te;(function(e){function t(e){let t=e;return r.string(t)||r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}e.is=t})(te||(exports.TextDocumentFilter=te={}));var T;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebookType)||r.string(t.scheme)||r.string(t.pattern))}e.is=t})(T||(exports.NotebookDocumentFilter=T={}));var E;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(r.string(t.notebook)||T.is(t.notebook))&&(t.language===void 0||r.string(t.language))}e.is=t})(E||(exports.NotebookCellTextDocumentFilter=E={}));var O;(function(e){function t(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!te.is(t)&&!E.is(t))return!1;return!0}e.is=t})(O||(exports.DocumentSelector=O={}));var k;(function(e){e.method=`client/registerCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(k||(exports.RegistrationRequest=k={}));var A;(function(e){e.method=`client/unregisterCapability`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(A||(exports.UnregistrationRequest=A={}));var j;(function(e){e.Create=`create`,e.Rename=`rename`,e.Delete=`delete`})(j||(exports.ResourceOperationKind=j={}));var M;(function(e){e.Abort=`abort`,e.Transactional=`transactional`,e.TextOnlyTransactional=`textOnlyTransactional`,e.Undo=`undo`})(M||(exports.FailureHandlingKind=M={}));var N;(function(e){e.UTF8=`utf-8`,e.UTF16=`utf-16`,e.UTF32=`utf-32`})(N||(exports.PositionEncodingKind=N={}));var P;(function(e){function t(e){let t=e;return t&&r.string(t.id)&&t.id.length>0}e.hasId=t})(P||(exports.StaticRegistrationOptions=P={}));var F;(function(e){function t(e){let t=e;return t&&(t.documentSelector===null||O.is(t.documentSelector))}e.is=t})(F||(exports.TextDocumentRegistrationOptions=F={}));var I;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(t.workDoneProgress===void 0||r.boolean(t.workDoneProgress))}e.is=t;function n(e){let t=e;return t&&r.boolean(t.workDoneProgress)}e.hasWorkDoneProgress=n})(I||(exports.WorkDoneProgressOptions=I={}));var L;(function(e){e.method=`initialize`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(L||(exports.InitializeRequest=L={}));var R;(function(e){e.unknownProtocolVersion=1})(R||(exports.InitializeErrorCodes=R={}));var z;(function(e){e.method=`initialized`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(z||(exports.InitializedNotification=z={}));var B;(function(e){e.method=`shutdown`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType0(e.method)})(B||(exports.ShutdownRequest=B={}));var ne;(function(e){e.method=`exit`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType0(e.method)})(ne||(exports.ExitNotification=ne={}));var V;(function(e){e.method=`workspace/didChangeConfiguration`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(V||(exports.DidChangeConfigurationNotification=V={}));var re;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(re||(exports.MessageType=re={}));var ie;(function(e){e.method=`window/showMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(ie||(exports.ShowMessageNotification=ie={}));var ae;(function(e){e.method=`window/showMessageRequest`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(e.method)})(ae||(exports.ShowMessageRequest=ae={}));var H;(function(e){e.method=`window/logMessage`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(H||(exports.LogMessageNotification=H={}));var U;(function(e){e.method=`telemetry/event`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(U||(exports.TelemetryEventNotification=U={}));var W;(function(e){e.None=0,e.Full=1,e.Incremental=2})(W||(exports.TextDocumentSyncKind=W={}));var G;(function(e){e.method=`textDocument/didOpen`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(G||(exports.DidOpenTextDocumentNotification=G={}));var K;(function(e){function t(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength==`number`)}e.isIncremental=t;function n(e){let t=e;return t!=null&&typeof t.text==`string`&&t.range===void 0&&t.rangeLength===void 0}e.isFull=n})(K||(exports.TextDocumentContentChangeEvent=K={}));var oe;(function(e){e.method=`textDocument/didChange`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(oe||(exports.DidChangeTextDocumentNotification=oe={}));var se;(function(e){e.method=`textDocument/didClose`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(se||(exports.DidCloseTextDocumentNotification=se={}));var ce;(function(e){e.method=`textDocument/didSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(ce||(exports.DidSaveTextDocumentNotification=ce={}));var q;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(q||(exports.TextDocumentSaveReason=q={}));var le;(function(e){e.method=`textDocument/willSave`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(le||(exports.WillSaveTextDocumentNotification=le={}));var J;(function(e){e.method=`textDocument/willSaveWaitUntil`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(J||(exports.WillSaveTextDocumentWaitUntilRequest=J={}));var ue;(function(e){e.method=`workspace/didChangeWatchedFiles`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolNotificationType(e.method)})(ue||(exports.DidChangeWatchedFilesNotification=ue={}));var de;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(de||(exports.FileChangeType=de={}));var Y;(function(e){function t(e){let t=e;return r.objectLiteral(t)&&(n.URI.is(t.baseUri)||n.WorkspaceFolder.is(t.baseUri))&&r.string(t.pattern)}e.is=t})(Y||(exports.RelativePattern=Y={}));var fe;(function(e){e.Create=1,e.Change=2,e.Delete=4})(fe||(exports.WatchKind=fe={}));var pe;(function(e){e.method=`textDocument/publishDiagnostics`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolNotificationType(e.method)})(pe||(exports.PublishDiagnosticsNotification=pe={}));var me;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(me||(exports.CompletionTriggerKind=me={}));var he;(function(e){e.method=`textDocument/completion`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(he||(exports.CompletionRequest=he={}));var ge;(function(e){e.method=`completionItem/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ge||(exports.CompletionResolveRequest=ge={}));var _e;(function(e){e.method=`textDocument/hover`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(_e||(exports.HoverRequest=_e={}));var ve;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(ve||(exports.SignatureHelpTriggerKind=ve={}));var ye;(function(e){e.method=`textDocument/signatureHelp`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ye||(exports.SignatureHelpRequest=ye={}));var be;(function(e){e.method=`textDocument/definition`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(be||(exports.DefinitionRequest=be={}));var xe;(function(e){e.method=`textDocument/references`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(xe||(exports.ReferencesRequest=xe={}));var Se;(function(e){e.method=`textDocument/documentHighlight`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Se||(exports.DocumentHighlightRequest=Se={}));var Ce;(function(e){e.method=`textDocument/documentSymbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ce||(exports.DocumentSymbolRequest=Ce={}));var we;(function(e){e.method=`textDocument/codeAction`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(we||(exports.CodeActionRequest=we={}));var Te;(function(e){e.method=`codeAction/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Te||(exports.CodeActionResolveRequest=Te={}));var Ee;(function(e){e.method=`workspace/symbol`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ee||(exports.WorkspaceSymbolRequest=Ee={}));var De;(function(e){e.method=`workspaceSymbol/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(De||(exports.WorkspaceSymbolResolveRequest=De={}));var Oe;(function(e){e.method=`textDocument/codeLens`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Oe||(exports.CodeLensRequest=Oe={}));var ke;(function(e){e.method=`codeLens/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ke||(exports.CodeLensResolveRequest=ke={}));var Ae;(function(e){e.method=`workspace/codeLens/refresh`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType0(e.method)})(Ae||(exports.CodeLensRefreshRequest=Ae={}));var je;(function(e){e.method=`textDocument/documentLink`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(je||(exports.DocumentLinkRequest=je={}));var Me;(function(e){e.method=`documentLink/resolve`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Me||(exports.DocumentLinkResolveRequest=Me={}));var Ne;(function(e){e.method=`textDocument/formatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ne||(exports.DocumentFormattingRequest=Ne={}));var Pe;(function(e){e.method=`textDocument/rangeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Pe||(exports.DocumentRangeFormattingRequest=Pe={}));var Fe;(function(e){e.method=`textDocument/rangesFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Fe||(exports.DocumentRangesFormattingRequest=Fe={}));var Ie;(function(e){e.method=`textDocument/onTypeFormatting`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Ie||(exports.DocumentOnTypeFormattingRequest=Ie={}));var Le;(function(e){e.Identifier=1})(Le||(exports.PrepareSupportDefaultBehavior=Le={}));var Re;(function(e){e.method=`textDocument/rename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Re||(exports.RenameRequest=Re={}));var ze;(function(e){e.method=`textDocument/prepareRename`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(ze||(exports.PrepareRenameRequest=ze={}));var Be;(function(e){e.method=`workspace/executeCommand`,e.messageDirection=t.MessageDirection.clientToServer,e.type=new t.ProtocolRequestType(e.method)})(Be||(exports.ExecuteCommandRequest=Be={}));var Ve;(function(e){e.method=`workspace/applyEdit`,e.messageDirection=t.MessageDirection.serverToClient,e.type=new t.ProtocolRequestType(`workspace/applyEdit`)})(Ve||(exports.ApplyWorkspaceEditRequest=Ve={}))})),Pt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createProtocolConnection=void 0;let t=T();function n(e,n,r,i){return t.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,t.createMessageConnection)(e,n,r,i)}exports.createProtocolConnection=n})),Ft=s((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LSPErrorCodes=exports.createProtocolConnection=void 0,n(T(),exports),n((ut(),d(D)),exports),n(Z(),exports),n(Nt(),exports);var r=Pt();Object.defineProperty(exports,`createProtocolConnection`,{enumerable:!0,get:function(){return r.createProtocolConnection}});var i;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(i||(exports.LSPErrorCodes=i={}))})),Q=s((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createProtocolConnection=void 0;let r=E();n(E(),exports),n(Ft(),exports);function i(e,t,n,i){return(0,r.createMessageConnection)(e,t,n,i)}exports.createProtocolConnection=i})),It=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SemanticTokensBuilder=exports.SemanticTokensDiff=exports.SemanticTokensFeature=void 0;let t=Q(),n=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(t.SemanticTokensRefreshRequest.type),on:e=>{let n=t.SemanticTokensRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onDelta:e=>{let n=t.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onRange:e=>{let n=t.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.SemanticTokensFeature=n;var r=class{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){let e=this.originalSequence.length,t=this.modifiedSequence.length,n=0;for(;n<t&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<t&&n<e){let r=e-1,i=t-1;for(;r>=n&&i>=n&&this.originalSequence[r]===this.modifiedSequence[i];)r--,i--;(r<n||i<n)&&(r++,i++);let a=r-n+1,o=this.modifiedSequence.slice(n,i+1);return o.length===1&&o[0]===this.originalSequence[r]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:o}]}else if(n<t)return[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}];else if(n<e)return[{start:n,deleteCount:e-n}];else return[]}};exports.SemanticTokensDiff=r;var i=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let a=e,o=t;this._dataLen>0&&(a-=this._prevLine,a===0&&(o-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=o,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData===void 0?this.build():{resultId:this.id,edits:new r(this._prevData,this._data).computeDiff()}}};exports.SemanticTokensBuilder=i})),Lt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineCompletionFeature=void 0;let t=Q(),n=e=>class extends e{get inlineCompletion(){return{on:e=>this.connection.onRequest(t.InlineCompletionRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}};exports.InlineCompletionFeature=n})),Rt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TextDocuments=void 0;let t=Q();var n=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new t.Emitter,this._onDidOpen=new t.Emitter,this._onDidClose=new t.Emitter,this._onDidSave=new t.Emitter,this._onWillSave=new t.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=t.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._syncedDocuments.set(t.uri,n);let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),n.push(e.onDidChangeTextDocument(e=>{let t=e.textDocument,n=e.contentChanges;if(n.length===0)return;let{version:r}=t;if(r==null)throw Error(`Received document change event for ${t.uri} without valid version identifier`);let i=this._syncedDocuments.get(t.uri);i!==void 0&&(i=this._configuration.update(i,n,r),this._syncedDocuments.set(t.uri,i),this._onDidChangeContent.fire(Object.freeze({document:i})))})),n.push(e.onDidCloseTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&(this._syncedDocuments.delete(e.textDocument.uri),this._onDidClose.fire(Object.freeze({document:t})))})),n.push(e.onWillSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((e,t)=>{let n=this._syncedDocuments.get(e.textDocument.uri);return n!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),n.push(e.onDidSaveTextDocument(e=>{let t=this._syncedDocuments.get(e.textDocument.uri);t!==void 0&&this._onDidSave.fire(Object.freeze({document:t}))})),t.Disposable.create(()=>{n.forEach(e=>e.dispose())})}};exports.TextDocuments=n})),zt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.NotebookDocuments=exports.NotebookSyncFeature=void 0;let t=Q(),n=Rt(),r=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(t.DidOpenNotebookDocumentNotification.type,t=>{e(t)}),onDidChangeNotebookDocument:e=>this.connection.onNotification(t.DidChangeNotebookDocumentNotification.type,t=>{e(t)}),onDidSaveNotebookDocument:e=>this.connection.onNotification(t.DidSaveNotebookDocumentNotification.type,t=>{e(t)}),onDidCloseNotebookDocument:e=>this.connection.onNotification(t.DidCloseNotebookDocumentNotification.type,t=>{e(t)})}}};exports.NotebookSyncFeature=r;var i=class e{onDidOpenTextDocument(e){return this.openHandler=e,t.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,t.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,t.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};i.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var a=class{constructor(e){e instanceof n.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new n.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new t.Emitter,this._onDidChange=new t.Emitter,this._onDidSave=new t.Emitter,this._onDidClose=new t.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){let t=typeof e==`string`?e:e.document,n=this.notebookCellMap.get(t);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new i,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(e=>{this.notebookDocuments.set(e.notebookDocument.uri,e.notebookDocument);for(let t of e.cellTextDocuments)n.openTextDocument({textDocument:t});this.updateCellMap(e.notebookDocument),this._onDidOpen.fire(e.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t===void 0)return;t.version=e.notebookDocument.version;let r=t.metadata,i=!1,a=e.change;a.metadata!==void 0&&(i=!0,t.metadata=a.metadata);let o=[],s=[],c=[],l=[];if(a.cells!==void 0){let e=a.cells;if(e.structure!==void 0){let r=e.structure.array;if(t.cells.splice(r.start,r.deleteCount,...r.cells===void 0?[]:r.cells),e.structure.didOpen!==void 0)for(let t of e.structure.didOpen)n.openTextDocument({textDocument:t}),o.push(t.uri);if(e.structure.didClose)for(let t of e.structure.didClose)n.closeTextDocument({textDocument:t}),s.push(t.uri)}if(e.data!==void 0){let n=new Map(e.data.map(e=>[e.document,e]));for(let e=0;e<=t.cells.length;e++){let r=n.get(t.cells[e].document);if(r!==void 0){let i=t.cells.splice(e,1,r);if(c.push({old:i[0],new:r}),n.delete(r.document),n.size===0)break}}}if(e.textContent!==void 0)for(let t of e.textContent)n.changeTextDocument({textDocument:t.document,contentChanges:t.changes}),l.push(t.document.uri)}this.updateCellMap(t);let u={notebookDocument:t};i&&(u.metadata={old:r,new:t.metadata});let d=[];for(let e of o)d.push(this.getNotebookCell(e));let f=[];for(let e of s)f.push(this.getNotebookCell(e));let p=[];for(let e of l)p.push(this.getNotebookCell(e));(d.length>0||f.length>0||c.length>0||p.length>0)&&(u.cells={added:d,removed:f,changed:{data:c,textContent:p}}),(u.metadata!==void 0||u.cells!==void 0)&&this._onDidChange.fire(u)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);t!==void 0&&this._onDidSave.fire(t)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(e=>{let t=this.notebookDocuments.get(e.notebookDocument.uri);if(t!==void 0){this._onDidClose.fire(t);for(let t of e.cellTextDocuments)n.closeTextDocument({textDocument:t});this.notebookDocuments.delete(e.notebookDocument.uri);for(let e of t.cells)this.notebookCellMap.delete(e.document)}})),t.Disposable.create(()=>{r.forEach(e=>e.dispose())})}updateCellMap(e){for(let t of e.cells)this.notebookCellMap.set(t.document,[t,e])}};exports.NotebookDocuments=a})),Bt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.thenable=exports.typedArray=exports.stringArray=exports.array=exports.func=exports.error=exports.number=exports.string=exports.boolean=void 0;function t(e){return e===!0||e===!1}exports.boolean=t;function n(e){return typeof e==`string`||e instanceof String}exports.string=n;function r(e){return typeof e==`number`||e instanceof Number}exports.number=r;function i(e){return e instanceof Error}exports.error=i;function a(e){return typeof e==`function`}exports.func=a;function o(e){return Array.isArray(e)}exports.array=o;function s(e){return o(e)&&e.every(e=>n(e))}exports.stringArray=s;function c(e,t){return Array.isArray(e)&&e.every(t)}exports.typedArray=c;function l(e){return e&&a(e.then)}exports.thenable=l})),Vt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.generateUuid=exports.parse=exports.isUUID=exports.v4=exports.empty=void 0;var t=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},n=class e extends t{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),`-`,`4`,e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),`-`,e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(``))}};n._chars=[`0`,`1`,`2`,`3`,`4`,`5`,`6`,`6`,`7`,`8`,`9`,`a`,`b`,`c`,`d`,`e`,`f`],n._timeHighBits=[`8`,`9`,`a`,`b`],exports.empty=new t(`00000000-0000-0000-0000-000000000000`);function r(){return new n}exports.v4=r;let i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return i.test(e)}exports.isUUID=a;function o(e){if(!a(e))throw Error(`invalid uuid`);return new t(e)}exports.parse=o;function s(){return r().asHex()}exports.generateUuid=s})),Ht=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.attachPartialResult=exports.ProgressFeature=exports.attachWorkDone=void 0;let t=Q(),n=Vt();var r=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(e,n,r,i){let a={kind:`begin`,title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(t.WorkDoneProgress.type,this._token,a)}report(e,n){let r={kind:`report`};typeof e==`number`?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(t.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(t.WorkDoneProgress.type,this._token,{kind:`end`})}};r.Instances=new Map;var i=class extends r{constructor(e,n){super(e,n),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},a=class{constructor(){}begin(){}report(){}done(){}},o=class extends a{constructor(){super(),this._source=new t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function s(e,t){if(t===void 0||t.workDoneToken===void 0)return new a;let n=t.workDoneToken;return delete t.workDoneToken,new r(e,n)}exports.attachWorkDone=s;let c=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(t.WorkDoneProgressCancelNotification.type,e=>{let t=r.Instances.get(e.token);(t instanceof i||t instanceof o)&&t.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new a:new r(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,n.generateUuid)();return this.connection.sendRequest(t.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>{let t=new i(this.connection,e);return t})}else return Promise.resolve(new o)}};exports.ProgressFeature=c;var l;(function(e){e.type=new t.ProgressType})(l||={});var u=class{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(l.type,this._token,e)}};function d(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new u(e,n)}exports.attachPartialResult=d})),Ut=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ConfigurationFeature=void 0;let t=Q(),n=Bt(),r=e=>class extends e{getConfiguration(e){return e?n.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(t.ConfigurationRequest.type,n).then(t=>Array.isArray(t)?Array.isArray(e)?t:t[0]:Array.isArray(e)?[]:null)}};exports.ConfigurationFeature=r})),Wt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.WorkspaceFoldersFeature=void 0;let t=Q(),n=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new t.Emitter,this.connection.onNotification(t.DidChangeWorkspaceFoldersNotification.type,e=>{this._onDidChangeWorkspaceFolders.fire(e.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=t===!0||typeof t==`string`}getWorkspaceFolders(){return this.connection.sendRequest(t.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw Error(`Client doesn't support sending workspace folder change events.`);return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(t.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};exports.WorkspaceFoldersFeature=n})),Gt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.CallHierarchyFeature=void 0;let t=Q(),n=e=>class extends e{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.CallHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onIncomingCalls:e=>{let n=t.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onOutgoingCalls:e=>{let n=t.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.CallHierarchyFeature=n})),Kt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ShowDocumentFeature=void 0;let t=Q(),n=e=>class extends e{showDocument(e){return this.connection.sendRequest(t.ShowDocumentRequest.type,e)}};exports.ShowDocumentFeature=n})),qt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FileOperationsFeature=void 0;let t=Q(),n=e=>class extends e{onDidCreateFiles(e){return this.connection.onNotification(t.DidCreateFilesNotification.type,t=>{e(t)})}onDidRenameFiles(e){return this.connection.onNotification(t.DidRenameFilesNotification.type,t=>{e(t)})}onDidDeleteFiles(e){return this.connection.onNotification(t.DidDeleteFilesNotification.type,t=>{e(t)})}onWillCreateFiles(e){return this.connection.onRequest(t.WillCreateFilesRequest.type,(t,n)=>e(t,n))}onWillRenameFiles(e){return this.connection.onRequest(t.WillRenameFilesRequest.type,(t,n)=>e(t,n))}onWillDeleteFiles(e){return this.connection.onRequest(t.WillDeleteFilesRequest.type,(t,n)=>e(t,n))}};exports.FileOperationsFeature=n})),Jt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.LinkedEditingRangeFeature=void 0;let t=Q(),n=e=>class extends e{onLinkedEditingRange(e){return this.connection.onRequest(t.LinkedEditingRangeRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))}};exports.LinkedEditingRangeFeature=n})),Yt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TypeHierarchyFeature=void 0;let t=Q(),n=e=>class extends e{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(t.TypeHierarchyPrepareRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)),onSupertypes:e=>{let n=t.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))},onSubtypes:e=>{let n=t.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.TypeHierarchyFeature=n})),Xt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlineValueFeature=void 0;let t=Q(),n=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(t.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(t.InlineValueRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t)))}}};exports.InlineValueFeature=n})),Zt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.FoldingRangeFeature=void 0;let t=Q(),n=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(t.FoldingRangeRefreshRequest.type),on:e=>{let n=t.FoldingRangeRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.FoldingRangeFeature=n})),Qt=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.InlayHintFeature=void 0;let t=Q(),n=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(t.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(t.InlayHintRequest.type,(t,n)=>e(t,n,this.attachWorkDoneProgress(t))),resolve:e=>this.connection.onRequest(t.InlayHintResolveRequest.type,(t,n)=>e(t,n))}}};exports.InlayHintFeature=n})),$t=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DiagnosticFeature=void 0;let t=Q(),n=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(t.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(t.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:e=>this.connection.onRequest(t.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t.WorkspaceDiagnosticRequest.partialResult,n)))}}};exports.DiagnosticFeature=n})),en=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.MonikerFeature=void 0;let t=Q(),n=e=>class extends e{get moniker(){return{on:e=>{let n=t.MonikerRequest.type;return this.connection.onRequest(n,(t,r)=>e(t,r,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(n,t)))}}}};exports.MonikerFeature=n})),tn=s((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createConnection=exports.combineFeatures=exports.combineNotebooksFeatures=exports.combineLanguagesFeatures=exports.combineWorkspaceFeatures=exports.combineWindowFeatures=exports.combineClientFeatures=exports.combineTracerFeatures=exports.combineTelemetryFeatures=exports.combineConsoleFeatures=exports._NotebooksImpl=exports._LanguagesImpl=exports.BulkUnregistration=exports.BulkRegistration=exports.ErrorMessageTracker=void 0;let t=Q(),n=Bt(),r=Vt(),i=Ht(),a=Ut(),o=Wt(),s=Gt(),c=It(),l=Kt(),u=qt(),d=Jt(),f=Yt(),p=Xt(),m=Zt(),h=Qt(),g=$t(),_=zt(),v=en();function y(e){if(e!==null)return e}var b=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||=0,t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach(t=>{e.window.showErrorMessage(t)})}};exports.ErrorMessageTracker=b;var x=class{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(t.MessageType.Error,e)}warn(e){this.send(t.MessageType.Warning,e)}info(e){this.send(t.MessageType.Info,e)}log(e){this.send(t.MessageType.Log,e)}debug(e){this.send(t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,t.RAL)().console.error(`Sending log message failed`)})}},ee=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}showWarningMessage(e,...n){let r={type:t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}showInformationMessage(e,...n){let r={type:t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest(t.ShowMessageRequest.type,r).then(y)}};let S=(0,l.ShowDocumentFeature)((0,i.ProgressFeature)(ee));var C;(function(e){function t(){return new w}e.create=t})(C||(exports.BulkRegistration=C={}));var w=class{constructor(){this._registrations=[],this._registered=new Set}add(e,t){let i=n.string(e)?e:e.method;if(this._registered.has(i))throw Error(`${i} is already added to this registration`);let a=r.generateUuid();this._registrations.push({id:a,method:i,registerOptions:t||{}}),this._registered.add(i)}asRegistrationParams(){return{registrations:this._registrations}}},te;(function(e){function t(){return new T(void 0,[])}e.create=t})(te||(exports.BulkUnregistration=te={}));var T=class{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach(e=>{this._unregistrations.set(e.method,e)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let n={unregisterations:e};this._connection.sendRequest(t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info(`Bulk unregistration failed.`)})}disposeSingle(e){let r=n.string(e)?e:e.method,i=this._unregistrations.get(r);if(!i)return!1;let a={unregisterations:[i]};return this._connection.sendRequest(t.UnregistrationRequest.type,a).then(()=>{this._unregistrations.delete(r)},e=>{this._connection.console.info(`Un-registering request handler for ${i.id} failed.`)}),!0}},E=class{attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof w?this.registerMany(e):e instanceof T?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,i,a){let o=n.string(i)?i:i.method,s=r.generateUuid(),c={registrations:[{id:s,method:o,registerOptions:a||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,c).then(t=>(e.add({id:s,method:o}),e),e=>(this.connection.console.info(`Registering request handler for ${o} failed.`),Promise.reject(e)))}registerSingle2(e,i){let a=n.string(e)?e:e.method,o=r.generateUuid(),s={registrations:[{id:o,method:a,registerOptions:i||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,s).then(e=>t.Disposable.create(()=>{this.unregisterSingle(o,a).catch(()=>{this.connection.console.info(`Un-registering capability with id ${o} failed.`)})}),e=>(this.connection.console.info(`Registering request handler for ${a} failed.`),Promise.reject(e)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest(t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,n).then(()=>new T(this._connection,n.registrations.map(e=>({id:e.id,method:e.method}))),e=>(this.connection.console.info(`Bulk registration failed.`),Promise.reject(e)))}},D=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(e){return e&&!!e.edit}let r=n(e)?e:{edit:e};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,r)}};let O=(0,u.FileOperationsFeature)((0,o.WorkspaceFoldersFeature)((0,a.ConfigurationFeature)(D)));var k=class{constructor(){this._trace=t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:e,verbose:this._trace===t.Trace.Verbose?n:void 0}).catch(()=>{})}},A=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log(`Sending TelemetryEventNotification failed`)})}},j=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};exports._LanguagesImpl=j;let M=(0,m.FoldingRangeFeature)((0,v.MonikerFeature)((0,g.DiagnosticFeature)((0,h.InlayHintFeature)((0,p.InlineValueFeature)((0,f.TypeHierarchyFeature)((0,d.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,s.CallHierarchyFeature)(j)))))))));var N=class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw Error(`Remote is not attached to a connection yet.`);return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,i.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,i.attachPartialResult)(this.connection,t)}};exports._NotebooksImpl=N;let P=(0,_.NotebookSyncFeature)(N);function F(e,t){return function(n){return t(e(n))}}exports.combineConsoleFeatures=F;function I(e,t){return function(n){return t(e(n))}}exports.combineTelemetryFeatures=I;function L(e,t){return function(n){return t(e(n))}}exports.combineTracerFeatures=L;function R(e,t){return function(n){return t(e(n))}}exports.combineClientFeatures=R;function z(e,t){return function(n){return t(e(n))}}exports.combineWindowFeatures=z;function B(e,t){return function(n){return t(e(n))}}exports.combineWorkspaceFeatures=B;function ne(e,t){return function(n){return t(e(n))}}exports.combineLanguagesFeatures=ne;function V(e,t){return function(n){return t(e(n))}}exports.combineNotebooksFeatures=V;function re(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}let r={__brand:`features`,console:n(e.console,t.console,F),tracer:n(e.tracer,t.tracer,L),telemetry:n(e.telemetry,t.telemetry,I),client:n(e.client,t.client,R),window:n(e.window,t.window,z),workspace:n(e.workspace,t.workspace,B),languages:n(e.languages,t.languages,ne),notebooks:n(e.notebooks,t.notebooks,V)};return r}exports.combineFeatures=re;function ie(e,r,a){let o=a&&a.console?new(a.console(x)):new x,s=e(o);o.rawAttach(s);let c=a&&a.tracer?new(a.tracer(k)):new k,l=a&&a.telemetry?new(a.telemetry(A)):new A,u=a&&a.client?new(a.client(E)):new E,d=a&&a.window?new(a.window(S)):new S,f=a&&a.workspace?new(a.workspace(O)):new O,p=a&&a.languages?new(a.languages(M)):new M,m=a&&a.notebooks?new(a.notebooks(P)):new P,h=[o,c,l,u,d,f,p,m];function g(e){return e instanceof Promise?e:n.thenable(e)?new Promise((t,n)=>{e.then(e=>t(e),e=>n(e))}):Promise.resolve(e)}let _,v,y,b={listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(n.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(e,t),sendNotification:(e,t)=>{let r=n.string(e)?e:e.method;return s.sendNotification(r,t)},onNotification:(e,t)=>s.onNotification(e,t),onProgress:s.onProgress,sendProgress:s.sendProgress,onInitialize:e=>(v=e,{dispose:()=>{v=void 0}}),onInitialized:e=>s.onNotification(t.InitializedNotification.type,e),onShutdown:e=>(_=e,{dispose:()=>{_=void 0}}),onExit:e=>(y=e,{dispose:()=>{y=void 0}}),get console(){return o},get telemetry(){return l},get tracer(){return c},get client(){return u},get window(){return d},get workspace(){return f},get languages(){return p},get notebooks(){return m},onDidChangeConfiguration:e=>s.onNotification(t.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>s.onNotification(t.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>s.onNotification(t.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>s.onNotification(t.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>s.onNotification(t.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>s.onNotification(t.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>s.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>s.onNotification(t.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>s.sendNotification(t.PublishDiagnosticsNotification.type,e),onHover:e=>s.onRequest(t.HoverRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onCompletion:e=>s.onRequest(t.CompletionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCompletionResolve:e=>s.onRequest(t.CompletionResolveRequest.type,e),onSignatureHelp:e=>s.onRequest(t.SignatureHelpRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDeclaration:e=>s.onRequest(t.DeclarationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDefinition:e=>s.onRequest(t.DefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onTypeDefinition:e=>s.onRequest(t.TypeDefinitionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onImplementation:e=>s.onRequest(t.ImplementationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onReferences:e=>s.onRequest(t.ReferencesRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentHighlight:e=>s.onRequest(t.DocumentHighlightRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentSymbol:e=>s.onRequest(t.DocumentSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbol:e=>s.onRequest(t.WorkspaceSymbolRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onWorkspaceSymbolResolve:e=>s.onRequest(t.WorkspaceSymbolResolveRequest.type,e),onCodeAction:e=>s.onRequest(t.CodeActionRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeActionResolve:e=>s.onRequest(t.CodeActionResolveRequest.type,(t,n)=>e(t,n)),onCodeLens:e=>s.onRequest(t.CodeLensRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onCodeLensResolve:e=>s.onRequest(t.CodeLensResolveRequest.type,(t,n)=>e(t,n)),onDocumentFormatting:e=>s.onRequest(t.DocumentFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentRangeFormatting:e=>s.onRequest(t.DocumentRangeFormattingRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onDocumentOnTypeFormatting:e=>s.onRequest(t.DocumentOnTypeFormattingRequest.type,(t,n)=>e(t,n)),onRenameRequest:e=>s.onRequest(t.RenameRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),onPrepareRename:e=>s.onRequest(t.PrepareRenameRequest.type,(t,n)=>e(t,n)),onDocumentLinks:e=>s.onRequest(t.DocumentLinkRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onDocumentLinkResolve:e=>s.onRequest(t.DocumentLinkResolveRequest.type,(t,n)=>e(t,n)),onDocumentColor:e=>s.onRequest(t.DocumentColorRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onColorPresentation:e=>s.onRequest(t.ColorPresentationRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onFoldingRanges:e=>s.onRequest(t.FoldingRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onSelectionRanges:e=>s.onRequest(t.SelectionRangeRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),(0,i.attachPartialResult)(s,t))),onExecuteCommand:e=>s.onRequest(t.ExecuteCommandRequest.type,(t,n)=>e(t,n,(0,i.attachWorkDone)(s,t),void 0)),dispose:()=>s.dispose()};for(let e of h)e.attach(b);return s.onRequest(t.InitializeRequest.type,e=>{r.initialize(e),n.string(e.trace)&&(c.trace=t.Trace.fromString(e.trace));for(let t of h)t.initialize(e.capabilities);if(v){let r=v(e,new t.CancellationTokenSource().token,(0,i.attachWorkDone)(s,e),void 0);return g(r).then(e=>{if(e instanceof t.ResponseError)return e;let r=e;r||={capabilities:{}};let i=r.capabilities;i||(i={},r.capabilities=i),i.textDocumentSync===void 0||i.textDocumentSync===null?i.textDocumentSync=n.number(b.__textDocumentSync)?b.__textDocumentSync:t.TextDocumentSyncKind.None:!n.number(i.textDocumentSync)&&!n.number(i.textDocumentSync.change)&&(i.textDocumentSync.change=n.number(b.__textDocumentSync)?b.__textDocumentSync:t.TextDocumentSyncKind.None);for(let e of h)e.fillServerCapabilities(i);return r})}else{let e={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let t of h)t.fillServerCapabilities(e.capabilities);return e}}),s.onRequest(t.ShutdownRequest.type,()=>{if(r.shutdownReceived=!0,_)return _(new t.CancellationTokenSource().token)}),s.onNotification(t.ExitNotification.type,()=>{try{y&&y()}finally{r.shutdownReceived?r.exit(0):r.exit(1)}}),s.onNotification(t.SetTraceNotification.type,e=>{c.trace=t.Trace.fromString(e.value)}),b}exports.createConnection=ie})),nn=s((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.ProposedFeatures=exports.NotebookDocuments=exports.TextDocuments=exports.SemanticTokensBuilder=void 0;let r=It();Object.defineProperty(exports,`SemanticTokensBuilder`,{enumerable:!0,get:function(){return r.SemanticTokensBuilder}});let i=Lt();n(Q(),exports);let a=Rt();Object.defineProperty(exports,`TextDocuments`,{enumerable:!0,get:function(){return a.TextDocuments}});let o=zt();Object.defineProperty(exports,`NotebookDocuments`,{enumerable:!0,get:function(){return o.NotebookDocuments}}),n(tn(),exports);var s;(function(e){e.all={__brand:`features`,languages:i.InlineCompletionFeature}})(s||(exports.ProposedFeatures=s={}))})),rn=s(((exports,t)=>{t.exports=Q()})),an=s((exports=>{var t=exports&&exports.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),n=exports&&exports.__exportStar||function(e,n){for(var r in e)r!==`default`&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,e,r)};Object.defineProperty(exports,`__esModule`,{value:!0}),exports.createConnection=void 0;let r=nn();n(rn(),exports),n(nn(),exports);let i=!1,a={initialize:e=>{},get shutdownReceived(){return i},set shutdownReceived(e){i=e},exit:e=>{}};function o(e,t,n,i){let o,s,c,l;e!==void 0&&e.__brand===`features`&&(o=e,e=t,t=n,n=i),r.ConnectionStrategy.is(e)||r.ConnectionOptions.is(e)?l=e:(s=e,c=t,l=n);let u=e=>(0,r.createProtocolConnection)(s,c,e,l);return(0,r.createConnection)(u,a,o)}exports.createConnection=o})),on=s(((exports,t)=>{t.exports=an()})),sn=u(on()),cn=u(an());let $,ln=0,un=null;function dn(){return(un===null||un.byteLength===0)&&(un=new Uint8Array($.memory.buffer)),un}const fn=typeof TextEncoder<`u`?new TextEncoder(`utf-8`):{encode:()=>{throw Error(`TextEncoder not available`)}},pn=typeof fn.encodeInto==`function`?function(e,t){return fn.encodeInto(e,t)}:function(e,t){let n=fn.encode(e);return t.set(n),{read:e.length,written:n.length}};function mn(e,t,n){if(n===void 0){let n=fn.encode(e),r=t(n.length,1)>>>0;return dn().subarray(r,r+n.length).set(n),ln=n.length,r}let r=e.length,i=t(r,1)>>>0,a=dn(),o=0;for(;o<r;o++){let t=e.charCodeAt(o);if(t>127)break;a[i+o]=t}if(o!==r){o!==0&&(e=e.slice(o)),i=n(i,r,r=o+e.length*3,1)>>>0;let t=dn().subarray(i+o,i+r),a=pn(e,t);o+=a.written,i=n(i,r,o,1)>>>0}return ln=o,i}let hn=null;function gn(){return(hn===null||hn.buffer.detached===!0||hn.buffer.detached===void 0&&hn.buffer!==$.memory.buffer)&&(hn=new DataView($.memory.buffer)),hn}function _n(e){let t=$.__externref_table_alloc();return $.__wbindgen_export_4.set(t,e),t}function vn(e,t){try{return e.apply(this,t)}catch(e){let t=_n(e);$.__wbindgen_exn_store(t)}}const yn=typeof TextDecoder<`u`?new TextDecoder(`utf-8`,{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error(`TextDecoder not available`)}};typeof TextDecoder<`u`&&yn.decode();function bn(e,t){return e>>>=0,yn.decode(dn().subarray(e,e+t))}function xn(e){return e==null}const Sn=typeof FinalizationRegistry>`u`?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{$.__wbindgen_export_6.get(e.dtor)(e.a,e.b)});function Cn(e,t,n,r){let i={a:e,b:t,cnt:1,dtor:n},a=(...e)=>{i.cnt++;let t=i.a;i.a=0;try{return r(t,i.b,...e)}finally{--i.cnt===0?($.__wbindgen_export_6.get(i.dtor)(t,i.b),Sn.unregister(i)):i.a=t}};return a.original=i,Sn.register(a,i,i),a}function wn(e){let t=typeof e;if(t==`number`||t==`boolean`||e==null)return`${e}`;if(t==`string`)return`"${e}"`;if(t==`symbol`){let t=e.description;return t==null?`Symbol`:`Symbol(${t})`}if(t==`function`){let t=e.name;return typeof t==`string`&&t.length>0?`Function(${t})`:`Function`}if(Array.isArray(e)){let t=e.length,n=`[`;t>0&&(n+=wn(e[0]));for(let r=1;r<t;r++)n+=`, `+wn(e[r]);return n+=`]`,n}let n=/\[object ([^\]]+)\]/.exec(toString.call(e)),r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r==`Object`)try{return`Object(`+JSON.stringify(e)+`)`}catch{return`Object`}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:r}function Tn(e){let t=$.__wbindgen_export_4.get(e);return $.__externref_table_dealloc(e),t}function En(e,t){let n=t(e.length*1,1)>>>0;return dn().set(e,n/1),ln=e.length,n}function Dn(e,t,n){$.closure1242_externref_shim(e,t,n)}function On(e,t){$._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1cf4d56000053a1d(e,t)}function kn(e,t,n,r){$.closure3074_externref_shim(e,t,n,r)}const An=typeof FinalizationRegistry>`u`?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_individuallanguages_free(e>>>0,1));var jn=class e{static __wrap(t){t>>>=0;let n=Object.create(e.prototype);return n.__wbg_ptr=t,An.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,An.unregister(this),e}free(){let e=this.__destroy_into_raw();$.__wbg_individuallanguages_free(e,0)}get name(){let e,t;try{let n=$.individuallanguages_name(this.__wbg_ptr);return e=n[0],t=n[1],bn(n[0],n[1])}finally{$.__wbindgen_free(e,t,1)}}get code(){let e,t;try{let n=$.individuallanguages_code(this.__wbg_ptr);return e=n[0],t=n[1],bn(n[0],n[1])}finally{$.__wbindgen_free(e,t,1)}}};typeof FinalizationRegistry>`u`||new FinalizationRegistry(e=>$.__wbg_languagecode_free(e>>>0,1));const Mn=typeof FinalizationRegistry>`u`?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_proxycontext_free(e>>>0,1));var Nn=class e{static __wrap(t){t>>>=0;let n=Object.create(e.prototype);return n.__wbg_ptr=t,Mn.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,Mn.unregister(this),e}free(){let e=this.__destroy_into_raw();$.__wbg_proxycontext_free(e,0)}constructor(e){let t=$.proxycontext_new(e);return this.__wbg_ptr=t>>>0,Mn.register(this,this.__wbg_ptr,this),this}get context(){let e=$.proxycontext_context(this.__wbg_ptr);return e}untar(e,t){let n=En(e,$.__wbindgen_malloc),r=ln,i=$.proxycontext_untar(this.__wbg_ptr,n,r,t);if(i[1])throw Tn(i[0])}};const Pn=typeof FinalizationRegistry>`u`?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_tinymistlanguageserver_free(e>>>0,1));var Fn=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,Pn.unregister(this),e}free(){let e=this.__destroy_into_raw();$.__wbg_tinymistlanguageserver_free(e,0)}constructor(e){let t=$.tinymistlanguageserver_new(e);if(t[2])throw Tn(t[1]);return this.__wbg_ptr=t[0]>>>0,Pn.register(this,this.__wbg_ptr,this),this}on_event(e){$.tinymistlanguageserver_on_event(this.__wbg_ptr,e)}on_request(e,t){let n=mn(e,$.__wbindgen_malloc,$.__wbindgen_realloc),r=ln,i=$.tinymistlanguageserver_on_request(this.__wbg_ptr,n,r,t);return i}on_notification(e,t){let n=mn(e,$.__wbindgen_malloc,$.__wbindgen_realloc),r=ln;$.tinymistlanguageserver_on_notification(this.__wbg_ptr,n,r,t)}on_response(e){$.tinymistlanguageserver_on_response(this.__wbg_ptr,e)}static version(){let e,t;try{let n=$.tinymistlanguageserver_version();return e=n[0],t=n[1],bn(n[0],n[1])}finally{$.__wbindgen_free(e,t,1)}}};async function In(e,t){if(typeof Response==`function`&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming==`function`)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(e.headers.get(`Content-Type`)!=`application/wasm`)console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function Ln(){let e={};return e.wbg={},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,t){let n=String(t),r=mn(n,$.__wbindgen_malloc,$.__wbindgen_realloc),i=ln;gn().setInt32(e+4,i,!0),gn().setInt32(e+0,r,!0)},e.wbg.__wbg_buffer_609cc3eee51ed158=function(e){let t=e.buffer;return t},e.wbg.__wbg_call_672a4d21634d4a24=function(){return vn(function(e,t){let n=e.call(t);return n},arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return vn(function(e,t,n){let r=e.call(t,n);return r},arguments)},e.wbg.__wbg_call_b8adc8b1d0a0d8eb=function(){return vn(function(e,t,n,r,i){let a=e.call(t,n,r,i);return a},arguments)},e.wbg.__wbg_done_769e5ede4b31c67b=function(e){let t=e.done;return t},e.wbg.__wbg_entries_3265d4158b33e5dc=function(e){let t=Object.entries(e);return t},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let n,r;try{n=e,r=t,console.error(bn(e,t))}finally{$.__wbindgen_free(n,r,1)}},e.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(e){let t=e.getTimezoneOffset();return t},e.wbg.__wbg_get_67b2ba62fc30de12=function(){return vn(function(e,t){let n=Reflect.get(e,t);return n},arguments)},e.wbg.__wbg_get_b9b93047fe3cf45b=function(e,t){let n=e[t>>>0];return n},e.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(e,t){let n=e[t];return n},e.wbg.__wbg_individuallanguages_new=function(e){let t=jn.__wrap(e);return t},e.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(e){let t;try{t=e instanceof ArrayBuffer}catch{t=!1}let n=t;return n},e.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(e){let t;try{t=e instanceof Map}catch{t=!1}let n=t;return n},e.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(e){let t;try{t=e instanceof Uint8Array}catch{t=!1}let n=t;return n},e.wbg.__wbg_isArray_a1eab7e0d067391b=function(e){let t=Array.isArray(e);return t},e.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(e){let t=Number.isSafeInteger(e);return t},e.wbg.__wbg_iterator_9a24c88df860dc65=function(){let e=Symbol.iterator;return e},e.wbg.__wbg_length_a446193dc22c12f8=function(e){let t=e.length;return t},e.wbg.__wbg_length_e2d2a49132c1b256=function(e){let t=e.length;return t},e.wbg.__wbg_new_23a2665fac83c611=function(e,t){try{var n={a:e,b:t},r=(e,t)=>{let r=n.a;n.a=0;try{return kn(r,n.b,e,t)}finally{n.a=r}};let i=new Promise(r);return i}finally{n.a=n.b=0}},e.wbg.__wbg_new_31a97dac4f10fab7=function(e){let t=new Date(e);return t},e.wbg.__wbg_new_405e22f390576ce2=function(){let e={};return e},e.wbg.__wbg_new_5e0be73521bc8c17=function(){let e=new Map;return e},e.wbg.__wbg_new_78feb108b6472713=function(){let e=[];return e},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){let e=Error();return e},e.wbg.__wbg_new_a12002a7f91c75be=function(e){let t=new Uint8Array(e);return t},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(e,t){let n=Function(bn(e,t));return n},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(e,t,n){let r=new Uint8Array(e,t>>>0,n>>>0);return r},e.wbg.__wbg_next_25feadfc0913fea9=function(e){let t=e.next;return t},e.wbg.__wbg_next_6574e1a8a62d1055=function(){return vn(function(e){let t=e.next();return t},arguments)},e.wbg.__wbg_now_2c95c9de01293173=function(e){let t=e.now();return t},e.wbg.__wbg_now_807e54c39636c349=function(){let e=Date.now();return e},e.wbg.__wbg_now_e1163c67115ff874=function(e){let t=e.now();return t},e.wbg.__wbg_performance_7a3ffd0b17f663ad=function(e){let t=e.performance;return t},e.wbg.__wbg_performance_7fe0928f3ab059e5=function(e){let t=e.performance;return t},e.wbg.__wbg_proxycontext_new=function(e){let t=Nn.__wrap(e);return t},e.wbg.__wbg_push_737cfc8c1432c2c6=function(e,t){let n=e.push(t);return n},e.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(e){queueMicrotask(e)},e.wbg.__wbg_queueMicrotask_d3219def82552485=function(e){let t=e.queueMicrotask;return t},e.wbg.__wbg_resolve_4851785c9c5f573d=function(e){let t=Promise.resolve(e);return t},e.wbg.__wbg_setTimeout_42370cb3051b8c2c=function(){return vn(function(e,t,n){let r=e.setTimeout(t,n);return r},arguments)},e.wbg.__wbg_set_37837023f3d740e8=function(e,t,n){e[t>>>0]=n},e.wbg.__wbg_set_3f1d0b984ed272ed=function(e,t,n){e[t]=n},e.wbg.__wbg_set_65595bdd868b3009=function(e,t,n){e.set(t,n>>>0)},e.wbg.__wbg_set_8fc6bf8a5b1071d1=function(e,t,n){let r=e.set(t,n);return r},e.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return vn(function(e,t,n){let r=Reflect.set(e,t,n);return r},arguments)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){let n=t.stack,r=mn(n,$.__wbindgen_malloc,$.__wbindgen_realloc),i=ln;gn().setInt32(e+4,i,!0),gn().setInt32(e+0,r,!0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){let e=typeof global>`u`?null:global;return xn(e)?0:_n(e)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){let e=typeof globalThis>`u`?null:globalThis;return xn(e)?0:_n(e)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){let e=typeof self>`u`?null:self;return xn(e)?0:_n(e)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){let e=typeof window>`u`?null:window;return xn(e)?0:_n(e)},e.wbg.__wbg_then_44b73946d2fb3e7d=function(e,t){let n=e.then(t);return n},e.wbg.__wbg_value_cd1ffa7b1ab794f1=function(e){let t=e.value;return t},e.wbg.__wbindgen_as_number=function(e){let t=+e;return t},e.wbg.__wbindgen_bigint_from_i64=function(e){let t=e;return t},e.wbg.__wbindgen_bigint_from_u64=function(e){let t=BigInt.asUintN(64,e);return t},e.wbg.__wbindgen_bigint_get_as_i64=function(e,t){let n=t,r=typeof n==`bigint`?n:void 0;gn().setBigInt64(e+8,xn(r)?BigInt(0):r,!0),gn().setInt32(e+0,!xn(r),!0)},e.wbg.__wbindgen_boolean_get=function(e){let t=e,n=typeof t==`boolean`?t?1:0:2;return n},e.wbg.__wbindgen_cb_drop=function(e){let t=e.original;return t.cnt--==1?(t.a=0,!0):!1},e.wbg.__wbindgen_closure_wrapper2744=function(e,t,n){let r=Cn(e,t,1243,Dn);return r},e.wbg.__wbindgen_closure_wrapper2774=function(e,t,n){let r=Cn(e,t,1255,On);return r},e.wbg.__wbindgen_debug_string=function(e,t){let n=wn(t),r=mn(n,$.__wbindgen_malloc,$.__wbindgen_realloc),i=ln;gn().setInt32(e+4,i,!0),gn().setInt32(e+0,r,!0)},e.wbg.__wbindgen_error_new=function(e,t){let n=Error(bn(e,t));return n},e.wbg.__wbindgen_in=function(e,t){let n=e in t;return n},e.wbg.__wbindgen_init_externref_table=function(){let e=$.__wbindgen_export_4,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e.wbg.__wbindgen_is_bigint=function(e){let t=typeof e==`bigint`;return t},e.wbg.__wbindgen_is_function=function(e){let t=typeof e==`function`;return t},e.wbg.__wbindgen_is_object=function(e){let t=typeof val==`object`&&!!val;return t},e.wbg.__wbindgen_is_string=function(e){let t=typeof e==`string`;return t},e.wbg.__wbindgen_is_undefined=function(e){let t=e===void 0;return t},e.wbg.__wbindgen_jsval_eq=function(e,t){let n=e===t;return n},e.wbg.__wbindgen_jsval_loose_eq=function(e,t){let n=e==t;return n},e.wbg.__wbindgen_memory=function(){let e=$.memory;return e},e.wbg.__wbindgen_number_get=function(e,t){let n=t,r=typeof n==`number`?n:void 0;gn().setFloat64(e+8,xn(r)?0:r,!0),gn().setInt32(e+0,!xn(r),!0)},e.wbg.__wbindgen_number_new=function(e){let t=e;return t},e.wbg.__wbindgen_string_get=function(e,t){let n=t,r=typeof n==`string`?n:void 0;var i=xn(r)?0:mn(r,$.__wbindgen_malloc,$.__wbindgen_realloc),a=ln;gn().setInt32(e+4,a,!0),gn().setInt32(e+0,i,!0)},e.wbg.__wbindgen_string_new=function(e,t){let n=bn(e,t);return n},e.wbg.__wbindgen_throw=function(e,t){throw Error(bn(e,t))},e}function Rn(e,t){return $=e.exports,zn.__wbindgen_wasm_module=t,hn=null,un=null,$.__wbindgen_start(),$}async function zn(e){if($!==void 0)return $;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn(`using deprecated parameters for the initialization function; pass a single object instead`)),e===void 0&&(e=new URL(`/typst-playground/assets/tinymist_bg-B0k_vi2Q.wasm`,``+import.meta.url));let t=Ln();(typeof e==`string`||typeof Request==`function`&&e instanceof Request||typeof URL==`function`&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:r}=await In(await e,t);return Rn(n,r)}var Bn=s((exports=>{exports.byteLength=c,exports.toByteArray=u,exports.fromByteArray=p;for(var t=[],n=[],r=typeof Uint8Array<`u`?Uint8Array:Array,i=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,a=0,o=i.length;a<o;++a)t[a]=i[a],n[i.charCodeAt(a)]=a;n[45]=62,n[95]=63;function s(e){var t=e.length;if(t%4>0)throw Error(`Invalid string. Length must be a multiple of 4`);var n=e.indexOf(`=`);n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=s(e),n=t[0],r=t[1];return(n+r)*3/4-r}function l(e,t,n){return(t+n)*3/4-n}function u(e){var t,i=s(e),a=i[0],o=i[1],c=new r(l(e,a,o)),u=0,d=o>0?a-4:a,f;for(f=0;f<d;f+=4)t=n[e.charCodeAt(f)]<<18|n[e.charCodeAt(f+1)]<<12|n[e.charCodeAt(f+2)]<<6|n[e.charCodeAt(f+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=t&255;return o===2&&(t=n[e.charCodeAt(f)]<<2|n[e.charCodeAt(f+1)]>>4,c[u++]=t&255),o===1&&(t=n[e.charCodeAt(f)]<<10|n[e.charCodeAt(f+1)]<<4|n[e.charCodeAt(f+2)]>>2,c[u++]=t>>8&255,c[u++]=t&255),c}function d(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function f(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(d(r));return i.join(``)}function p(e){for(var n,r=e.length,i=r%3,a=[],o=16383,s=0,c=r-i;s<c;s+=o)a.push(f(e,s,s+o>c?c:s+o));return i===1?(n=e[r-1],a.push(t[n>>2]+t[n<<4&63]+`==`)):i===2&&(n=(e[r-2]<<8)+e[r-1],a.push(t[n>>10]+t[n>>4&63]+t[n<<2&63]+`=`)),a.join(``)}})),Vn=s((exports=>{exports.read=function(e,t,n,r,i){var a,o,s=i*8-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=a*256+e[t+d],d+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(a===0)a=1-l;else if(a===c)return o?NaN:(p?-1:1)*(1/0);else o+=2**r,a-=l;return(p?-1:1)*o*2**(a-r)},exports.write=function(e,t,n,r,i,a){var o,s,c,l=a*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?2**-24-2**-77:0,p=r?0:a-1,m=r?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=2**-o)<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*2**(1-d),t*c>=2&&(o++,c/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*c-1)*2**i,o+=d):(s=t*2**(d-1)*2**i,o=0));i>=8;e[n+p]=s&255,p+=m,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+p]=o&255,p+=m,o/=256,l-=8);e[n+p-m]|=h*128}})),Hn=s((exports=>{let t=Bn(),n=Vn(),r=typeof Symbol==`function`&&typeof Symbol.for==`function`?Symbol.for(`nodejs.util.inspect.custom`):null;exports.Buffer=s,exports.SlowBuffer=v,exports.INSPECT_MAX_BYTES=50;let i=2147483647;exports.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<`u`&&typeof console.error==`function`&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,`parent`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,`offset`,{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(e){if(e>i)throw RangeError(`The value "`+e+`" is invalid for option "size"`);let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if(typeof e==`number`){if(typeof t==`string`)throw TypeError(`The "string" argument must be of type string. Received type number`);return d(e)}return c(e,t,n)}s.poolSize=8192;function c(e,t,n){if(typeof e==`string`)return f(e,t);if(ArrayBuffer.isView(e))return m(e);if(e==null)throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<`u`&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return h(e,t,n);if(typeof e==`number`)throw TypeError(`The "value" argument must not be of type number. Received type number`);let r=e.valueOf&&e.valueOf();if(r!=null&&r!==e)return s.from(r,t,n);let i=g(e);if(i)return i;if(typeof Symbol<`u`&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==`function`)return s.from(e[Symbol.toPrimitive](`string`),t,n);throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type `+typeof e)}s.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(e){if(typeof e!=`number`)throw TypeError(`"size" argument must be of type number`);if(e<0)throw RangeError(`The value "`+e+`" is invalid for option "size"`)}function u(e,t,n){return l(e),e<=0||t===void 0?o(e):typeof n==`string`?o(e).fill(t,n):o(e).fill(t)}s.alloc=function(e,t,n){return u(e,t,n)};function d(e){return l(e),o(e<0?0:_(e)|0)}s.allocUnsafe=function(e){return d(e)},s.allocUnsafeSlow=function(e){return d(e)};function f(e,t){if((typeof t!=`string`||t===``)&&(t=`utf8`),!s.isEncoding(t))throw TypeError(`Unknown encoding: `+t);let n=y(e,t)|0,r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function p(e){let t=e.length<0?0:_(e.length)|0,n=o(t);for(let r=0;r<t;r+=1)n[r]=e[r]&255;return n}function m(e){if(J(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}function h(e,t,n){if(t<0||e.byteLength<t)throw RangeError(`"offset" is outside of buffer bounds`);if(e.byteLength<t+(n||0))throw RangeError(`"length" is outside of buffer bounds`);let r;return r=t===void 0&&n===void 0?new Uint8Array(e):n===void 0?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,s.prototype),r}function g(e){if(s.isBuffer(e)){let t=_(e.length)|0,n=o(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!=`number`||ue(e.length)?o(0):p(e);if(e.type===`Buffer`&&Array.isArray(e.data))return p(e.data)}function _(e){if(e>=i)throw RangeError(`Attempt to allocate Buffer larger than maximum size: 0x`+i.toString(16)+` bytes`);return e|0}function v(e){return+e!=e&&(e=0),s.alloc(+e)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(J(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError(`The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array`);if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case`hex`:case`utf8`:case`utf-8`:case`ascii`:case`latin1`:case`binary`:case`base64`:case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError(`"list" argument must be an Array of Buffers`);if(e.length===0)return s.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let t=e[n];if(J(t,Uint8Array))i+t.length>r.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else if(s.isBuffer(t))t.copy(r,i);else throw TypeError(`"list" argument must be an Array of Buffers`);i+=t.length}return r};function y(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if(typeof e!=`string`)throw TypeError(`The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type `+typeof e);let n=e.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let i=!1;for(;;)switch(t){case`ascii`:case`latin1`:case`binary`:return n;case`utf8`:case`utf-8`:return oe(e).length;case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return n*2;case`hex`:return n>>>1;case`base64`:return q(e).length;default:if(i)return r?-1:oe(e).length;t=(``+t).toLowerCase(),i=!0}}s.byteLength=y;function b(e,t,n){let r=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return``;for(e||=`utf8`;;)switch(e){case`hex`:return N(this,t,n);case`utf8`:case`utf-8`:return O(this,t,n);case`ascii`:return j(this,t,n);case`latin1`:case`binary`:return M(this,t,n);case`base64`:return D(this,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return P(this,t,n);default:if(r)throw TypeError(`Unknown encoding: `+e);e=(e+``).toLowerCase(),r=!0}}s.prototype._isBuffer=!0;function x(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError(`Buffer size must be a multiple of 16-bits`);for(let t=0;t<e;t+=2)x(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError(`Buffer size must be a multiple of 32-bits`);for(let t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError(`Buffer size must be a multiple of 64-bits`);for(let t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return e===0?``:arguments.length===0?O(this,0,e):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError(`Argument must be a Buffer`);return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let t=``,n=exports.INSPECT_MAX_BYTES;return t=this.toString(`hex`,0,n).replace(/(.{2})/g,`$1 `).trim(),this.length>n&&(t+=` ... `),`<Buffer `+t+`>`},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,i){if(J(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError(`The "target" argument must be one of type Buffer or Uint8Array. Received type `+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),i===void 0&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError(`out of range index`);if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;let a=i-r,o=n-t,c=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<c;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:o<a?1:0};function ee(e,t,n,r,i){if(e.length===0)return-1;if(typeof n==`string`?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,ue(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof t==`string`&&(t=s.from(t,r)),s.isBuffer(t))return t.length===0?-1:S(e,t,n,r,i);if(typeof t==`number`)return t&=255,typeof Uint8Array.prototype.indexOf==`function`?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw TypeError(`val must be string, number or Buffer`)}function S(e,t,n,r,i){let a=1,o=e.length,s=t.length;if(r!==void 0&&(r=String(r).toLowerCase(),r===`ucs2`||r===`ucs-2`||r===`utf16le`||r===`utf-16le`)){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,n/=2}function c(e,t){return a===1?e[t]:e.readUInt16BE(t*a)}let l;if(i){let r=-1;for(l=n;l<o;l++)if(c(e,l)===c(t,r===-1?0:l-r)){if(r===-1&&(r=l),l-r+1===s)return r*a}else r!==-1&&(l-=l-r),r=-1}else for(n+s>o&&(n=o-s),l=n;l>=0;l--){let n=!0;for(let r=0;r<s;r++)if(c(e,l+r)!==c(t,r)){n=!1;break}if(n)return l}return-1}s.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},s.prototype.indexOf=function(e,t,n){return ee(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return ee(this,e,t,n,!1)};function C(e,t,n,r){n=Number(n)||0;let i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;let a=t.length;r>a/2&&(r=a/2);let o;for(o=0;o<r;++o){let r=parseInt(t.substr(o*2,2),16);if(ue(r))return o;e[n+o]=r}return o}function w(e,t,n,r){return le(oe(t,e.length-n),e,n,r)}function te(e,t,n,r){return le(se(t),e,n,r)}function T(e,t,n,r){return le(q(t),e,n,r)}function E(e,t,n,r){return le(ce(t,e.length-n),e,n,r)}s.prototype.write=function(e,t,n,r){if(t===void 0)r=`utf8`,n=this.length,t=0;else if(n===void 0&&typeof t==`string`)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,r===void 0&&(r=`utf8`)):(r=n,n=void 0);else throw Error(`Buffer.write(string, encoding, offset[, length]) is no longer supported`);let i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError(`Attempt to write outside buffer bounds`);r||=`utf8`;let a=!1;for(;;)switch(r){case`hex`:return C(this,e,t,n);case`utf8`:case`utf-8`:return w(this,e,t,n);case`ascii`:case`latin1`:case`binary`:return te(this,e,t,n);case`base64`:return T(this,e,t,n);case`ucs2`:case`ucs-2`:case`utf16le`:case`utf-16le`:return E(this,e,t,n);default:if(a)throw TypeError(`Unknown encoding: `+r);r=(``+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:`Buffer`,data:Array.prototype.slice.call(this._arr||this,0)}};function D(e,n,r){return n===0&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function O(e,t,n){n=Math.min(e.length,n);let r=[],i=t;for(;i<n;){let t=e[i],a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=n){let n,r,s,c;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[i+1],(n&192)==128&&(c=(t&31)<<6|n&63,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],(n&192)==128&&(r&192)==128&&(c=(t&15)<<12|(n&63)<<6|r&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],(n&192)==128&&(r&192)==128&&(s&192)==128&&(c=(t&15)<<18|(n&63)<<12|(r&63)<<6|s&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),i+=o}return A(r)}let k=4096;function A(e){let t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let n=``,r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}function j(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]&127);return r}function M(e,t,n){let r=``;n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i=``;for(let r=t;r<n;++r)i+=de[e[r]];return i}function P(e,t,n){let r=e.slice(t,n),i=``;for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+r[e+1]*256);return i}s.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r};function F(e,t,n){if(e%1!=0||e<0)throw RangeError(`offset is not uint`);if(e+t>n)throw RangeError(`Trying to access beyond buffer length`)}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=Y(function(e){e>>>=0,U(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&W(e,this.length-8);let r=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),s.prototype.readBigUInt64BE=Y(function(e){e>>>=0,U(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&W(e,this.length-8);let r=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=2**(8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||F(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=2**(8*t)),a},s.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=Y(function(e){e>>>=0,U(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&W(e,this.length-8);let r=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=Y(function(e){e>>>=0,U(e,`offset`);let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&W(e,this.length-8);let r=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),n.read(this,e,!1,52,8)};function I(e,t,n,r,i,a){if(!s.isBuffer(e))throw TypeError(`"buffer" argument must be a Buffer instance`);if(t>i||t<a)throw RangeError(`"value" argument is out of bounds`);if(n+r>e.length)throw RangeError(`Index out of range`)}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;I(this,e,t,n,r,0)}let i=1,a=0;for(this[t]=e&255;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=2**(8*n)-1;I(this,e,t,n,r,0)}let i=n-1,a=1;for(this[t+i]=e&255;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function L(e,t,n,r,i){H(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function R(e,t,n,r,i){H(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}s.prototype.writeBigUInt64LE=Y(function(e,t=0){return L(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeBigUInt64BE=Y(function(e,t=0){return R(this,e,t,BigInt(0),BigInt(`0xffffffffffffffff`))}),s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);I(this,e,t,n,r-1,-r)}let i=0,a=1,o=0;for(this[t]=e&255;++i<n&&(a*=256);)e<0&&o===0&&this[t+i-1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=2**(8*n-1);I(this,e,t,n,r-1,-r)}let i=n-1,a=1,o=0;for(this[t+i]=e&255;--i>=0&&(a*=256);)e<0&&o===0&&this[t+i+1]!==0&&(o=1),this[t+i]=(e/a>>0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=Y(function(e,t=0){return L(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))}),s.prototype.writeBigInt64BE=Y(function(e,t=0){return R(this,e,t,-BigInt(`0x8000000000000000`),BigInt(`0x7fffffffffffffff`))});function z(e,t,n,r,i,a){if(n+r>e.length||n<0)throw RangeError(`Index out of range`)}function B(e,t,r,i,a){return t=+t,r>>>=0,a||z(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}s.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)};function ne(e,t,r,i,a){return t=+t,r>>>=0,a||z(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}s.prototype.writeDoubleLE=function(e,t,n){return ne(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return ne(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError(`argument should be a Buffer`);if(n||=0,!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||=0,r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw RangeError(`targetStart out of bounds`);if(n<0||n>=this.length)throw RangeError(`Index out of range`);if(r<0)throw RangeError(`sourceEnd out of bounds`);r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let i=r-n;return this===e&&typeof Uint8Array.prototype.copyWithin==`function`?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},s.prototype.fill=function(e,t,n,r){if(typeof e==`string`){if(typeof t==`string`?(r=t,t=0,n=this.length):typeof n==`string`&&(r=n,n=this.length),r!==void 0&&typeof r!=`string`)throw TypeError(`encoding must be a string`);if(typeof r==`string`&&!s.isEncoding(r))throw TypeError(`Unknown encoding: `+r);if(e.length===1){let t=e.charCodeAt(0);(r===`utf8`&&t<128||r===`latin1`)&&(e=t)}}else typeof e==`number`?e&=255:typeof e==`boolean`&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError(`Out of range index`);if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||=0;let i;if(typeof e==`number`)for(i=t;i<n;++i)this[i]=e;else{let a=s.isBuffer(e)?e:s.from(e,r),o=a.length;if(o===0)throw TypeError(`The value "`+e+`" is invalid for argument "value"`);for(i=0;i<n-t;++i)this[i+t]=a[i%o]}return this};let V={};function re(e,t,n){V[e]=class extends n{constructor(){super(),Object.defineProperty(this,`message`,{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,`code`,{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}re(`ERR_BUFFER_OUT_OF_BOUNDS`,function(e){return e?`${e} is outside of buffer bounds`:`Attempt to access memory outside buffer bounds`},RangeError),re(`ERR_INVALID_ARG_TYPE`,function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),re(`ERR_OUT_OF_RANGE`,function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=ie(String(n)):typeof n==`bigint`&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=ie(i)),i+=`n`),r+=` It must be ${t}. Received ${i}`,r},RangeError);function ie(e){let t=``,n=e.length,r=e[0]===`-`?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function ae(e,t,n){U(t,`offset`),(e[t]===void 0||e[t+n]===void 0)&&W(t,e.length-(n+1))}function H(e,t,n,r,i,a){if(e>n||e<t){let r=typeof t==`bigint`?`n`:``,i;throw i=a>3?t===0||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${(a+1)*8}${r}`:`>= -(2${r} ** ${(a+1)*8-1}${r}) and < 2 ** ${(a+1)*8-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new V.ERR_OUT_OF_RANGE(`value`,i,e)}ae(r,i,a)}function U(e,t){if(typeof e!=`number`)throw new V.ERR_INVALID_ARG_TYPE(t,`number`,e)}function W(e,t,n){throw Math.floor(e)===e?t<0?new V.ERR_BUFFER_OUT_OF_BOUNDS:new V.ERR_OUT_OF_RANGE(n||`offset`,`>= ${n?1:0} and <= ${t}`,e):(U(e,n),new V.ERR_OUT_OF_RANGE(n||`offset`,`an integer`,e))}let G=/[^+/0-9A-Za-z-_]/g;function K(e){if(e=e.split(`=`)[0],e=e.trim().replace(G,``),e.length<2)return``;for(;e.length%4!=0;)e+=`=`;return e}function oe(e,t){t||=1/0;let n,r=e.length,i=null,a=[];for(let o=0;o<r;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if(--t<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw Error(`Invalid code point`)}return a}function se(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function ce(e,t){let n,r,i,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function q(e){return t.toByteArray(K(e))}function le(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function J(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function ue(e){return e!==e}let de=(function(){let e=`0123456789abcdef`,t=Array(256);for(let n=0;n<16;++n){let r=n*16;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t})();function Y(e){return typeof BigInt>`u`?fe:e}function fe(){throw Error(`BigInt not supported`)}}));const Un=/^[A-Za-z]:\//;function Wn(e=``){return e&&e.replace(/\\/g,`/`).replace(Un,e=>e.toUpperCase())}const Gn=/^[/\\]{2}/,Kn=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,qn=/^[A-Za-z]:$/,Jn=function(e){if(e.length===0)return`.`;e=Wn(e);let t=e.match(Gn),n=Xn(e),r=e[e.length-1]===`/`;return e=Yn(e,!n),e.length===0?n?`/`:r?`./`:`.`:(r&&(e+=`/`),qn.test(e)&&(e+=`/`),t?n?`//${e}`:`//./${e}`:n&&!Xn(e)?`/${e}`:e)};function Yn(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}const Xn=function(e){return Kn.test(e)};var Zn=u(Hn()),Qn=`/typst-playground/assets/Buenard-Bold-BBXRAzkK.ttf`,$n=`/typst-playground/assets/Buenard-Regular-CkUW1x8A.ttf`,er=`/typst-playground/assets/NotoSansCJK-Bold-B9PGWh3n.ttc`,tr=`/typst-playground/assets/NotoSansCJK-Regular-DojkAavQ.ttc`,nr=`/typst-playground/assets/NotoSerifCJK-Bold-XPdTTXFS.ttc`,rr=`/typst-playground/assets/NotoSerifCJK-Regular-ChKc_5PJ.ttc`,ir=[{name:`Buenard-Bold.ttf`,url:Qn,async getData(){let e=await fetch(Qn);return new Uint8Array(await e.arrayBuffer())}},{name:`Buenard-Regular.ttf`,url:$n,async getData(){let e=await fetch($n);return new Uint8Array(await e.arrayBuffer())}},{name:`NotoSansCJK-Bold.ttc`,url:er,async getData(){let e=await fetch(er);return new Uint8Array(await e.arrayBuffer())}},{name:`NotoSansCJK-Regular.ttc`,url:tr,async getData(){let e=await fetch(tr);return new Uint8Array(await e.arrayBuffer())}},{name:`NotoSerifCJK-Bold.ttc`,url:nr,async getData(){let e=await fetch(nr);return new Uint8Array(await e.arrayBuffer())}},{name:`NotoSerifCJK-Regular.ttc`,url:rr,async getData(){let e=await fetch(rr);return new Uint8Array(await e.arrayBuffer())}}],ar=class{constructor(){this.files=new Map}normalizePath(e){let t=Jn(e);return t.startsWith(`/`)||(t=`/`+t),t}set(e,t,n){let r=this.normalizePath(e);this.files.set(r,{content:t,mtime:n,size:t.length})}get(e){let t=this.normalizePath(e);return this.files.get(t)}has(e){let t=this.normalizePath(e);return this.files.has(t)}delete(e){let t=this.normalizePath(e);return this.files.delete(t)}keys(){return Array.from(this.files.keys())}clear(){this.files.clear()}size(){return this.files.size}},or=class{constructor(e){let t=new sn.BrowserMessageReader(self),n=new sn.BrowserMessageWriter(self);this.connection=(0,sn.createConnection)(t,n),t.listen(e=>{console.log(`Editor -> LSP:`,e)}),this.bridge=null,this.events=[],this.vfs=new ar,this.packageRegistry=null,this.proxyContext=null,this.resolvePackage=null,this.fonts=e,this.packageResolveCache=new Map}async start(){await zn(),console.log(`tinymist ${Fn.version()} wasm is loaded!`),this.initializePackageRegistry(),this.initializeBridge(),this.setupConnectionHandlers(),this.connection.sendNotification(`serverWorkerReady`),this.connection.listen()}initializePackageRegistry(){this.resolvePackage=e=>{let t=`${e.namespace}/${e.name}-${e.version}`,n=`/packages/${e.namespace}/${e.name}/${e.version}`;if(this.vfs.has(`${n}/.resolved`))return console.log(`Package ${t} already resolved, returning cached result`),n;if(this.packageResolveCache.has(t))throw console.log(`Package ${t} is being resolved, waiting...`),Error(`Package ${t} is being downloaded, please retry`);let r=`https://packages.typst.org/${e.namespace}/${e.name}-${e.version}.tar.gz`;console.log(`Downloading: ${r}`);let i=this.downloadAndExtractPackage(r,n);this.packageResolveCache.set(t,i),i.finally(()=>{this.packageResolveCache.delete(t)});try{let e=new XMLHttpRequest;if(e.open(`GET`,r,!1),e.responseType=`arraybuffer`,e.send(),e.status!==200)throw this.packageResolveCache.delete(t),Error(`Download failed: ${e.status} ${e.statusText}`);let i=new Uint8Array(e.response);console.log(`Downloaded: ${i.length} bytes`);let a=(e,t,r)=>{let i=`${n}/${e}`;this.vfs.set(i,t,r)};return this.proxyContext.untar(i,a),this.vfs.set(`${n}/.resolved`,new Uint8Array,Date.now()),console.log(`Package ${t} resolved successfully`),n}catch(e){throw this.packageResolveCache.delete(t),e}},this.proxyContext=new Nn({})}async downloadAndExtractPackage(e,t){return new Promise((n,r)=>{let i=new XMLHttpRequest;i.open(`GET`,e,!0),i.responseType=`arraybuffer`,i.onload=()=>{if(i.status!==200){r(Error(`Download failed: ${i.status} ${i.statusText}`));return}try{let e=new Uint8Array(i.response);console.log(`Downloaded: ${e.length} bytes`);let r=(e,n,r)=>{let i=`${t}/${e}`;this.vfs.set(i,n,r)};this.proxyContext.untar(e,r),this.vfs.set(`${t}/.resolved`,new Uint8Array,Date.now()),n(t)}catch(e){r(e)}},i.onerror=()=>{r(Error(`Network error`))},i.send()})}initializeBridge(){this.bridge=new Fn({sendEvent:e=>{this.events.push(e)},sendRequest:({id:e,method:t,params:n})=>{this.connection.sendRequest(t,n).then(t=>this.bridge?.on_response({id:e,result:t})).catch(t=>this.bridge?.on_response({id:e,error:{code:-32603,message:t.toString()}}))},fsContent:e=>this.getFsContent(e),sendNotification:({method:e,params:t})=>{this.connection.sendNotification(e,t)},resolveFn:this.resolvePackage,extraFonts:this.fonts})}getFsContent(e){console.log(`Reading file`,e);try{if(console.log(`file exists, returning`,e),this.vfs.has(e)){let t=this.vfs.get(e).content,n=Zn.Buffer.from(t).toString(`base64`);return{content:n,exists:!0}}}catch(e){return console.error(`err when reading file: `,e),{content:``}}return{content:``,exists:!1}}setupConnectionHandlers(){let e=e=>{for(let e of this.events.splice(0))this.bridge?.on_event(e);return e};this.connection.onInitialize(t=>e(this.bridge?.on_request(cn.InitializeRequest.method,{...t,initializationOptions:{formatterMode:`typstyle`}}))),this.connection.onRequest((t,n)=>e(this.bridge?.on_request(t,n))),this.connection.onNotification((t,n)=>{if(t===`workspace/didChangeConfiguration`){console.log(`skipping`);return}return e(this.bridge?.on_notification(t,n))})}};const sr=new or(await Promise.all(ir.map(e=>e.getData())));sr.start();