import is from"virtual:fonts";function os(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var i=function r(){var n=!1;try{n=this instanceof r}catch{}return n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),i}var Tt={},Pt={},ct={},kt={},Ct={},Un={},rr={},x={},Ee={},_i;function On(){if(_i)return Ee;_i=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.stringArray=Ee.array=Ee.func=Ee.error=Ee.number=Ee.string=Ee.boolean=void 0;function e(c){return c===!0||c===!1}Ee.boolean=e;function t(c){return typeof c=="string"||c instanceof String}Ee.string=t;function i(c){return typeof c=="number"||c instanceof Number}Ee.number=i;function r(c){return c instanceof Error}Ee.error=r;function n(c){return typeof c=="function"}Ee.func=n;function a(c){return Array.isArray(c)}Ee.array=a;function u(c){return a(c)&&c.every(l=>t(l))}return Ee.stringArray=u,Ee}var bi;function zo(){if(bi)return x;bi=1,Object.defineProperty(x,"__esModule",{value:!0}),x.Message=x.NotificationType9=x.NotificationType8=x.NotificationType7=x.NotificationType6=x.NotificationType5=x.NotificationType4=x.NotificationType3=x.NotificationType2=x.NotificationType1=x.NotificationType0=x.NotificationType=x.RequestType9=x.RequestType8=x.RequestType7=x.RequestType6=x.RequestType5=x.RequestType4=x.RequestType3=x.RequestType2=x.RequestType1=x.RequestType=x.RequestType0=x.AbstractMessageSignature=x.ParameterStructures=x.ResponseError=x.ErrorCodes=void 0;const e=On();var t;(function(H){H.ParseError=-32700,H.InvalidRequest=-32600,H.MethodNotFound=-32601,H.InvalidParams=-32602,H.InternalError=-32603,H.jsonrpcReservedErrorRangeStart=-32099,H.serverErrorStart=-32099,H.MessageWriteError=-32099,H.MessageReadError=-32098,H.PendingResponseRejected=-32097,H.ConnectionInactive=-32096,H.ServerNotInitialized=-32002,H.UnknownErrorCode=-32001,H.jsonrpcReservedErrorRangeEnd=-32e3,H.serverErrorEnd=-32e3})(t||(x.ErrorCodes=t={}));class i extends Error{constructor(D,A,U){super(A),this.code=e.number(D)?D:t.UnknownErrorCode,this.data=U,Object.setPrototypeOf(this,i.prototype)}toJson(){const D={code:this.code,message:this.message};return this.data!==void 0&&(D.data=this.data),D}}x.ResponseError=i;class r{constructor(D){this.kind=D}static is(D){return D===r.auto||D===r.byName||D===r.byPosition}toString(){return this.kind}}x.ParameterStructures=r,r.auto=new r("auto"),r.byPosition=new r("byPosition"),r.byName=new r("byName");class n{constructor(D,A){this.method=D,this.numberOfParams=A}get parameterStructures(){return r.auto}}x.AbstractMessageSignature=n;class a extends n{constructor(D){super(D,0)}}x.RequestType0=a;class u extends n{constructor(D,A=r.auto){super(D,1),this._parameterStructures=A}get parameterStructures(){return this._parameterStructures}}x.RequestType=u;class c extends n{constructor(D,A=r.auto){super(D,1),this._parameterStructures=A}get parameterStructures(){return this._parameterStructures}}x.RequestType1=c;class l extends n{constructor(D){super(D,2)}}x.RequestType2=l;class g extends n{constructor(D){super(D,3)}}x.RequestType3=g;class m extends n{constructor(D){super(D,4)}}x.RequestType4=m;class b extends n{constructor(D){super(D,5)}}x.RequestType5=b;class T extends n{constructor(D){super(D,6)}}x.RequestType6=T;class y extends n{constructor(D){super(D,7)}}x.RequestType7=y;class S extends n{constructor(D){super(D,8)}}x.RequestType8=S;class F extends n{constructor(D){super(D,9)}}x.RequestType9=F;class B extends n{constructor(D,A=r.auto){super(D,1),this._parameterStructures=A}get parameterStructures(){return this._parameterStructures}}x.NotificationType=B;class N extends n{constructor(D){super(D,0)}}x.NotificationType0=N;class E extends n{constructor(D,A=r.auto){super(D,1),this._parameterStructures=A}get parameterStructures(){return this._parameterStructures}}x.NotificationType1=E;class O extends n{constructor(D){super(D,2)}}x.NotificationType2=O;class Q extends n{constructor(D){super(D,3)}}x.NotificationType3=Q;class Y extends n{constructor(D){super(D,4)}}x.NotificationType4=Y;class V extends n{constructor(D){super(D,5)}}x.NotificationType5=V;class X extends n{constructor(D){super(D,6)}}x.NotificationType6=X;class te extends n{constructor(D){super(D,7)}}x.NotificationType7=te;class de extends n{constructor(D){super(D,8)}}x.NotificationType8=de;class Fe extends n{constructor(D){super(D,9)}}x.NotificationType9=Fe;var fe;return function(H){function D(I){const J=I;return J&&e.string(J.method)&&(e.string(J.id)||e.number(J.id))}H.isRequest=D;function A(I){const J=I;return J&&e.string(J.method)&&I.id===void 0}H.isNotification=A;function U(I){const J=I;return J&&(J.result!==void 0||!!J.error)&&(e.string(J.id)||e.number(J.id)||J.id===null)}H.isResponse=U}(fe||(x.Message=fe={})),x}var ut={},wi;function Vo(){if(wi)return ut;wi=1;var e;Object.defineProperty(ut,"__esModule",{value:!0}),ut.LRUCache=ut.LinkedMap=ut.Touch=void 0;var t;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(t||(ut.Touch=t={}));class i{constructor(){this[e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(a){return this._map.has(a)}get(a,u=t.None){const c=this._map.get(a);if(c)return u!==t.None&&this.touch(c,u),c.value}set(a,u,c=t.None){let l=this._map.get(a);if(l)l.value=u,c!==t.None&&this.touch(l,c);else{switch(l={key:a,value:u,next:void 0,previous:void 0},c){case t.None:this.addItemLast(l);break;case t.First:this.addItemFirst(l);break;case t.Last:this.addItemLast(l);break;default:this.addItemLast(l);break}this._map.set(a,l),this._size++}return this}delete(a){return!!this.remove(a)}remove(a){const u=this._map.get(a);if(u)return this._map.delete(a),this.removeItem(u),this._size--,u.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const a=this._head;return this._map.delete(a.key),this.removeItem(a),this._size--,a.value}forEach(a,u){const c=this._state;let l=this._head;for(;l;){if(u?a.bind(u)(l.value,l.key,this):a(l.value,l.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");l=l.next}}keys(){const a=this._state;let u=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==a)throw new Error("LinkedMap got modified during iteration.");if(u){const l={value:u.key,done:!1};return u=u.next,l}else return{value:void 0,done:!0}}};return c}values(){const a=this._state;let u=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==a)throw new Error("LinkedMap got modified during iteration.");if(u){const l={value:u.value,done:!1};return u=u.next,l}else return{value:void 0,done:!0}}};return c}entries(){const a=this._state;let u=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==a)throw new Error("LinkedMap got modified during iteration.");if(u){const l={value:[u.key,u.value],done:!1};return u=u.next,l}else return{value:void 0,done:!0}}};return c}[(e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(a){if(a>=this.size)return;if(a===0){this.clear();return}let u=this._head,c=this.size;for(;u&&c>a;)this._map.delete(u.key),u=u.next,c--;this._head=u,this._size=c,u&&(u.previous=void 0),this._state++}addItemFirst(a){if(!this._head&&!this._tail)this._tail=a;else if(this._head)a.next=this._head,this._head.previous=a;else throw new Error("Invalid list");this._head=a,this._state++}addItemLast(a){if(!this._head&&!this._tail)this._head=a;else if(this._tail)a.previous=this._tail,this._tail.next=a;else throw new Error("Invalid list");this._tail=a,this._state++}removeItem(a){if(a===this._head&&a===this._tail)this._head=void 0,this._tail=void 0;else if(a===this._head){if(!a.next)throw new Error("Invalid list");a.next.previous=void 0,this._head=a.next}else if(a===this._tail){if(!a.previous)throw new Error("Invalid list");a.previous.next=void 0,this._tail=a.previous}else{const u=a.next,c=a.previous;if(!u||!c)throw new Error("Invalid list");u.previous=c,c.next=u}a.next=void 0,a.previous=void 0,this._state++}touch(a,u){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(u!==t.First&&u!==t.Last)){if(u===t.First){if(a===this._head)return;const c=a.next,l=a.previous;a===this._tail?(l.next=void 0,this._tail=l):(c.previous=l,l.next=c),a.previous=void 0,a.next=this._head,this._head.previous=a,this._head=a,this._state++}else if(u===t.Last){if(a===this._tail)return;const c=a.next,l=a.previous;a===this._head?(c.previous=void 0,this._head=c):(c.previous=l,l.next=c),a.next=void 0,a.previous=this._tail,this._tail.next=a,this._tail=a,this._state++}}}toJSON(){const a=[];return this.forEach((u,c)=>{a.push([c,u])}),a}fromJSON(a){this.clear();for(const[u,c]of a)this.set(u,c)}}ut.LinkedMap=i;class r extends i{constructor(a,u=1){super(),this._limit=a,this._ratio=Math.min(Math.max(0,u),1)}get limit(){return this._limit}set limit(a){this._limit=a,this.checkTrim()}get ratio(){return this._ratio}set ratio(a){this._ratio=Math.min(Math.max(0,a),1),this.checkTrim()}get(a,u=t.AsNew){return super.get(a,u)}peek(a){return super.get(a,t.None)}set(a,u){return super.set(a,u,t.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}return ut.LRUCache=r,ut}var Yt={},vi;function ss(){if(vi)return Yt;vi=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.Disposable=void 0;var e;return function(t){function i(r){return{dispose:r}}t.create=i}(e||(Yt.Disposable=e={})),Yt}var St={},zn={},Ri;function Wt(){if(Ri)return zn;Ri=1,Object.defineProperty(zn,"__esModule",{value:!0});let e;function t(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}return function(i){function r(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");e=n}i.install=r}(t||(t={})),zn.default=t,zn}var Di;function In(){if(Di)return St;Di=1,Object.defineProperty(St,"__esModule",{value:!0}),St.Emitter=St.Event=void 0;const e=Wt();var t;(function(n){const a={dispose(){}};n.None=function(){return a}})(t||(St.Event=t={}));class i{add(a,u=null,c){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(a),this._contexts.push(u),Array.isArray(c)&&c.push({dispose:()=>this.remove(a,u)})}remove(a,u=null){if(!this._callbacks)return;let c=!1;for(let l=0,g=this._callbacks.length;l<g;l++)if(this._callbacks[l]===a)if(this._contexts[l]===u){this._callbacks.splice(l,1),this._contexts.splice(l,1);return}else c=!0;if(c)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...a){if(!this._callbacks)return[];const u=[],c=this._callbacks.slice(0),l=this._contexts.slice(0);for(let g=0,m=c.length;g<m;g++)try{u.push(c[g].apply(l[g],a))}catch(b){(0,e.default)().console.error(b)}return u}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(a){this._options=a}get event(){return this._event||(this._event=(a,u,c)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(a,u);const l={dispose:()=>{this._callbacks&&(this._callbacks.remove(a,u),l.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(c)&&c.push(l),l}),this._event}fire(a){this._callbacks&&this._callbacks.invoke.call(this._callbacks,a)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}return St.Emitter=r,r._noop=function(){},St}var qt={},Ti;function gi(){if(Ti)return qt;Ti=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.CancellationTokenSource=qt.CancellationToken=void 0;const e=Wt(),t=On(),i=In();var r;(function(c){c.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None});function l(g){const m=g;return m&&(m===c.None||m===c.Cancelled||t.boolean(m.isCancellationRequested)&&!!m.onCancellationRequested)}c.is=l})(r||(qt.CancellationToken=r={}));const n=Object.freeze(function(c,l){const g=(0,e.default)().timer.setTimeout(c.bind(l),0);return{dispose(){g.dispose()}}});class a{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?n:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class u{get token(){return this._token||(this._token=new a),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof a&&this._token.dispose():this._token=r.None}}return qt.CancellationTokenSource=u,qt}var Et={},Pi;function as(){if(Pi)return Et;Pi=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.SharedArrayReceiverStrategy=Et.SharedArraySenderStrategy=void 0;const e=gi();var t;(function(u){u.Continue=0,u.Cancelled=1})(t||(t={}));class i{constructor(){this.buffers=new Map}enableCancellation(c){if(c.id===null)return;const l=new SharedArrayBuffer(4),g=new Int32Array(l,0,1);g[0]=t.Continue,this.buffers.set(c.id,l),c.$cancellationData=l}async sendCancellation(c,l){const g=this.buffers.get(l);if(g===void 0)return;const m=new Int32Array(g,0,1);Atomics.store(m,0,t.Cancelled)}cleanup(c){this.buffers.delete(c)}dispose(){this.buffers.clear()}}Et.SharedArraySenderStrategy=i;class r{constructor(c){this.data=new Int32Array(c,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===t.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class n{constructor(c){this.token=new r(c)}cancel(){}dispose(){}}class a{constructor(){this.kind="request"}createCancellationTokenSource(c){const l=c.$cancellationData;return l===void 0?new e.CancellationTokenSource:new n(l)}}return Et.SharedArrayReceiverStrategy=a,Et}var lt={},Qt={},ki;function Jo(){if(ki)return Qt;ki=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.Semaphore=void 0;const e=Wt();class t{constructor(r=1){if(r<=0)throw new Error("Capacity must be greater than 0");this._capacity=r,this._active=0,this._waiting=[]}lock(r){return new Promise((n,a)=>{this._waiting.push({thunk:r,resolve:n,reject:a}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,e.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const r=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=r.thunk();n instanceof Promise?n.then(a=>{this._active--,r.resolve(a),this.runNext()},a=>{this._active--,r.reject(a),this.runNext()}):(this._active--,r.resolve(n),this.runNext())}catch(n){this._active--,r.reject(n),this.runNext()}}}return Qt.Semaphore=t,Qt}var Ci;function cs(){if(Ci)return lt;Ci=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.ReadableStreamMessageReader=lt.AbstractMessageReader=lt.MessageReader=void 0;const e=Wt(),t=On(),i=In(),r=Jo();var n;(function(l){function g(m){let b=m;return b&&t.func(b.listen)&&t.func(b.dispose)&&t.func(b.onError)&&t.func(b.onClose)&&t.func(b.onPartialMessage)}l.is=g})(n||(lt.MessageReader=n={}));class a{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(g){this.errorEmitter.fire(this.asError(g))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(g){this.partialMessageEmitter.fire(g)}asError(g){return g instanceof Error?g:new Error(`Reader received error. Reason: ${t.string(g.message)?g.message:"unknown"}`)}}lt.AbstractMessageReader=a;var u;(function(l){function g(m){let b,T;const y=new Map;let S;const F=new Map;if(m===void 0||typeof m=="string")b=m??"utf-8";else{if(b=m.charset??"utf-8",m.contentDecoder!==void 0&&(T=m.contentDecoder,y.set(T.name,T)),m.contentDecoders!==void 0)for(const B of m.contentDecoders)y.set(B.name,B);if(m.contentTypeDecoder!==void 0&&(S=m.contentTypeDecoder,F.set(S.name,S)),m.contentTypeDecoders!==void 0)for(const B of m.contentTypeDecoders)F.set(B.name,B)}return S===void 0&&(S=(0,e.default)().applicationJson.decoder,F.set(S.name,S)),{charset:b,contentDecoder:T,contentDecoders:y,contentTypeDecoder:S,contentTypeDecoders:F}}l.fromOptions=g})(u||(u={}));class c extends a{constructor(g,m){super(),this.readable=g,this.options=u.fromOptions(m),this.buffer=(0,e.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new r.Semaphore(1)}set partialMessageTimeout(g){this._partialMessageTimeout=g}get partialMessageTimeout(){return this._partialMessageTimeout}listen(g){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=g;const m=this.readable.onData(b=>{this.onData(b)});return this.readable.onError(b=>this.fireError(b)),this.readable.onClose(()=>this.fireClose()),m}onData(g){try{for(this.buffer.append(g);;){if(this.nextMessageLength===-1){const b=this.buffer.tryReadHeaders(!0);if(!b)return;const T=b.get("content-length");if(!T){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(b))}`));return}const y=parseInt(T);if(isNaN(y)){this.fireError(new Error(`Content-Length value must be a number. Got ${T}`));return}this.nextMessageLength=y}const m=this.buffer.tryReadBody(this.nextMessageLength);if(m===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const b=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(m):m,T=await this.options.contentTypeDecoder.decode(b,this.options);this.callback(T)}).catch(b=>{this.fireError(b)})}}catch(m){this.fireError(m)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,e.default)().timer.setTimeout((g,m)=>{this.partialMessageTimer=void 0,g===this.messageToken&&(this.firePartialMessage({messageToken:g,waitingTime:m}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}return lt.ReadableStreamMessageReader=c,lt}var dt={},Si;function us(){if(Si)return dt;Si=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.WriteableStreamMessageWriter=dt.AbstractMessageWriter=dt.MessageWriter=void 0;const e=Wt(),t=On(),i=Jo(),r=In(),n="Content-Length: ",a=`\r
`;var u;(function(m){function b(T){let y=T;return y&&t.func(y.dispose)&&t.func(y.onClose)&&t.func(y.onError)&&t.func(y.write)}m.is=b})(u||(dt.MessageWriter=u={}));class c{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(b,T,y){this.errorEmitter.fire([this.asError(b),T,y])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(b){return b instanceof Error?b:new Error(`Writer received error. Reason: ${t.string(b.message)?b.message:"unknown"}`)}}dt.AbstractMessageWriter=c;var l;(function(m){function b(T){return T===void 0||typeof T=="string"?{charset:T??"utf-8",contentTypeEncoder:(0,e.default)().applicationJson.encoder}:{charset:T.charset??"utf-8",contentEncoder:T.contentEncoder,contentTypeEncoder:T.contentTypeEncoder??(0,e.default)().applicationJson.encoder}}m.fromOptions=b})(l||(l={}));class g extends c{constructor(b,T){super(),this.writable=b,this.options=l.fromOptions(T),this.errorCount=0,this.writeSemaphore=new i.Semaphore(1),this.writable.onError(y=>this.fireError(y)),this.writable.onClose(()=>this.fireClose())}async write(b){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(b,this.options).then(y=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(y):y).then(y=>{const S=[];return S.push(n,y.byteLength.toString(),a),S.push(a),this.doWrite(b,S,y)},y=>{throw this.fireError(y),y}))}async doWrite(b,T,y){try{return await this.writable.write(T.join(""),"ascii"),this.writable.write(y)}catch(S){return this.handleError(S,b),Promise.reject(S)}}handleError(b,T){this.errorCount++,this.fireError(b,T,this.errorCount)}end(){this.writable.end()}}return dt.WriteableStreamMessageWriter=g,dt}var Zt={},qi;function ls(){if(qi)return Zt;qi=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.AbstractMessageBuffer=void 0;const e=13,t=10,i=`\r
`;class r{constructor(a="utf-8"){this._encoding=a,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(a){const u=typeof a=="string"?this.fromString(a,this._encoding):a;this._chunks.push(u),this._totalLength+=u.byteLength}tryReadHeaders(a=!1){if(this._chunks.length===0)return;let u=0,c=0,l=0,g=0;e:for(;c<this._chunks.length;){const y=this._chunks[c];for(l=0;l<y.length;){switch(y[l]){case e:switch(u){case 0:u=1;break;case 2:u=3;break;default:u=0}break;case t:switch(u){case 1:u=2;break;case 3:u=4,l++;break e;default:u=0}break;default:u=0}l++}g+=y.byteLength,c++}if(u!==4)return;const m=this._read(g+l),b=new Map,T=this.toString(m,"ascii").split(i);if(T.length<2)return b;for(let y=0;y<T.length-2;y++){const S=T[y],F=S.indexOf(":");if(F===-1)throw new Error(`Message header must separate key and value using ':'
${S}`);const B=S.substr(0,F),N=S.substr(F+1).trim();b.set(a?B.toLowerCase():B,N)}return b}tryReadBody(a){if(!(this._totalLength<a))return this._read(a)}get numberOfBytes(){return this._totalLength}_read(a){if(a===0)return this.emptyBuffer();if(a>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===a){const g=this._chunks[0];return this._chunks.shift(),this._totalLength-=a,this.asNative(g)}if(this._chunks[0].byteLength>a){const g=this._chunks[0],m=this.asNative(g,a);return this._chunks[0]=g.slice(a),this._totalLength-=a,m}const u=this.allocNative(a);let c=0,l=0;for(;a>0;){const g=this._chunks[l];if(g.byteLength>a){const m=g.slice(0,a);u.set(m,c),c+=a,this._chunks[l]=g.slice(a),this._totalLength-=a,a-=a}else u.set(g,c),c+=g.byteLength,this._chunks.shift(),this._totalLength-=g.byteLength,a-=g.byteLength}return u}}return Zt.AbstractMessageBuffer=r,Zt}var ir={},Ei;function ds(){return Ei||(Ei=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=Wt(),i=On(),r=zo(),n=Vo(),a=In(),u=gi();var c;(function(D){D.type=new r.NotificationType("$/cancelRequest")})(c||(c={}));var l;(function(D){function A(U){return typeof U=="string"||typeof U=="number"}D.is=A})(l||(e.ProgressToken=l={}));var g;(function(D){D.type=new r.NotificationType("$/progress")})(g||(g={}));class m{constructor(){}}e.ProgressType=m;var b;(function(D){function A(U){return i.func(U)}D.is=A})(b||(b={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var T;(function(D){D[D.Off=0]="Off",D[D.Messages=1]="Messages",D[D.Compact=2]="Compact",D[D.Verbose=3]="Verbose"})(T||(e.Trace=T={}));var y;(function(D){D.Off="off",D.Messages="messages",D.Compact="compact",D.Verbose="verbose"})(y||(e.TraceValues=y={})),function(D){function A(I){if(!i.string(I))return D.Off;switch(I=I.toLowerCase(),I){case"off":return D.Off;case"messages":return D.Messages;case"compact":return D.Compact;case"verbose":return D.Verbose;default:return D.Off}}D.fromString=A;function U(I){switch(I){case D.Off:return"off";case D.Messages:return"messages";case D.Compact:return"compact";case D.Verbose:return"verbose";default:return"off"}}D.toString=U}(T||(e.Trace=T={}));var S;(function(D){D.Text="text",D.JSON="json"})(S||(e.TraceFormat=S={})),function(D){function A(U){return i.string(U)?(U=U.toLowerCase(),U==="json"?D.JSON:D.Text):D.Text}D.fromString=A}(S||(e.TraceFormat=S={}));var F;(function(D){D.type=new r.NotificationType("$/setTrace")})(F||(e.SetTraceNotification=F={}));var B;(function(D){D.type=new r.NotificationType("$/logTrace")})(B||(e.LogTraceNotification=B={}));var N;(function(D){D[D.Closed=1]="Closed",D[D.Disposed=2]="Disposed",D[D.AlreadyListening=3]="AlreadyListening"})(N||(e.ConnectionErrors=N={}));class E extends Error{constructor(A,U){super(U),this.code=A,Object.setPrototypeOf(this,E.prototype)}}e.ConnectionError=E;var O;(function(D){function A(U){const I=U;return I&&i.func(I.cancelUndispatched)}D.is=A})(O||(e.ConnectionStrategy=O={}));var Q;(function(D){function A(U){const I=U;return I&&(I.kind===void 0||I.kind==="id")&&i.func(I.createCancellationTokenSource)&&(I.dispose===void 0||i.func(I.dispose))}D.is=A})(Q||(e.IdCancellationReceiverStrategy=Q={}));var Y;(function(D){function A(U){const I=U;return I&&I.kind==="request"&&i.func(I.createCancellationTokenSource)&&(I.dispose===void 0||i.func(I.dispose))}D.is=A})(Y||(e.RequestCancellationReceiverStrategy=Y={}));var V;(function(D){D.Message=Object.freeze({createCancellationTokenSource(U){return new u.CancellationTokenSource}});function A(U){return Q.is(U)||Y.is(U)}D.is=A})(V||(e.CancellationReceiverStrategy=V={}));var X;(function(D){D.Message=Object.freeze({sendCancellation(U,I){return U.sendNotification(c.type,{id:I})},cleanup(U){}});function A(U){const I=U;return I&&i.func(I.sendCancellation)&&i.func(I.cleanup)}D.is=A})(X||(e.CancellationSenderStrategy=X={}));var te;(function(D){D.Message=Object.freeze({receiver:V.Message,sender:X.Message});function A(U){const I=U;return I&&V.is(I.receiver)&&X.is(I.sender)}D.is=A})(te||(e.CancellationStrategy=te={}));var de;(function(D){function A(U){const I=U;return I&&i.func(I.handleMessage)}D.is=A})(de||(e.MessageStrategy=de={}));var Fe;(function(D){function A(U){const I=U;return I&&(te.is(I.cancellationStrategy)||O.is(I.connectionStrategy)||de.is(I.messageStrategy))}D.is=A})(Fe||(e.ConnectionOptions=Fe={}));var fe;(function(D){D[D.New=1]="New",D[D.Listening=2]="Listening",D[D.Closed=3]="Closed",D[D.Disposed=4]="Disposed"})(fe||(fe={}));function H(D,A,U,I){const J=U!==void 0?U:e.NullLogger;let it=0,ot=0,st=0;const ne="2.0";let ue;const xe=new Map;let Be;const We=new Map,$e=new Map;let ze,Pe=new n.LinkedMap,Oe=new Map,W=new Set,w=new Map,k=T.Off,j=S.Text,P,oe=fe.New;const Se=new a.Emitter,Ie=new a.Emitter,Ze=new a.Emitter,Ke=new a.Emitter,Ge=new a.Emitter,ke=I&&I.cancellationStrategy?I.cancellationStrategy:te.Message;function _e(p){if(p===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+p.toString()}function et(p){return p===null?"res-unknown-"+(++st).toString():"res-"+p.toString()}function Xe(){return"not-"+(++ot).toString()}function qe(p,q){r.Message.isRequest(q)?p.set(_e(q.id),q):r.Message.isResponse(q)?p.set(et(q.id),q):p.set(Xe(),q)}function Ye(p){}function d(){return oe===fe.Listening}function o(){return oe===fe.Closed}function s(){return oe===fe.Disposed}function f(){(oe===fe.New||oe===fe.Listening)&&(oe=fe.Closed,Ie.fire(void 0))}function _(p){Se.fire([p,void 0,void 0])}function v(p){Se.fire(p)}D.onClose(f),D.onError(_),A.onClose(f),A.onError(v);function C(){ze||Pe.size===0||(ze=(0,t.default)().timer.setImmediate(()=>{ze=void 0,se()}))}function G(p){r.Message.isRequest(p)?ae(p):r.Message.isNotification(p)?An(p):r.Message.isResponse(p)?ee(p):jn(p)}function se(){if(Pe.size===0)return;const p=Pe.shift();try{const q=I?.messageStrategy;de.is(q)?q.handleMessage(p,G):G(p)}finally{C()}}const re=p=>{try{if(r.Message.isNotification(p)&&p.method===c.type.method){const q=p.params.id,M=_e(q),L=Pe.get(M);if(r.Message.isRequest(L)){const ce=I?.connectionStrategy,me=ce&&ce.cancelUndispatched?ce.cancelUndispatched(L,Ye):void 0;if(me&&(me.error!==void 0||me.result!==void 0)){Pe.delete(M),w.delete(q),me.id=L.id,Dt(me,p.method,Date.now()),A.write(me).catch(()=>J.error("Sending response for canceled message failed."));return}}const le=w.get(q);if(le!==void 0){le.cancel(),$t(p);return}else W.add(q)}qe(Pe,p)}finally{C()}};function ae(p){if(s())return;function q(Z,he,ie){const Ce={jsonrpc:ne,id:p.id};Z instanceof r.ResponseError?Ce.error=Z.toJson():Ce.result=Z===void 0?null:Z,Dt(Ce,he,ie),A.write(Ce).catch(()=>J.error("Sending response failed."))}function M(Z,he,ie){const Ce={jsonrpc:ne,id:p.id,error:Z.toJson()};Dt(Ce,he,ie),A.write(Ce).catch(()=>J.error("Sending response failed."))}function L(Z,he,ie){Z===void 0&&(Z=null);const Ce={jsonrpc:ne,id:p.id,result:Z};Dt(Ce,he,ie),A.write(Ce).catch(()=>J.error("Sending response failed."))}xn(p);const le=xe.get(p.method);let ce,me;le&&(ce=le.type,me=le.handler);const ve=Date.now();if(me||ue){const Z=p.id??String(Date.now()),he=Q.is(ke.receiver)?ke.receiver.createCancellationTokenSource(Z):ke.receiver.createCancellationTokenSource(p);p.id!==null&&W.has(p.id)&&he.cancel(),p.id!==null&&w.set(Z,he);try{let ie;if(me)if(p.params===void 0){if(ce!==void 0&&ce.numberOfParams!==0){M(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${p.method} defines ${ce.numberOfParams} params but received none.`),p.method,ve);return}ie=me(he.token)}else if(Array.isArray(p.params)){if(ce!==void 0&&ce.parameterStructures===r.ParameterStructures.byName){M(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by name but received parameters by position`),p.method,ve);return}ie=me(...p.params,he.token)}else{if(ce!==void 0&&ce.parameterStructures===r.ParameterStructures.byPosition){M(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${p.method} defines parameters by position but received parameters by name`),p.method,ve);return}ie=me(p.params,he.token)}else ue&&(ie=ue(p.method,p.params,he.token));const Ce=ie;ie?Ce.then?Ce.then(Ae=>{w.delete(Z),q(Ae,p.method,ve)},Ae=>{w.delete(Z),Ae instanceof r.ResponseError?M(Ae,p.method,ve):Ae&&i.string(Ae.message)?M(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${Ae.message}`),p.method,ve):M(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,ve)}):(w.delete(Z),q(ie,p.method,ve)):(w.delete(Z),L(ie,p.method,ve))}catch(ie){w.delete(Z),ie instanceof r.ResponseError?q(ie,p.method,ve):ie&&i.string(ie.message)?M(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${p.method} failed with message: ${ie.message}`),p.method,ve):M(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${p.method} failed unexpectedly without providing any details.`),p.method,ve)}}else M(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${p.method}`),p.method,ve)}function ee(p){if(!s())if(p.id===null)p.error?J.error(`Received response message without id: Error is: 
${JSON.stringify(p.error,void 0,4)}`):J.error("Received response message without id. No further error information provided.");else{const q=p.id,M=Oe.get(q);if(Wn(p,M),M!==void 0){Oe.delete(q);try{if(p.error){const L=p.error;M.reject(new r.ResponseError(L.code,L.message,L.data))}else if(p.result!==void 0)M.resolve(p.result);else throw new Error("Should never happen.")}catch(L){L.message?J.error(`Response handler '${M.method}' failed with message: ${L.message}`):J.error(`Response handler '${M.method}' failed unexpectedly.`)}}}}function An(p){if(s())return;let q,M;if(p.method===c.type.method){const L=p.params.id;W.delete(L),$t(p);return}else{const L=We.get(p.method);L&&(M=L.handler,q=L.type)}if(M||Be)try{if($t(p),M)if(p.params===void 0)q!==void 0&&q.numberOfParams!==0&&q.parameterStructures!==r.ParameterStructures.byName&&J.error(`Notification ${p.method} defines ${q.numberOfParams} params but received none.`),M();else if(Array.isArray(p.params)){const L=p.params;p.method===g.type.method&&L.length===2&&l.is(L[0])?M({token:L[0],value:L[1]}):(q!==void 0&&(q.parameterStructures===r.ParameterStructures.byName&&J.error(`Notification ${p.method} defines parameters by name but received parameters by position`),q.numberOfParams!==p.params.length&&J.error(`Notification ${p.method} defines ${q.numberOfParams} params but received ${L.length} arguments`)),M(...L))}else q!==void 0&&q.parameterStructures===r.ParameterStructures.byPosition&&J.error(`Notification ${p.method} defines parameters by position but received parameters by name`),M(p.params);else Be&&Be(p.method,p.params)}catch(L){L.message?J.error(`Notification handler '${p.method}' failed with message: ${L.message}`):J.error(`Notification handler '${p.method}' failed unexpectedly.`)}else Ze.fire(p)}function jn(p){if(!p){J.error("Received empty message.");return}J.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(p,null,4)}`);const q=p;if(i.string(q.id)||i.number(q.id)){const M=q.id,L=Oe.get(M);L&&L.reject(new Error("The received response has neither a result nor an error property."))}}function Qe(p){if(p!=null)switch(k){case T.Verbose:return JSON.stringify(p,null,4);case T.Compact:return JSON.stringify(p);default:return}}function Ln(p){if(!(k===T.Off||!P))if(j===S.Text){let q;(k===T.Verbose||k===T.Compact)&&p.params&&(q=`Params: ${Qe(p.params)}

`),P.log(`Sending request '${p.method} - (${p.id})'.`,q)}else at("send-request",p)}function Bn(p){if(!(k===T.Off||!P))if(j===S.Text){let q;(k===T.Verbose||k===T.Compact)&&(p.params?q=`Params: ${Qe(p.params)}

`:q=`No parameters provided.

`),P.log(`Sending notification '${p.method}'.`,q)}else at("send-notification",p)}function Dt(p,q,M){if(!(k===T.Off||!P))if(j===S.Text){let L;(k===T.Verbose||k===T.Compact)&&(p.error&&p.error.data?L=`Error data: ${Qe(p.error.data)}

`:p.result?L=`Result: ${Qe(p.result)}

`:p.error===void 0&&(L=`No result returned.

`)),P.log(`Sending response '${q} - (${p.id})'. Processing request took ${Date.now()-M}ms`,L)}else at("send-response",p)}function xn(p){if(!(k===T.Off||!P))if(j===S.Text){let q;(k===T.Verbose||k===T.Compact)&&p.params&&(q=`Params: ${Qe(p.params)}

`),P.log(`Received request '${p.method} - (${p.id})'.`,q)}else at("receive-request",p)}function $t(p){if(!(k===T.Off||!P||p.method===B.type.method))if(j===S.Text){let q;(k===T.Verbose||k===T.Compact)&&(p.params?q=`Params: ${Qe(p.params)}

`:q=`No parameters provided.

`),P.log(`Received notification '${p.method}'.`,q)}else at("receive-notification",p)}function Wn(p,q){if(!(k===T.Off||!P))if(j===S.Text){let M;if((k===T.Verbose||k===T.Compact)&&(p.error&&p.error.data?M=`Error data: ${Qe(p.error.data)}

`:p.result?M=`Result: ${Qe(p.result)}

`:p.error===void 0&&(M=`No result returned.

`)),q){const L=p.error?` Request failed: ${p.error.message} (${p.error.code}).`:"";P.log(`Received response '${q.method} - (${p.id})' in ${Date.now()-q.timerStart}ms.${L}`,M)}else P.log(`Received response ${p.id} without active response promise.`,M)}else at("receive-response",p)}function at(p,q){if(!P||k===T.Off)return;const M={isLSPMessage:!0,type:p,message:q,timestamp:Date.now()};P.log(M)}function wt(){if(o())throw new E(N.Closed,"Connection is closed.");if(s())throw new E(N.Disposed,"Connection is disposed.")}function $n(){if(d())throw new E(N.AlreadyListening,"Connection is already listening")}function Hn(){if(!d())throw new Error("Call listen() first.")}function vt(p){return p===void 0?null:p}function Xt(p){if(p!==null)return p}function h(p){return p!=null&&!Array.isArray(p)&&typeof p=="object"}function be(p,q){switch(p){case r.ParameterStructures.auto:return h(q)?Xt(q):[vt(q)];case r.ParameterStructures.byName:if(!h(q))throw new Error("Received parameters by name but param is not an object literal.");return Xt(q);case r.ParameterStructures.byPosition:return[vt(q)];default:throw new Error(`Unknown parameter structure ${p.toString()}`)}}function we(p,q){let M;const L=p.numberOfParams;switch(L){case 0:M=void 0;break;case 1:M=be(p.parameterStructures,q[0]);break;default:M=[];for(let le=0;le<q.length&&le<L;le++)M.push(vt(q[le]));if(q.length<L)for(let le=q.length;le<L;le++)M.push(null);break}return M}const z={sendNotification:(p,...q)=>{wt();let M,L;if(i.string(p)){M=p;const ce=q[0];let me=0,ve=r.ParameterStructures.auto;r.ParameterStructures.is(ce)&&(me=1,ve=ce);let Z=q.length;const he=Z-me;switch(he){case 0:L=void 0;break;case 1:L=be(ve,q[me]);break;default:if(ve===r.ParameterStructures.byName)throw new Error(`Received ${he} parameters for 'by Name' notification parameter structure.`);L=q.slice(me,Z).map(ie=>vt(ie));break}}else{const ce=q;M=p.method,L=we(p,ce)}const le={jsonrpc:ne,method:M,params:L};return Bn(le),A.write(le).catch(ce=>{throw J.error("Sending notification failed."),ce})},onNotification:(p,q)=>{wt();let M;return i.func(p)?Be=p:q&&(i.string(p)?(M=p,We.set(p,{type:void 0,handler:q})):(M=p.method,We.set(p.method,{type:p,handler:q}))),{dispose:()=>{M!==void 0?We.delete(M):Be=void 0}}},onProgress:(p,q,M)=>{if($e.has(q))throw new Error(`Progress handler for token ${q} already registered`);return $e.set(q,M),{dispose:()=>{$e.delete(q)}}},sendProgress:(p,q,M)=>z.sendNotification(g.type,{token:q,value:M}),onUnhandledProgress:Ke.event,sendRequest:(p,...q)=>{wt(),Hn();let M,L,le;if(i.string(p)){M=p;const Z=q[0],he=q[q.length-1];let ie=0,Ce=r.ParameterStructures.auto;r.ParameterStructures.is(Z)&&(ie=1,Ce=Z);let Ae=q.length;u.CancellationToken.is(he)&&(Ae=Ae-1,le=he);const tt=Ae-ie;switch(tt){case 0:L=void 0;break;case 1:L=be(Ce,q[ie]);break;default:if(Ce===r.ParameterStructures.byName)throw new Error(`Received ${tt} parameters for 'by Name' request parameter structure.`);L=q.slice(ie,Ae).map(rs=>vt(rs));break}}else{const Z=q;M=p.method,L=we(p,Z);const he=p.numberOfParams;le=u.CancellationToken.is(Z[he])?Z[he]:void 0}const ce=it++;let me;le&&(me=le.onCancellationRequested(()=>{const Z=ke.sender.sendCancellation(z,ce);return Z===void 0?(J.log(`Received no promise from cancellation strategy when cancelling id ${ce}`),Promise.resolve()):Z.catch(()=>{J.log(`Sending cancellation messages for id ${ce} failed`)})}));const ve={jsonrpc:ne,id:ce,method:M,params:L};return Ln(ve),typeof ke.sender.enableCancellation=="function"&&ke.sender.enableCancellation(ve),new Promise(async(Z,he)=>{const ie=tt=>{Z(tt),ke.sender.cleanup(ce),me?.dispose()},Ce=tt=>{he(tt),ke.sender.cleanup(ce),me?.dispose()},Ae={method:M,timerStart:Date.now(),resolve:ie,reject:Ce};try{await A.write(ve),Oe.set(ce,Ae)}catch(tt){throw J.error("Sending request failed."),Ae.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,tt.message?tt.message:"Unknown reason")),tt}})},onRequest:(p,q)=>{wt();let M=null;return b.is(p)?(M=void 0,ue=p):i.string(p)?(M=null,q!==void 0&&(M=p,xe.set(p,{handler:q,type:void 0}))):q!==void 0&&(M=p.method,xe.set(p.method,{type:p,handler:q})),{dispose:()=>{M!==null&&(M!==void 0?xe.delete(M):ue=void 0)}}},hasPendingResponse:()=>Oe.size>0,trace:async(p,q,M)=>{let L=!1,le=S.Text;M!==void 0&&(i.boolean(M)?L=M:(L=M.sendNotification||!1,le=M.traceFormat||S.Text)),k=p,j=le,k===T.Off?P=void 0:P=q,L&&!o()&&!s()&&await z.sendNotification(F.type,{value:T.toString(p)})},onError:Se.event,onClose:Ie.event,onUnhandledNotification:Ze.event,onDispose:Ge.event,end:()=>{A.end()},dispose:()=>{if(s())return;oe=fe.Disposed,Ge.fire(void 0);const p=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const q of Oe.values())q.reject(p);Oe=new Map,w=new Map,W=new Set,Pe=new n.LinkedMap,i.func(A.dispose)&&A.dispose(),i.func(D.dispose)&&D.dispose()},listen:()=>{wt(),$n(),oe=fe.Listening,D.listen(re)},inspect:()=>{(0,t.default)().console.log("inspect")}};return z.onNotification(B.type,p=>{if(k===T.Off||!P)return;const q=k===T.Verbose||k===T.Compact;P.log(p.message,q?p.verbose:void 0)}),z.onNotification(g.type,p=>{const q=$e.get(p.token);q?q(p.value):Ke.fire(p)}),z}e.createMessageConnection=H}(ir)),ir}var Mi;function fr(){return Mi||(Mi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=zo();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const i=Vo();Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return i.Touch}});const r=ss();Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const n=In();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return n.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return n.Emitter}});const a=gi();Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const u=as();Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return u.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return u.SharedArrayReceiverStrategy}});const c=cs();Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const l=us();Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const g=ls();Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return g.AbstractMessageBuffer}});const m=ds();Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return m.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return m.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return m.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return m.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return m.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return m.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return m.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return m.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return m.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return m.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return m.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return m.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return m.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return m.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return m.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return m.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return m.MessageStrategy}});const b=Wt();e.RAL=b.default}(rr)),rr}var Ni;function fs(){if(Ni)return Un;Ni=1,Object.defineProperty(Un,"__esModule",{value:!0});const e=fr();class t extends e.AbstractMessageBuffer{constructor(l="utf-8"){super(l),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return t.emptyBuffer}fromString(l,g){return new TextEncoder().encode(l)}toString(l,g){return g==="ascii"?this.asciiDecoder.decode(l):new TextDecoder(g).decode(l)}asNative(l,g){return g===void 0?l:l.slice(0,g)}allocNative(l){return new Uint8Array(l)}}t.emptyBuffer=new Uint8Array(0);class i{constructor(l){this.socket=l,this._onData=new e.Emitter,this._messageListener=g=>{g.data.arrayBuffer().then(b=>{this._onData.fire(new Uint8Array(b))},()=>{(0,e.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(l){return this.socket.addEventListener("close",l),e.Disposable.create(()=>this.socket.removeEventListener("close",l))}onError(l){return this.socket.addEventListener("error",l),e.Disposable.create(()=>this.socket.removeEventListener("error",l))}onEnd(l){return this.socket.addEventListener("end",l),e.Disposable.create(()=>this.socket.removeEventListener("end",l))}onData(l){return this._onData.event(l)}}class r{constructor(l){this.socket=l}onClose(l){return this.socket.addEventListener("close",l),e.Disposable.create(()=>this.socket.removeEventListener("close",l))}onError(l){return this.socket.addEventListener("error",l),e.Disposable.create(()=>this.socket.removeEventListener("error",l))}onEnd(l){return this.socket.addEventListener("end",l),e.Disposable.create(()=>this.socket.removeEventListener("end",l))}write(l,g){if(typeof l=="string"){if(g!==void 0&&g!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${g}`);this.socket.send(l)}else this.socket.send(l);return Promise.resolve()}end(){this.socket.close()}}const n=new TextEncoder,a=Object.freeze({messageBuffer:Object.freeze({create:c=>new t(c)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(c,l)=>{if(l.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${l.charset}`);return Promise.resolve(n.encode(JSON.stringify(c,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(c,l)=>{if(!(c instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(l.charset).decode(c)))}})}),stream:Object.freeze({asReadableStream:c=>new i(c),asWritableStream:c=>new r(c)}),console,timer:Object.freeze({setTimeout(c,l,...g){const m=setTimeout(c,l,...g);return{dispose:()=>clearTimeout(m)}},setImmediate(c,...l){const g=setTimeout(c,0,...l);return{dispose:()=>clearTimeout(g)}},setInterval(c,l,...g){const m=setInterval(c,l,...g);return{dispose:()=>clearInterval(m)}}})});function u(){return a}return function(c){function l(){e.RAL.install(a)}c.install=l}(u||(u={})),Un.default=u,Un}var Fi;function Gt(){return Fi||(Fi=1,function(e){var t=Ct&&Ct.__createBinding||(Object.create?function(l,g,m,b){b===void 0&&(b=m);var T=Object.getOwnPropertyDescriptor(g,m);(!T||("get"in T?!g.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(l,b,T)}:function(l,g,m,b){b===void 0&&(b=m),l[b]=g[m]}),i=Ct&&Ct.__exportStar||function(l,g){for(var m in l)m!=="default"&&!Object.prototype.hasOwnProperty.call(g,m)&&t(g,l,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,fs().default.install();const n=fr();i(fr(),e);class a extends n.AbstractMessageReader{constructor(g){super(),this._onData=new n.Emitter,this._messageListener=m=>{this._onData.fire(m.data)},g.addEventListener("error",m=>this.fireError(m)),g.onmessage=this._messageListener}listen(g){return this._onData.event(g)}}e.BrowserMessageReader=a;class u extends n.AbstractMessageWriter{constructor(g){super(),this.port=g,this.errorCount=0,g.addEventListener("error",m=>this.fireError(m))}write(g){try{return this.port.postMessage(g),Promise.resolve()}catch(m){return this.handleError(m,g),Promise.reject(m)}}handleError(g,m){this.errorCount++,this.fireError(g,m,this.errorCount)}end(){}}e.BrowserMessageWriter=u;function c(l,g,m,b){return m===void 0&&(m=n.NullLogger),n.ConnectionStrategy.is(b)&&(b={connectionStrategy:b}),(0,n.createMessageConnection)(l,g,m,b)}e.createMessageConnection=c}(Ct)),Ct}var or,Oi;function Ii(){return Oi||(Oi=1,or=Gt()),or}var Mt={},hr;(function(e){function t(i){return typeof i=="string"}e.is=t})(hr||(hr={}));var Xn;(function(e){function t(i){return typeof i=="string"}e.is=t})(Xn||(Xn={}));var gr;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(i){return typeof i=="number"&&e.MIN_VALUE<=i&&i<=e.MAX_VALUE}e.is=t})(gr||(gr={}));var Cn;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(i){return typeof i=="number"&&e.MIN_VALUE<=i&&i<=e.MAX_VALUE}e.is=t})(Cn||(Cn={}));var Je;(function(e){function t(r,n){return r===Number.MAX_VALUE&&(r=Cn.MAX_VALUE),n===Number.MAX_VALUE&&(n=Cn.MAX_VALUE),{line:r,character:n}}e.create=t;function i(r){let n=r;return R.objectLiteral(n)&&R.uinteger(n.line)&&R.uinteger(n.character)}e.is=i})(Je||(Je={}));var ye;(function(e){function t(r,n,a,u){if(R.uinteger(r)&&R.uinteger(n)&&R.uinteger(a)&&R.uinteger(u))return{start:Je.create(r,n),end:Je.create(a,u)};if(Je.is(r)&&Je.is(n))return{start:r,end:n};throw new Error(`Range#create called with invalid arguments[${r}, ${n}, ${a}, ${u}]`)}e.create=t;function i(r){let n=r;return R.objectLiteral(n)&&Je.is(n.start)&&Je.is(n.end)}e.is=i})(ye||(ye={}));var Sn;(function(e){function t(r,n){return{uri:r,range:n}}e.create=t;function i(r){let n=r;return R.objectLiteral(n)&&ye.is(n.range)&&(R.string(n.uri)||R.undefined(n.uri))}e.is=i})(Sn||(Sn={}));var pr;(function(e){function t(r,n,a,u){return{targetUri:r,targetRange:n,targetSelectionRange:a,originSelectionRange:u}}e.create=t;function i(r){let n=r;return R.objectLiteral(n)&&ye.is(n.targetRange)&&R.string(n.targetUri)&&ye.is(n.targetSelectionRange)&&(ye.is(n.originSelectionRange)||R.undefined(n.originSelectionRange))}e.is=i})(pr||(pr={}));var Yn;(function(e){function t(r,n,a,u){return{red:r,green:n,blue:a,alpha:u}}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&R.numberRange(n.red,0,1)&&R.numberRange(n.green,0,1)&&R.numberRange(n.blue,0,1)&&R.numberRange(n.alpha,0,1)}e.is=i})(Yn||(Yn={}));var mr;(function(e){function t(r,n){return{range:r,color:n}}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&ye.is(n.range)&&Yn.is(n.color)}e.is=i})(mr||(mr={}));var yr;(function(e){function t(r,n,a){return{label:r,textEdit:n,additionalTextEdits:a}}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&R.string(n.label)&&(R.undefined(n.textEdit)||rt.is(n))&&(R.undefined(n.additionalTextEdits)||R.typedArray(n.additionalTextEdits,rt.is))}e.is=i})(yr||(yr={}));var _r;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(_r||(_r={}));var br;(function(e){function t(r,n,a,u,c,l){const g={startLine:r,endLine:n};return R.defined(a)&&(g.startCharacter=a),R.defined(u)&&(g.endCharacter=u),R.defined(c)&&(g.kind=c),R.defined(l)&&(g.collapsedText=l),g}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&R.uinteger(n.startLine)&&R.uinteger(n.startLine)&&(R.undefined(n.startCharacter)||R.uinteger(n.startCharacter))&&(R.undefined(n.endCharacter)||R.uinteger(n.endCharacter))&&(R.undefined(n.kind)||R.string(n.kind))}e.is=i})(br||(br={}));var Qn;(function(e){function t(r,n){return{location:r,message:n}}e.create=t;function i(r){let n=r;return R.defined(n)&&Sn.is(n.location)&&R.string(n.message)}e.is=i})(Qn||(Qn={}));var wr;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(wr||(wr={}));var vr;(function(e){e.Unnecessary=1,e.Deprecated=2})(vr||(vr={}));var Rr;(function(e){function t(i){const r=i;return R.objectLiteral(r)&&R.string(r.href)}e.is=t})(Rr||(Rr={}));var qn;(function(e){function t(r,n,a,u,c,l){let g={range:r,message:n};return R.defined(a)&&(g.severity=a),R.defined(u)&&(g.code=u),R.defined(c)&&(g.source=c),R.defined(l)&&(g.relatedInformation=l),g}e.create=t;function i(r){var n;let a=r;return R.defined(a)&&ye.is(a.range)&&R.string(a.message)&&(R.number(a.severity)||R.undefined(a.severity))&&(R.integer(a.code)||R.string(a.code)||R.undefined(a.code))&&(R.undefined(a.codeDescription)||R.string((n=a.codeDescription)===null||n===void 0?void 0:n.href))&&(R.string(a.source)||R.undefined(a.source))&&(R.undefined(a.relatedInformation)||R.typedArray(a.relatedInformation,Qn.is))}e.is=i})(qn||(qn={}));var xt;(function(e){function t(r,n,...a){let u={title:r,command:n};return R.defined(a)&&a.length>0&&(u.arguments=a),u}e.create=t;function i(r){let n=r;return R.defined(n)&&R.string(n.title)&&R.string(n.command)}e.is=i})(xt||(xt={}));var rt;(function(e){function t(a,u){return{range:a,newText:u}}e.replace=t;function i(a,u){return{range:{start:a,end:a},newText:u}}e.insert=i;function r(a){return{range:a,newText:""}}e.del=r;function n(a){const u=a;return R.objectLiteral(u)&&R.string(u.newText)&&ye.is(u.range)}e.is=n})(rt||(rt={}));var Bt;(function(e){function t(r,n,a){const u={label:r};return n!==void 0&&(u.needsConfirmation=n),a!==void 0&&(u.description=a),u}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&R.string(n.label)&&(R.boolean(n.needsConfirmation)||n.needsConfirmation===void 0)&&(R.string(n.description)||n.description===void 0)}e.is=i})(Bt||(Bt={}));var Ne;(function(e){function t(i){const r=i;return R.string(r)}e.is=t})(Ne||(Ne={}));var bt;(function(e){function t(a,u,c){return{range:a,newText:u,annotationId:c}}e.replace=t;function i(a,u,c){return{range:{start:a,end:a},newText:u,annotationId:c}}e.insert=i;function r(a,u){return{range:a,newText:"",annotationId:u}}e.del=r;function n(a){const u=a;return rt.is(u)&&(Bt.is(u.annotationId)||Ne.is(u.annotationId))}e.is=n})(bt||(bt={}));var En;(function(e){function t(r,n){return{textDocument:r,edits:n}}e.create=t;function i(r){let n=r;return R.defined(n)&&Mn.is(n.textDocument)&&Array.isArray(n.edits)}e.is=i})(En||(En={}));var Ut;(function(e){function t(r,n,a){let u={kind:"create",uri:r};return n!==void 0&&(n.overwrite!==void 0||n.ignoreIfExists!==void 0)&&(u.options=n),a!==void 0&&(u.annotationId=a),u}e.create=t;function i(r){let n=r;return n&&n.kind==="create"&&R.string(n.uri)&&(n.options===void 0||(n.options.overwrite===void 0||R.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||R.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||Ne.is(n.annotationId))}e.is=i})(Ut||(Ut={}));var zt;(function(e){function t(r,n,a,u){let c={kind:"rename",oldUri:r,newUri:n};return a!==void 0&&(a.overwrite!==void 0||a.ignoreIfExists!==void 0)&&(c.options=a),u!==void 0&&(c.annotationId=u),c}e.create=t;function i(r){let n=r;return n&&n.kind==="rename"&&R.string(n.oldUri)&&R.string(n.newUri)&&(n.options===void 0||(n.options.overwrite===void 0||R.boolean(n.options.overwrite))&&(n.options.ignoreIfExists===void 0||R.boolean(n.options.ignoreIfExists)))&&(n.annotationId===void 0||Ne.is(n.annotationId))}e.is=i})(zt||(zt={}));var Vt;(function(e){function t(r,n,a){let u={kind:"delete",uri:r};return n!==void 0&&(n.recursive!==void 0||n.ignoreIfNotExists!==void 0)&&(u.options=n),a!==void 0&&(u.annotationId=a),u}e.create=t;function i(r){let n=r;return n&&n.kind==="delete"&&R.string(n.uri)&&(n.options===void 0||(n.options.recursive===void 0||R.boolean(n.options.recursive))&&(n.options.ignoreIfNotExists===void 0||R.boolean(n.options.ignoreIfNotExists)))&&(n.annotationId===void 0||Ne.is(n.annotationId))}e.is=i})(Vt||(Vt={}));var Zn;(function(e){function t(i){let r=i;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(n=>R.string(n.kind)?Ut.is(n)||zt.is(n)||Vt.is(n):En.is(n)))}e.is=t})(Zn||(Zn={}));class Vn{constructor(t,i){this.edits=t,this.changeAnnotations=i}insert(t,i,r){let n,a;if(r===void 0?n=rt.insert(t,i):Ne.is(r)?(a=r,n=bt.insert(t,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),n=bt.insert(t,i,a)),this.edits.push(n),a!==void 0)return a}replace(t,i,r){let n,a;if(r===void 0?n=rt.replace(t,i):Ne.is(r)?(a=r,n=bt.replace(t,i,r)):(this.assertChangeAnnotations(this.changeAnnotations),a=this.changeAnnotations.manage(r),n=bt.replace(t,i,a)),this.edits.push(n),a!==void 0)return a}delete(t,i){let r,n;if(i===void 0?r=rt.del(t):Ne.is(i)?(n=i,r=bt.del(t,i)):(this.assertChangeAnnotations(this.changeAnnotations),n=this.changeAnnotations.manage(i),r=bt.del(t,n)),this.edits.push(r),n!==void 0)return n}add(t){this.edits.push(t)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}}class Ai{constructor(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(t,i){let r;if(Ne.is(t)?r=t:(r=this.nextId(),i=t),this._annotations[r]!==void 0)throw new Error(`Id ${r} is already in use.`);if(i===void 0)throw new Error(`No annotation provided for id ${r}`);return this._annotations[r]=i,this._size++,r}nextId(){return this._counter++,this._counter.toString()}}class hs{constructor(t){this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new Ai(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(i=>{if(En.is(i)){const r=new Vn(i.edits,this._changeAnnotations);this._textEditChanges[i.textDocument.uri]=r}})):t.changes&&Object.keys(t.changes).forEach(i=>{const r=new Vn(t.changes[i]);this._textEditChanges[i]=r})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(t){if(Mn.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const i={uri:t.uri,version:t.version};let r=this._textEditChanges[i.uri];if(!r){const n=[],a={textDocument:i,edits:n};this._workspaceEdit.documentChanges.push(a),r=new Vn(n,this._changeAnnotations),this._textEditChanges[i.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let i=this._textEditChanges[t];if(!i){let r=[];this._workspaceEdit.changes[t]=r,i=new Vn(r),this._textEditChanges[t]=i}return i}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ai,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(t,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let n;Bt.is(i)||Ne.is(i)?n=i:r=i;let a,u;if(n===void 0?a=Ut.create(t,r):(u=Ne.is(n)?n:this._changeAnnotations.manage(n),a=Ut.create(t,r,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u}renameFile(t,i,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let a;Bt.is(r)||Ne.is(r)?a=r:n=r;let u,c;if(a===void 0?u=zt.create(t,i,n):(c=Ne.is(a)?a:this._changeAnnotations.manage(a),u=zt.create(t,i,n,c)),this._workspaceEdit.documentChanges.push(u),c!==void 0)return c}deleteFile(t,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let n;Bt.is(i)||Ne.is(i)?n=i:r=i;let a,u;if(n===void 0?a=Vt.create(t,r):(u=Ne.is(n)?n:this._changeAnnotations.manage(n),a=Vt.create(t,r,u)),this._workspaceEdit.documentChanges.push(a),u!==void 0)return u}}var Dr;(function(e){function t(r){return{uri:r}}e.create=t;function i(r){let n=r;return R.defined(n)&&R.string(n.uri)}e.is=i})(Dr||(Dr={}));var Tr;(function(e){function t(r,n){return{uri:r,version:n}}e.create=t;function i(r){let n=r;return R.defined(n)&&R.string(n.uri)&&R.integer(n.version)}e.is=i})(Tr||(Tr={}));var Mn;(function(e){function t(r,n){return{uri:r,version:n}}e.create=t;function i(r){let n=r;return R.defined(n)&&R.string(n.uri)&&(n.version===null||R.integer(n.version))}e.is=i})(Mn||(Mn={}));var Pr;(function(e){function t(r,n,a,u){return{uri:r,languageId:n,version:a,text:u}}e.create=t;function i(r){let n=r;return R.defined(n)&&R.string(n.uri)&&R.string(n.languageId)&&R.integer(n.version)&&R.string(n.text)}e.is=i})(Pr||(Pr={}));var Kn;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(i){const r=i;return r===e.PlainText||r===e.Markdown}e.is=t})(Kn||(Kn={}));var Jt;(function(e){function t(i){const r=i;return R.objectLiteral(i)&&Kn.is(r.kind)&&R.string(r.value)}e.is=t})(Jt||(Jt={}));var kr;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(kr||(kr={}));var Cr;(function(e){e.PlainText=1,e.Snippet=2})(Cr||(Cr={}));var Sr;(function(e){e.Deprecated=1})(Sr||(Sr={}));var qr;(function(e){function t(r,n,a){return{newText:r,insert:n,replace:a}}e.create=t;function i(r){const n=r;return n&&R.string(n.newText)&&ye.is(n.insert)&&ye.is(n.replace)}e.is=i})(qr||(qr={}));var Er;(function(e){e.asIs=1,e.adjustIndentation=2})(Er||(Er={}));var Mr;(function(e){function t(i){const r=i;return r&&(R.string(r.detail)||r.detail===void 0)&&(R.string(r.description)||r.description===void 0)}e.is=t})(Mr||(Mr={}));var Nr;(function(e){function t(i){return{label:i}}e.create=t})(Nr||(Nr={}));var Fr;(function(e){function t(i,r){return{items:i||[],isIncomplete:!!r}}e.create=t})(Fr||(Fr={}));var Nn;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function i(r){const n=r;return R.string(n)||R.objectLiteral(n)&&R.string(n.language)&&R.string(n.value)}e.is=i})(Nn||(Nn={}));var Or;(function(e){function t(i){let r=i;return!!r&&R.objectLiteral(r)&&(Jt.is(r.contents)||Nn.is(r.contents)||R.typedArray(r.contents,Nn.is))&&(i.range===void 0||ye.is(i.range))}e.is=t})(Or||(Or={}));var Ir;(function(e){function t(i,r){return r?{label:i,documentation:r}:{label:i}}e.create=t})(Ir||(Ir={}));var Ar;(function(e){function t(i,r,...n){let a={label:i};return R.defined(r)&&(a.documentation=r),R.defined(n)?a.parameters=n:a.parameters=[],a}e.create=t})(Ar||(Ar={}));var jr;(function(e){e.Text=1,e.Read=2,e.Write=3})(jr||(jr={}));var Lr;(function(e){function t(i,r){let n={range:i};return R.number(r)&&(n.kind=r),n}e.create=t})(Lr||(Lr={}));var Br;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Br||(Br={}));var xr;(function(e){e.Deprecated=1})(xr||(xr={}));var Wr;(function(e){function t(i,r,n,a,u){let c={name:i,kind:r,location:{uri:a,range:n}};return u&&(c.containerName=u),c}e.create=t})(Wr||(Wr={}));var $r;(function(e){function t(i,r,n,a){return a!==void 0?{name:i,kind:r,location:{uri:n,range:a}}:{name:i,kind:r,location:{uri:n}}}e.create=t})($r||($r={}));var Hr;(function(e){function t(r,n,a,u,c,l){let g={name:r,detail:n,kind:a,range:u,selectionRange:c};return l!==void 0&&(g.children=l),g}e.create=t;function i(r){let n=r;return n&&R.string(n.name)&&R.number(n.kind)&&ye.is(n.range)&&ye.is(n.selectionRange)&&(n.detail===void 0||R.string(n.detail))&&(n.deprecated===void 0||R.boolean(n.deprecated))&&(n.children===void 0||Array.isArray(n.children))&&(n.tags===void 0||Array.isArray(n.tags))}e.is=i})(Hr||(Hr={}));var Ur;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Ur||(Ur={}));var Fn;(function(e){e.Invoked=1,e.Automatic=2})(Fn||(Fn={}));var zr;(function(e){function t(r,n,a){let u={diagnostics:r};return n!=null&&(u.only=n),a!=null&&(u.triggerKind=a),u}e.create=t;function i(r){let n=r;return R.defined(n)&&R.typedArray(n.diagnostics,qn.is)&&(n.only===void 0||R.typedArray(n.only,R.string))&&(n.triggerKind===void 0||n.triggerKind===Fn.Invoked||n.triggerKind===Fn.Automatic)}e.is=i})(zr||(zr={}));var Vr;(function(e){function t(r,n,a){let u={title:r},c=!0;return typeof n=="string"?(c=!1,u.kind=n):xt.is(n)?u.command=n:u.edit=n,c&&a!==void 0&&(u.kind=a),u}e.create=t;function i(r){let n=r;return n&&R.string(n.title)&&(n.diagnostics===void 0||R.typedArray(n.diagnostics,qn.is))&&(n.kind===void 0||R.string(n.kind))&&(n.edit!==void 0||n.command!==void 0)&&(n.command===void 0||xt.is(n.command))&&(n.isPreferred===void 0||R.boolean(n.isPreferred))&&(n.edit===void 0||Zn.is(n.edit))}e.is=i})(Vr||(Vr={}));var Jr;(function(e){function t(r,n){let a={range:r};return R.defined(n)&&(a.data=n),a}e.create=t;function i(r){let n=r;return R.defined(n)&&ye.is(n.range)&&(R.undefined(n.command)||xt.is(n.command))}e.is=i})(Jr||(Jr={}));var Gr;(function(e){function t(r,n){return{tabSize:r,insertSpaces:n}}e.create=t;function i(r){let n=r;return R.defined(n)&&R.uinteger(n.tabSize)&&R.boolean(n.insertSpaces)}e.is=i})(Gr||(Gr={}));var Xr;(function(e){function t(r,n,a){return{range:r,target:n,data:a}}e.create=t;function i(r){let n=r;return R.defined(n)&&ye.is(n.range)&&(R.undefined(n.target)||R.string(n.target))}e.is=i})(Xr||(Xr={}));var Yr;(function(e){function t(r,n){return{range:r,parent:n}}e.create=t;function i(r){let n=r;return R.objectLiteral(n)&&ye.is(n.range)&&(n.parent===void 0||e.is(n.parent))}e.is=i})(Yr||(Yr={}));var Qr;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(Qr||(Qr={}));var Zr;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(Zr||(Zr={}));var Kr;(function(e){function t(i){const r=i;return R.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(Kr||(Kr={}));var ei;(function(e){function t(r,n){return{range:r,text:n}}e.create=t;function i(r){const n=r;return n!=null&&ye.is(n.range)&&R.string(n.text)}e.is=i})(ei||(ei={}));var ti;(function(e){function t(r,n,a){return{range:r,variableName:n,caseSensitiveLookup:a}}e.create=t;function i(r){const n=r;return n!=null&&ye.is(n.range)&&R.boolean(n.caseSensitiveLookup)&&(R.string(n.variableName)||n.variableName===void 0)}e.is=i})(ti||(ti={}));var ni;(function(e){function t(r,n){return{range:r,expression:n}}e.create=t;function i(r){const n=r;return n!=null&&ye.is(n.range)&&(R.string(n.expression)||n.expression===void 0)}e.is=i})(ni||(ni={}));var ri;(function(e){function t(r,n){return{frameId:r,stoppedLocation:n}}e.create=t;function i(r){const n=r;return R.defined(n)&&ye.is(r.stoppedLocation)}e.is=i})(ri||(ri={}));var er;(function(e){e.Type=1,e.Parameter=2;function t(i){return i===1||i===2}e.is=t})(er||(er={}));var tr;(function(e){function t(r){return{value:r}}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&(n.tooltip===void 0||R.string(n.tooltip)||Jt.is(n.tooltip))&&(n.location===void 0||Sn.is(n.location))&&(n.command===void 0||xt.is(n.command))}e.is=i})(tr||(tr={}));var ii;(function(e){function t(r,n,a){const u={position:r,label:n};return a!==void 0&&(u.kind=a),u}e.create=t;function i(r){const n=r;return R.objectLiteral(n)&&Je.is(n.position)&&(R.string(n.label)||R.typedArray(n.label,tr.is))&&(n.kind===void 0||er.is(n.kind))&&n.textEdits===void 0||R.typedArray(n.textEdits,rt.is)&&(n.tooltip===void 0||R.string(n.tooltip)||Jt.is(n.tooltip))&&(n.paddingLeft===void 0||R.boolean(n.paddingLeft))&&(n.paddingRight===void 0||R.boolean(n.paddingRight))}e.is=i})(ii||(ii={}));var oi;(function(e){function t(i){return{kind:"snippet",value:i}}e.createSnippet=t})(oi||(oi={}));var si;(function(e){function t(i,r,n,a){return{insertText:i,filterText:r,range:n,command:a}}e.create=t})(si||(si={}));var ai;(function(e){function t(i){return{items:i}}e.create=t})(ai||(ai={}));var ci;(function(e){e.Invoked=0,e.Automatic=1})(ci||(ci={}));var ui;(function(e){function t(i,r){return{range:i,text:r}}e.create=t})(ui||(ui={}));var li;(function(e){function t(i,r){return{triggerKind:i,selectedCompletionInfo:r}}e.create=t})(li||(li={}));var di;(function(e){function t(i){const r=i;return R.objectLiteral(r)&&Xn.is(r.uri)&&R.string(r.name)}e.is=t})(di||(di={}));const gs=[`
`,`\r
`,"\r"];var fi;(function(e){function t(a,u,c,l){return new ps(a,u,c,l)}e.create=t;function i(a){let u=a;return!!(R.defined(u)&&R.string(u.uri)&&(R.undefined(u.languageId)||R.string(u.languageId))&&R.uinteger(u.lineCount)&&R.func(u.getText)&&R.func(u.positionAt)&&R.func(u.offsetAt))}e.is=i;function r(a,u){let c=a.getText(),l=n(u,(m,b)=>{let T=m.range.start.line-b.range.start.line;return T===0?m.range.start.character-b.range.start.character:T}),g=c.length;for(let m=l.length-1;m>=0;m--){let b=l[m],T=a.offsetAt(b.range.start),y=a.offsetAt(b.range.end);if(y<=g)c=c.substring(0,T)+b.newText+c.substring(y,c.length);else throw new Error("Overlapping edit");g=T}return c}e.applyEdits=r;function n(a,u){if(a.length<=1)return a;const c=a.length/2|0,l=a.slice(0,c),g=a.slice(c);n(l,u),n(g,u);let m=0,b=0,T=0;for(;m<l.length&&b<g.length;)u(l[m],g[b])<=0?a[T++]=l[m++]:a[T++]=g[b++];for(;m<l.length;)a[T++]=l[m++];for(;b<g.length;)a[T++]=g[b++];return a}})(fi||(fi={}));class ps{constructor(t,i,r,n){this._uri=t,this._languageId=i,this._version=r,this._content=n,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let i=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(i,r)}return this._content}update(t,i){this._content=t.text,this._version=i,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let t=[],i=this._content,r=!0;for(let n=0;n<i.length;n++){r&&(t.push(n),r=!1);let a=i.charAt(n);r=a==="\r"||a===`
`,a==="\r"&&n+1<i.length&&i.charAt(n+1)===`
`&&n++}r&&i.length>0&&t.push(i.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let i=this.getLineOffsets(),r=0,n=i.length;if(n===0)return Je.create(0,t);for(;r<n;){let u=Math.floor((r+n)/2);i[u]>t?n=u:r=u+1}let a=r-1;return Je.create(a,t-i[a])}offsetAt(t){let i=this.getLineOffsets();if(t.line>=i.length)return this._content.length;if(t.line<0)return 0;let r=i[t.line],n=t.line+1<i.length?i[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,n),r)}get lineCount(){return this.getLineOffsets().length}}var R;(function(e){const t=Object.prototype.toString;function i(y){return typeof y<"u"}e.defined=i;function r(y){return typeof y>"u"}e.undefined=r;function n(y){return y===!0||y===!1}e.boolean=n;function a(y){return t.call(y)==="[object String]"}e.string=a;function u(y){return t.call(y)==="[object Number]"}e.number=u;function c(y,S,F){return t.call(y)==="[object Number]"&&S<=y&&y<=F}e.numberRange=c;function l(y){return t.call(y)==="[object Number]"&&-2147483648<=y&&y<=2147483647}e.integer=l;function g(y){return t.call(y)==="[object Number]"&&0<=y&&y<=2147483647}e.uinteger=g;function m(y){return t.call(y)==="[object Function]"}e.func=m;function b(y){return y!==null&&typeof y=="object"}e.objectLiteral=b;function T(y,S){return Array.isArray(y)&&y.every(S)}e.typedArray=T})(R||(R={}));var ms=Object.freeze({__proto__:null,get AnnotatedTextEdit(){return bt},get ChangeAnnotation(){return Bt},get ChangeAnnotationIdentifier(){return Ne},get CodeAction(){return Vr},get CodeActionContext(){return zr},get CodeActionKind(){return Ur},get CodeActionTriggerKind(){return Fn},get CodeDescription(){return Rr},get CodeLens(){return Jr},get Color(){return Yn},get ColorInformation(){return mr},get ColorPresentation(){return yr},get Command(){return xt},get CompletionItem(){return Nr},get CompletionItemKind(){return kr},get CompletionItemLabelDetails(){return Mr},get CompletionItemTag(){return Sr},get CompletionList(){return Fr},get CreateFile(){return Ut},get DeleteFile(){return Vt},get Diagnostic(){return qn},get DiagnosticRelatedInformation(){return Qn},get DiagnosticSeverity(){return wr},get DiagnosticTag(){return vr},get DocumentHighlight(){return Lr},get DocumentHighlightKind(){return jr},get DocumentLink(){return Xr},get DocumentSymbol(){return Hr},get DocumentUri(){return hr},EOL:gs,get FoldingRange(){return br},get FoldingRangeKind(){return _r},get FormattingOptions(){return Gr},get Hover(){return Or},get InlayHint(){return ii},get InlayHintKind(){return er},get InlayHintLabelPart(){return tr},get InlineCompletionContext(){return li},get InlineCompletionItem(){return si},get InlineCompletionList(){return ai},get InlineCompletionTriggerKind(){return ci},get InlineValueContext(){return ri},get InlineValueEvaluatableExpression(){return ni},get InlineValueText(){return ei},get InlineValueVariableLookup(){return ti},get InsertReplaceEdit(){return qr},get InsertTextFormat(){return Cr},get InsertTextMode(){return Er},get Location(){return Sn},get LocationLink(){return pr},get MarkedString(){return Nn},get MarkupContent(){return Jt},get MarkupKind(){return Kn},get OptionalVersionedTextDocumentIdentifier(){return Mn},get ParameterInformation(){return Ir},get Position(){return Je},get Range(){return ye},get RenameFile(){return zt},get SelectedCompletionInfo(){return ui},get SelectionRange(){return Yr},get SemanticTokenModifiers(){return Zr},get SemanticTokenTypes(){return Qr},get SemanticTokens(){return Kr},get SignatureInformation(){return Ar},get StringValue(){return oi},get SymbolInformation(){return Wr},get SymbolKind(){return Br},get SymbolTag(){return xr},get TextDocument(){return fi},get TextDocumentEdit(){return En},get TextDocumentIdentifier(){return Dr},get TextDocumentItem(){return Pr},get TextEdit(){return rt},get URI(){return Xn},get VersionedTextDocumentIdentifier(){return Tr},WorkspaceChange:hs,get WorkspaceEdit(){return Zn},get WorkspaceFolder(){return di},get WorkspaceSymbol(){return $r},get integer(){return gr},get uinteger(){return Cn}}),pi=os(ms),je={},ji;function pe(){if(ji)return je;ji=1,Object.defineProperty(je,"__esModule",{value:!0}),je.ProtocolNotificationType=je.ProtocolNotificationType0=je.ProtocolRequestType=je.ProtocolRequestType0=je.RegistrationType=je.MessageDirection=void 0;const e=Gt();var t;(function(c){c.clientToServer="clientToServer",c.serverToClient="serverToClient",c.both="both"})(t||(je.MessageDirection=t={}));class i{constructor(l){this.method=l}}je.RegistrationType=i;class r extends e.RequestType0{constructor(l){super(l)}}je.ProtocolRequestType0=r;class n extends e.RequestType{constructor(l){super(l,e.ParameterStructures.byName)}}je.ProtocolRequestType=n;class a extends e.NotificationType0{constructor(l){super(l)}}je.ProtocolNotificationType0=a;class u extends e.NotificationType{constructor(l){super(l,e.ParameterStructures.byName)}}return je.ProtocolNotificationType=u,je}var sr={},Re={},Li;function mi(){if(Li)return Re;Li=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.objectLiteral=Re.typedArray=Re.stringArray=Re.array=Re.func=Re.error=Re.number=Re.string=Re.boolean=void 0;function e(g){return g===!0||g===!1}Re.boolean=e;function t(g){return typeof g=="string"||g instanceof String}Re.string=t;function i(g){return typeof g=="number"||g instanceof Number}Re.number=i;function r(g){return g instanceof Error}Re.error=r;function n(g){return typeof g=="function"}Re.func=n;function a(g){return Array.isArray(g)}Re.array=a;function u(g){return a(g)&&g.every(m=>t(m))}Re.stringArray=u;function c(g,m){return Array.isArray(g)&&g.every(m)}Re.typedArray=c;function l(g){return g!==null&&typeof g=="object"}return Re.objectLiteral=l,Re}var Kt={},Bi;function ys(){if(Bi)return Kt;Bi=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.ImplementationRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/implementation",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(Kt.ImplementationRequest=t={})),Kt}var en={},xi;function _s(){if(xi)return en;xi=1,Object.defineProperty(en,"__esModule",{value:!0}),en.TypeDefinitionRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/typeDefinition",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(en.TypeDefinitionRequest=t={})),en}var Nt={},Wi;function bs(){if(Wi)return Nt;Wi=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.DidChangeWorkspaceFoldersNotification=Nt.WorkspaceFoldersRequest=void 0;const e=pe();var t;(function(r){r.method="workspace/workspaceFolders",r.messageDirection=e.MessageDirection.serverToClient,r.type=new e.ProtocolRequestType0(r.method)})(t||(Nt.WorkspaceFoldersRequest=t={}));var i;return function(r){r.method="workspace/didChangeWorkspaceFolders",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolNotificationType(r.method)}(i||(Nt.DidChangeWorkspaceFoldersNotification=i={})),Nt}var tn={},$i;function ws(){if($i)return tn;$i=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.ConfigurationRequest=void 0;const e=pe();var t;return function(i){i.method="workspace/configuration",i.messageDirection=e.MessageDirection.serverToClient,i.type=new e.ProtocolRequestType(i.method)}(t||(tn.ConfigurationRequest=t={})),tn}var Ft={},Hi;function vs(){if(Hi)return Ft;Hi=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.ColorPresentationRequest=Ft.DocumentColorRequest=void 0;const e=pe();var t;(function(r){r.method="textDocument/documentColor",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method)})(t||(Ft.DocumentColorRequest=t={}));var i;return function(r){r.method="textDocument/colorPresentation",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method)}(i||(Ft.ColorPresentationRequest=i={})),Ft}var Ot={},Ui;function Rs(){if(Ui)return Ot;Ui=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.FoldingRangeRefreshRequest=Ot.FoldingRangeRequest=void 0;const e=pe();var t;(function(r){r.method="textDocument/foldingRange",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method)})(t||(Ot.FoldingRangeRequest=t={}));var i;return function(r){r.method="workspace/foldingRange/refresh",r.messageDirection=e.MessageDirection.serverToClient,r.type=new e.ProtocolRequestType0(r.method)}(i||(Ot.FoldingRangeRefreshRequest=i={})),Ot}var nn={},zi;function Ds(){if(zi)return nn;zi=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.DeclarationRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/declaration",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(nn.DeclarationRequest=t={})),nn}var rn={},Vi;function Ts(){if(Vi)return rn;Vi=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.SelectionRangeRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/selectionRange",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(rn.SelectionRangeRequest=t={})),rn}var ft={},Ji;function Ps(){if(Ji)return ft;Ji=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.WorkDoneProgressCancelNotification=ft.WorkDoneProgressCreateRequest=ft.WorkDoneProgress=void 0;const e=Gt(),t=pe();var i;(function(a){a.type=new e.ProgressType;function u(c){return c===a.type}a.is=u})(i||(ft.WorkDoneProgress=i={}));var r;(function(a){a.method="window/workDoneProgress/create",a.messageDirection=t.MessageDirection.serverToClient,a.type=new t.ProtocolRequestType(a.method)})(r||(ft.WorkDoneProgressCreateRequest=r={}));var n;return function(a){a.method="window/workDoneProgress/cancel",a.messageDirection=t.MessageDirection.clientToServer,a.type=new t.ProtocolNotificationType(a.method)}(n||(ft.WorkDoneProgressCancelNotification=n={})),ft}var ht={},Gi;function ks(){if(Gi)return ht;Gi=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.CallHierarchyOutgoingCallsRequest=ht.CallHierarchyIncomingCallsRequest=ht.CallHierarchyPrepareRequest=void 0;const e=pe();var t;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t||(ht.CallHierarchyPrepareRequest=t={}));var i;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(i||(ht.CallHierarchyIncomingCallsRequest=i={}));var r;return function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(r||(ht.CallHierarchyOutgoingCallsRequest=r={})),ht}var Le={},Xi;function Cs(){if(Xi)return Le;Xi=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.SemanticTokensRefreshRequest=Le.SemanticTokensRangeRequest=Le.SemanticTokensDeltaRequest=Le.SemanticTokensRequest=Le.SemanticTokensRegistrationType=Le.TokenFormat=void 0;const e=pe();var t;(function(c){c.Relative="relative"})(t||(Le.TokenFormat=t={}));var i;(function(c){c.method="textDocument/semanticTokens",c.type=new e.RegistrationType(c.method)})(i||(Le.SemanticTokensRegistrationType=i={}));var r;(function(c){c.method="textDocument/semanticTokens/full",c.messageDirection=e.MessageDirection.clientToServer,c.type=new e.ProtocolRequestType(c.method),c.registrationMethod=i.method})(r||(Le.SemanticTokensRequest=r={}));var n;(function(c){c.method="textDocument/semanticTokens/full/delta",c.messageDirection=e.MessageDirection.clientToServer,c.type=new e.ProtocolRequestType(c.method),c.registrationMethod=i.method})(n||(Le.SemanticTokensDeltaRequest=n={}));var a;(function(c){c.method="textDocument/semanticTokens/range",c.messageDirection=e.MessageDirection.clientToServer,c.type=new e.ProtocolRequestType(c.method),c.registrationMethod=i.method})(a||(Le.SemanticTokensRangeRequest=a={}));var u;return function(c){c.method="workspace/semanticTokens/refresh",c.messageDirection=e.MessageDirection.serverToClient,c.type=new e.ProtocolRequestType0(c.method)}(u||(Le.SemanticTokensRefreshRequest=u={})),Le}var on={},Yi;function Ss(){if(Yi)return on;Yi=1,Object.defineProperty(on,"__esModule",{value:!0}),on.ShowDocumentRequest=void 0;const e=pe();var t;return function(i){i.method="window/showDocument",i.messageDirection=e.MessageDirection.serverToClient,i.type=new e.ProtocolRequestType(i.method)}(t||(on.ShowDocumentRequest=t={})),on}var sn={},Qi;function qs(){if(Qi)return sn;Qi=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.LinkedEditingRangeRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/linkedEditingRange",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(sn.LinkedEditingRangeRequest=t={})),sn}var Me={},Zi;function Es(){if(Zi)return Me;Zi=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.WillDeleteFilesRequest=Me.DidDeleteFilesNotification=Me.DidRenameFilesNotification=Me.WillRenameFilesRequest=Me.DidCreateFilesNotification=Me.WillCreateFilesRequest=Me.FileOperationPatternKind=void 0;const e=pe();var t;(function(l){l.file="file",l.folder="folder"})(t||(Me.FileOperationPatternKind=t={}));var i;(function(l){l.method="workspace/willCreateFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolRequestType(l.method)})(i||(Me.WillCreateFilesRequest=i={}));var r;(function(l){l.method="workspace/didCreateFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolNotificationType(l.method)})(r||(Me.DidCreateFilesNotification=r={}));var n;(function(l){l.method="workspace/willRenameFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolRequestType(l.method)})(n||(Me.WillRenameFilesRequest=n={}));var a;(function(l){l.method="workspace/didRenameFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolNotificationType(l.method)})(a||(Me.DidRenameFilesNotification=a={}));var u;(function(l){l.method="workspace/didDeleteFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolNotificationType(l.method)})(u||(Me.DidDeleteFilesNotification=u={}));var c;return function(l){l.method="workspace/willDeleteFiles",l.messageDirection=e.MessageDirection.clientToServer,l.type=new e.ProtocolRequestType(l.method)}(c||(Me.WillDeleteFilesRequest=c={})),Me}var gt={},Ki;function Ms(){if(Ki)return gt;Ki=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.MonikerRequest=gt.MonikerKind=gt.UniquenessLevel=void 0;const e=pe();var t;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(t||(gt.UniquenessLevel=t={}));var i;(function(n){n.$import="import",n.$export="export",n.local="local"})(i||(gt.MonikerKind=i={}));var r;return function(n){n.method="textDocument/moniker",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(r||(gt.MonikerRequest=r={})),gt}var pt={},eo;function Ns(){if(eo)return pt;eo=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.TypeHierarchySubtypesRequest=pt.TypeHierarchySupertypesRequest=pt.TypeHierarchyPrepareRequest=void 0;const e=pe();var t;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t||(pt.TypeHierarchyPrepareRequest=t={}));var i;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(i||(pt.TypeHierarchySupertypesRequest=i={}));var r;return function(n){n.method="typeHierarchy/subtypes",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)}(r||(pt.TypeHierarchySubtypesRequest=r={})),pt}var It={},to;function Fs(){if(to)return It;to=1,Object.defineProperty(It,"__esModule",{value:!0}),It.InlineValueRefreshRequest=It.InlineValueRequest=void 0;const e=pe();var t;(function(r){r.method="textDocument/inlineValue",r.messageDirection=e.MessageDirection.clientToServer,r.type=new e.ProtocolRequestType(r.method)})(t||(It.InlineValueRequest=t={}));var i;return function(r){r.method="workspace/inlineValue/refresh",r.messageDirection=e.MessageDirection.serverToClient,r.type=new e.ProtocolRequestType0(r.method)}(i||(It.InlineValueRefreshRequest=i={})),It}var mt={},no;function Os(){if(no)return mt;no=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.InlayHintRefreshRequest=mt.InlayHintResolveRequest=mt.InlayHintRequest=void 0;const e=pe();var t;(function(n){n.method="textDocument/inlayHint",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(t||(mt.InlayHintRequest=t={}));var i;(function(n){n.method="inlayHint/resolve",n.messageDirection=e.MessageDirection.clientToServer,n.type=new e.ProtocolRequestType(n.method)})(i||(mt.InlayHintResolveRequest=i={}));var r;return function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=e.MessageDirection.serverToClient,n.type=new e.ProtocolRequestType0(n.method)}(r||(mt.InlayHintRefreshRequest=r={})),mt}var He={},ro;function Is(){if(ro)return He;ro=1,Object.defineProperty(He,"__esModule",{value:!0}),He.DiagnosticRefreshRequest=He.WorkspaceDiagnosticRequest=He.DocumentDiagnosticRequest=He.DocumentDiagnosticReportKind=He.DiagnosticServerCancellationData=void 0;const e=Gt(),t=mi(),i=pe();var r;(function(l){function g(m){const b=m;return b&&t.boolean(b.retriggerRequest)}l.is=g})(r||(He.DiagnosticServerCancellationData=r={}));var n;(function(l){l.Full="full",l.Unchanged="unchanged"})(n||(He.DocumentDiagnosticReportKind=n={}));var a;(function(l){l.method="textDocument/diagnostic",l.messageDirection=i.MessageDirection.clientToServer,l.type=new i.ProtocolRequestType(l.method),l.partialResult=new e.ProgressType})(a||(He.DocumentDiagnosticRequest=a={}));var u;(function(l){l.method="workspace/diagnostic",l.messageDirection=i.MessageDirection.clientToServer,l.type=new i.ProtocolRequestType(l.method),l.partialResult=new e.ProgressType})(u||(He.WorkspaceDiagnosticRequest=u={}));var c;return function(l){l.method="workspace/diagnostic/refresh",l.messageDirection=i.MessageDirection.serverToClient,l.type=new i.ProtocolRequestType0(l.method)}(c||(He.DiagnosticRefreshRequest=c={})),He}var ge={},io;function As(){if(io)return ge;io=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.DidCloseNotebookDocumentNotification=ge.DidSaveNotebookDocumentNotification=ge.DidChangeNotebookDocumentNotification=ge.NotebookCellArrayChange=ge.DidOpenNotebookDocumentNotification=ge.NotebookDocumentSyncRegistrationType=ge.NotebookDocument=ge.NotebookCell=ge.ExecutionSummary=ge.NotebookCellKind=void 0;const e=pi,t=mi(),i=pe();var r;(function(y){y.Markup=1,y.Code=2;function S(F){return F===1||F===2}y.is=S})(r||(ge.NotebookCellKind=r={}));var n;(function(y){function S(N,E){const O={executionOrder:N};return(E===!0||E===!1)&&(O.success=E),O}y.create=S;function F(N){const E=N;return t.objectLiteral(E)&&e.uinteger.is(E.executionOrder)&&(E.success===void 0||t.boolean(E.success))}y.is=F;function B(N,E){return N===E?!0:N==null||E===null||E===void 0?!1:N.executionOrder===E.executionOrder&&N.success===E.success}y.equals=B})(n||(ge.ExecutionSummary=n={}));var a;(function(y){function S(E,O){return{kind:E,document:O}}y.create=S;function F(E){const O=E;return t.objectLiteral(O)&&r.is(O.kind)&&e.DocumentUri.is(O.document)&&(O.metadata===void 0||t.objectLiteral(O.metadata))}y.is=F;function B(E,O){const Q=new Set;return E.document!==O.document&&Q.add("document"),E.kind!==O.kind&&Q.add("kind"),E.executionSummary!==O.executionSummary&&Q.add("executionSummary"),(E.metadata!==void 0||O.metadata!==void 0)&&!N(E.metadata,O.metadata)&&Q.add("metadata"),(E.executionSummary!==void 0||O.executionSummary!==void 0)&&!n.equals(E.executionSummary,O.executionSummary)&&Q.add("executionSummary"),Q}y.diff=B;function N(E,O){if(E===O)return!0;if(E==null||O===null||O===void 0||typeof E!=typeof O||typeof E!="object")return!1;const Q=Array.isArray(E),Y=Array.isArray(O);if(Q!==Y)return!1;if(Q&&Y){if(E.length!==O.length)return!1;for(let V=0;V<E.length;V++)if(!N(E[V],O[V]))return!1}if(t.objectLiteral(E)&&t.objectLiteral(O)){const V=Object.keys(E),X=Object.keys(O);if(V.length!==X.length||(V.sort(),X.sort(),!N(V,X)))return!1;for(let te=0;te<V.length;te++){const de=V[te];if(!N(E[de],O[de]))return!1}}return!0}})(a||(ge.NotebookCell=a={}));var u;(function(y){function S(B,N,E,O){return{uri:B,notebookType:N,version:E,cells:O}}y.create=S;function F(B){const N=B;return t.objectLiteral(N)&&t.string(N.uri)&&e.integer.is(N.version)&&t.typedArray(N.cells,a.is)}y.is=F})(u||(ge.NotebookDocument=u={}));var c;(function(y){y.method="notebookDocument/sync",y.messageDirection=i.MessageDirection.clientToServer,y.type=new i.RegistrationType(y.method)})(c||(ge.NotebookDocumentSyncRegistrationType=c={}));var l;(function(y){y.method="notebookDocument/didOpen",y.messageDirection=i.MessageDirection.clientToServer,y.type=new i.ProtocolNotificationType(y.method),y.registrationMethod=c.method})(l||(ge.DidOpenNotebookDocumentNotification=l={}));var g;(function(y){function S(B){const N=B;return t.objectLiteral(N)&&e.uinteger.is(N.start)&&e.uinteger.is(N.deleteCount)&&(N.cells===void 0||t.typedArray(N.cells,a.is))}y.is=S;function F(B,N,E){const O={start:B,deleteCount:N};return E!==void 0&&(O.cells=E),O}y.create=F})(g||(ge.NotebookCellArrayChange=g={}));var m;(function(y){y.method="notebookDocument/didChange",y.messageDirection=i.MessageDirection.clientToServer,y.type=new i.ProtocolNotificationType(y.method),y.registrationMethod=c.method})(m||(ge.DidChangeNotebookDocumentNotification=m={}));var b;(function(y){y.method="notebookDocument/didSave",y.messageDirection=i.MessageDirection.clientToServer,y.type=new i.ProtocolNotificationType(y.method),y.registrationMethod=c.method})(b||(ge.DidSaveNotebookDocumentNotification=b={}));var T;return function(y){y.method="notebookDocument/didClose",y.messageDirection=i.MessageDirection.clientToServer,y.type=new i.ProtocolNotificationType(y.method),y.registrationMethod=c.method}(T||(ge.DidCloseNotebookDocumentNotification=T={})),ge}var an={},oo;function js(){if(oo)return an;oo=1,Object.defineProperty(an,"__esModule",{value:!0}),an.InlineCompletionRequest=void 0;const e=pe();var t;return function(i){i.method="textDocument/inlineCompletion",i.messageDirection=e.MessageDirection.clientToServer,i.type=new e.ProtocolRequestType(i.method)}(t||(an.InlineCompletionRequest=t={})),an}var so;function Ls(){return so||(so=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRefreshRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangesFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.InlineCompletionRequest=e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=pe(),i=pi,r=mi(),n=ys();Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return n.ImplementationRequest}});const a=_s();Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const u=bs();Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return u.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return u.DidChangeWorkspaceFoldersNotification}});const c=ws();Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});const l=vs();Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return l.ColorPresentationRequest}});const g=Rs();Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return g.FoldingRangeRequest}}),Object.defineProperty(e,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return g.FoldingRangeRefreshRequest}});const m=Ds();Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return m.DeclarationRequest}});const b=Ts();Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return b.SelectionRangeRequest}});const T=Ps();Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return T.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return T.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return T.WorkDoneProgressCancelNotification}});const y=ks();Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return y.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return y.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return y.CallHierarchyPrepareRequest}});const S=Cs();Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return S.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return S.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return S.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return S.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return S.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return S.SemanticTokensRegistrationType}});const F=Ss();Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return F.ShowDocumentRequest}});const B=qs();Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return B.LinkedEditingRangeRequest}});const N=Es();Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return N.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return N.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return N.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return N.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return N.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return N.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return N.WillDeleteFilesRequest}});const E=Ms();Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return E.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return E.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return E.MonikerRequest}});const O=Ns();Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return O.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return O.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return O.TypeHierarchySupertypesRequest}});const Q=Fs();Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return Q.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Q.InlineValueRefreshRequest}});const Y=Os();Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return Y.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return Y.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return Y.InlayHintRefreshRequest}});const V=Is();Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return V.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return V.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return V.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return V.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return V.DiagnosticRefreshRequest}});const X=As();Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return X.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return X.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return X.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return X.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return X.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return X.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return X.DidCloseNotebookDocumentNotification}});const te=js();Object.defineProperty(e,"InlineCompletionRequest",{enumerable:!0,get:function(){return te.InlineCompletionRequest}});var de;(function(h){function be(we){const z=we;return r.string(z)||r.string(z.language)||r.string(z.scheme)||r.string(z.pattern)}h.is=be})(de||(e.TextDocumentFilter=de={}));var Fe;(function(h){function be(we){const z=we;return r.objectLiteral(z)&&(r.string(z.notebookType)||r.string(z.scheme)||r.string(z.pattern))}h.is=be})(Fe||(e.NotebookDocumentFilter=Fe={}));var fe;(function(h){function be(we){const z=we;return r.objectLiteral(z)&&(r.string(z.notebook)||Fe.is(z.notebook))&&(z.language===void 0||r.string(z.language))}h.is=be})(fe||(e.NotebookCellTextDocumentFilter=fe={}));var H;(function(h){function be(we){if(!Array.isArray(we))return!1;for(let z of we)if(!r.string(z)&&!de.is(z)&&!fe.is(z))return!1;return!0}h.is=be})(H||(e.DocumentSelector=H={}));var D;(function(h){h.method="client/registerCapability",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolRequestType(h.method)})(D||(e.RegistrationRequest=D={}));var A;(function(h){h.method="client/unregisterCapability",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolRequestType(h.method)})(A||(e.UnregistrationRequest=A={}));var U;(function(h){h.Create="create",h.Rename="rename",h.Delete="delete"})(U||(e.ResourceOperationKind=U={}));var I;(function(h){h.Abort="abort",h.Transactional="transactional",h.TextOnlyTransactional="textOnlyTransactional",h.Undo="undo"})(I||(e.FailureHandlingKind=I={}));var J;(function(h){h.UTF8="utf-8",h.UTF16="utf-16",h.UTF32="utf-32"})(J||(e.PositionEncodingKind=J={}));var it;(function(h){function be(we){const z=we;return z&&r.string(z.id)&&z.id.length>0}h.hasId=be})(it||(e.StaticRegistrationOptions=it={}));var ot;(function(h){function be(we){const z=we;return z&&(z.documentSelector===null||H.is(z.documentSelector))}h.is=be})(ot||(e.TextDocumentRegistrationOptions=ot={}));var st;(function(h){function be(z){const p=z;return r.objectLiteral(p)&&(p.workDoneProgress===void 0||r.boolean(p.workDoneProgress))}h.is=be;function we(z){const p=z;return p&&r.boolean(p.workDoneProgress)}h.hasWorkDoneProgress=we})(st||(e.WorkDoneProgressOptions=st={}));var ne;(function(h){h.method="initialize",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(ne||(e.InitializeRequest=ne={}));var ue;(function(h){h.unknownProtocolVersion=1})(ue||(e.InitializeErrorCodes=ue={}));var xe;(function(h){h.method="initialized",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(xe||(e.InitializedNotification=xe={}));var Be;(function(h){h.method="shutdown",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType0(h.method)})(Be||(e.ShutdownRequest=Be={}));var We;(function(h){h.method="exit",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType0(h.method)})(We||(e.ExitNotification=We={}));var $e;(function(h){h.method="workspace/didChangeConfiguration",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})($e||(e.DidChangeConfigurationNotification=$e={}));var ze;(function(h){h.Error=1,h.Warning=2,h.Info=3,h.Log=4,h.Debug=5})(ze||(e.MessageType=ze={}));var Pe;(function(h){h.method="window/showMessage",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolNotificationType(h.method)})(Pe||(e.ShowMessageNotification=Pe={}));var Oe;(function(h){h.method="window/showMessageRequest",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolRequestType(h.method)})(Oe||(e.ShowMessageRequest=Oe={}));var W;(function(h){h.method="window/logMessage",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolNotificationType(h.method)})(W||(e.LogMessageNotification=W={}));var w;(function(h){h.method="telemetry/event",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolNotificationType(h.method)})(w||(e.TelemetryEventNotification=w={}));var k;(function(h){h.None=0,h.Full=1,h.Incremental=2})(k||(e.TextDocumentSyncKind=k={}));var j;(function(h){h.method="textDocument/didOpen",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(j||(e.DidOpenTextDocumentNotification=j={}));var P;(function(h){function be(z){let p=z;return p!=null&&typeof p.text=="string"&&p.range!==void 0&&(p.rangeLength===void 0||typeof p.rangeLength=="number")}h.isIncremental=be;function we(z){let p=z;return p!=null&&typeof p.text=="string"&&p.range===void 0&&p.rangeLength===void 0}h.isFull=we})(P||(e.TextDocumentContentChangeEvent=P={}));var oe;(function(h){h.method="textDocument/didChange",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(oe||(e.DidChangeTextDocumentNotification=oe={}));var Se;(function(h){h.method="textDocument/didClose",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(Se||(e.DidCloseTextDocumentNotification=Se={}));var Ie;(function(h){h.method="textDocument/didSave",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(Ie||(e.DidSaveTextDocumentNotification=Ie={}));var Ze;(function(h){h.Manual=1,h.AfterDelay=2,h.FocusOut=3})(Ze||(e.TextDocumentSaveReason=Ze={}));var Ke;(function(h){h.method="textDocument/willSave",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(Ke||(e.WillSaveTextDocumentNotification=Ke={}));var Ge;(function(h){h.method="textDocument/willSaveWaitUntil",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Ge||(e.WillSaveTextDocumentWaitUntilRequest=Ge={}));var ke;(function(h){h.method="workspace/didChangeWatchedFiles",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolNotificationType(h.method)})(ke||(e.DidChangeWatchedFilesNotification=ke={}));var _e;(function(h){h.Created=1,h.Changed=2,h.Deleted=3})(_e||(e.FileChangeType=_e={}));var et;(function(h){function be(we){const z=we;return r.objectLiteral(z)&&(i.URI.is(z.baseUri)||i.WorkspaceFolder.is(z.baseUri))&&r.string(z.pattern)}h.is=be})(et||(e.RelativePattern=et={}));var Xe;(function(h){h.Create=1,h.Change=2,h.Delete=4})(Xe||(e.WatchKind=Xe={}));var qe;(function(h){h.method="textDocument/publishDiagnostics",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolNotificationType(h.method)})(qe||(e.PublishDiagnosticsNotification=qe={}));var Ye;(function(h){h.Invoked=1,h.TriggerCharacter=2,h.TriggerForIncompleteCompletions=3})(Ye||(e.CompletionTriggerKind=Ye={}));var d;(function(h){h.method="textDocument/completion",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(d||(e.CompletionRequest=d={}));var o;(function(h){h.method="completionItem/resolve",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(o||(e.CompletionResolveRequest=o={}));var s;(function(h){h.method="textDocument/hover",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(s||(e.HoverRequest=s={}));var f;(function(h){h.Invoked=1,h.TriggerCharacter=2,h.ContentChange=3})(f||(e.SignatureHelpTriggerKind=f={}));var _;(function(h){h.method="textDocument/signatureHelp",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(_||(e.SignatureHelpRequest=_={}));var v;(function(h){h.method="textDocument/definition",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(v||(e.DefinitionRequest=v={}));var C;(function(h){h.method="textDocument/references",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(C||(e.ReferencesRequest=C={}));var G;(function(h){h.method="textDocument/documentHighlight",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(G||(e.DocumentHighlightRequest=G={}));var se;(function(h){h.method="textDocument/documentSymbol",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(se||(e.DocumentSymbolRequest=se={}));var re;(function(h){h.method="textDocument/codeAction",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(re||(e.CodeActionRequest=re={}));var ae;(function(h){h.method="codeAction/resolve",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(ae||(e.CodeActionResolveRequest=ae={}));var ee;(function(h){h.method="workspace/symbol",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(ee||(e.WorkspaceSymbolRequest=ee={}));var An;(function(h){h.method="workspaceSymbol/resolve",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(An||(e.WorkspaceSymbolResolveRequest=An={}));var jn;(function(h){h.method="textDocument/codeLens",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(jn||(e.CodeLensRequest=jn={}));var Qe;(function(h){h.method="codeLens/resolve",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Qe||(e.CodeLensResolveRequest=Qe={}));var Ln;(function(h){h.method="workspace/codeLens/refresh",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolRequestType0(h.method)})(Ln||(e.CodeLensRefreshRequest=Ln={}));var Bn;(function(h){h.method="textDocument/documentLink",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Bn||(e.DocumentLinkRequest=Bn={}));var Dt;(function(h){h.method="documentLink/resolve",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Dt||(e.DocumentLinkResolveRequest=Dt={}));var xn;(function(h){h.method="textDocument/formatting",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(xn||(e.DocumentFormattingRequest=xn={}));var $t;(function(h){h.method="textDocument/rangeFormatting",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})($t||(e.DocumentRangeFormattingRequest=$t={}));var Wn;(function(h){h.method="textDocument/rangesFormatting",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Wn||(e.DocumentRangesFormattingRequest=Wn={}));var at;(function(h){h.method="textDocument/onTypeFormatting",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(at||(e.DocumentOnTypeFormattingRequest=at={}));var wt;(function(h){h.Identifier=1})(wt||(e.PrepareSupportDefaultBehavior=wt={}));var $n;(function(h){h.method="textDocument/rename",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})($n||(e.RenameRequest=$n={}));var Hn;(function(h){h.method="textDocument/prepareRename",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(Hn||(e.PrepareRenameRequest=Hn={}));var vt;(function(h){h.method="workspace/executeCommand",h.messageDirection=t.MessageDirection.clientToServer,h.type=new t.ProtocolRequestType(h.method)})(vt||(e.ExecuteCommandRequest=vt={}));var Xt;(function(h){h.method="workspace/applyEdit",h.messageDirection=t.MessageDirection.serverToClient,h.type=new t.ProtocolRequestType("workspace/applyEdit")})(Xt||(e.ApplyWorkspaceEditRequest=Xt={}))}(sr)),sr}var cn={},ao;function Bs(){if(ao)return cn;ao=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.createProtocolConnection=void 0;const e=Gt();function t(i,r,n,a){return e.ConnectionStrategy.is(a)&&(a={connectionStrategy:a}),(0,e.createMessageConnection)(i,r,n,a)}return cn.createProtocolConnection=t,cn}var co;function xs(){return co||(co=1,function(e){var t=Mt&&Mt.__createBinding||(Object.create?function(a,u,c,l){l===void 0&&(l=c);var g=Object.getOwnPropertyDescriptor(u,c);(!g||("get"in g?!u.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(a,l,g)}:function(a,u,c,l){l===void 0&&(l=c),a[l]=u[c]}),i=Mt&&Mt.__exportStar||function(a,u){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,a,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,i(Gt(),e),i(pi,e),i(pe(),e),i(Ls(),e);var r=Bs();Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}});var n;(function(a){a.lspReservedErrorRangeStart=-32899,a.RequestFailed=-32803,a.ServerCancelled=-32802,a.ContentModified=-32801,a.RequestCancelled=-32800,a.lspReservedErrorRangeEnd=-32800})(n||(e.LSPErrorCodes=n={}))}(Mt)),Mt}var uo;function Te(){return uo||(uo=1,function(e){var t=kt&&kt.__createBinding||(Object.create?function(a,u,c,l){l===void 0&&(l=c);var g=Object.getOwnPropertyDescriptor(u,c);(!g||("get"in g?!u.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(a,l,g)}:function(a,u,c,l){l===void 0&&(l=c),a[l]=u[c]}),i=kt&&kt.__exportStar||function(a,u){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,a,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const r=Ii();i(Ii(),e),i(xs(),e);function n(a,u,c,l){return(0,r.createMessageConnection)(a,u,c,l)}e.createProtocolConnection=n}(kt)),kt}var lo;function Go(){if(lo)return ct;lo=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.SemanticTokensBuilder=ct.SemanticTokensDiff=ct.SemanticTokensFeature=void 0;const e=Te(),t=n=>class extends n{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(e.SemanticTokensRefreshRequest.type),on:a=>{const u=e.SemanticTokensRequest.type;return this.connection.onRequest(u,(c,l)=>a(c,l,this.attachWorkDoneProgress(c),this.attachPartialResultProgress(u,c)))},onDelta:a=>{const u=e.SemanticTokensDeltaRequest.type;return this.connection.onRequest(u,(c,l)=>a(c,l,this.attachWorkDoneProgress(c),this.attachPartialResultProgress(u,c)))},onRange:a=>{const u=e.SemanticTokensRangeRequest.type;return this.connection.onRequest(u,(c,l)=>a(c,l,this.attachWorkDoneProgress(c),this.attachPartialResultProgress(u,c)))}}}};ct.SemanticTokensFeature=t;class i{constructor(a,u){this.originalSequence=a,this.modifiedSequence=u}computeDiff(){const a=this.originalSequence.length,u=this.modifiedSequence.length;let c=0;for(;c<u&&c<a&&this.originalSequence[c]===this.modifiedSequence[c];)c++;if(c<u&&c<a){let l=a-1,g=u-1;for(;l>=c&&g>=c&&this.originalSequence[l]===this.modifiedSequence[g];)l--,g--;(l<c||g<c)&&(l++,g++);const m=l-c+1,b=this.modifiedSequence.slice(c,g+1);return b.length===1&&b[0]===this.originalSequence[l]?[{start:c,deleteCount:m-1}]:[{start:c,deleteCount:m,data:b}]}else return c<u?[{start:c,deleteCount:0,data:this.modifiedSequence.slice(c)}]:c<a?[{start:c,deleteCount:a-c}]:[]}}ct.SemanticTokensDiff=i;class r{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(a,u,c,l,g){let m=a,b=u;this._dataLen>0&&(m-=this._prevLine,m===0&&(b-=this._prevChar)),this._data[this._dataLen++]=m,this._data[this._dataLen++]=b,this._data[this._dataLen++]=c,this._data[this._dataLen++]=l,this._data[this._dataLen++]=g,this._prevLine=a,this._prevChar=u}get id(){return this._id.toString()}previousResult(a){this.id===a&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new i(this._prevData,this._data).computeDiff()}:this.build()}}return ct.SemanticTokensBuilder=r,ct}var un={},fo;function Ws(){if(fo)return un;fo=1,Object.defineProperty(un,"__esModule",{value:!0}),un.InlineCompletionFeature=void 0;const e=Te(),t=i=>class extends i{get inlineCompletion(){return{on:r=>this.connection.onRequest(e.InlineCompletionRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n)))}}};return un.InlineCompletionFeature=t,un}var ln={},ho;function Xo(){if(ho)return ln;ho=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.TextDocuments=void 0;const e=Te();class t{constructor(r){this._configuration=r,this._syncedDocuments=new Map,this._onDidChangeContent=new e.Emitter,this._onDidOpen=new e.Emitter,this._onDidClose=new e.Emitter,this._onDidSave=new e.Emitter,this._onWillSave=new e.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(r){this._willSaveWaitUntil=r}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(r){return this._syncedDocuments.get(r)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(r){r.__textDocumentSync=e.TextDocumentSyncKind.Incremental;const n=[];return n.push(r.onDidOpenTextDocument(a=>{const u=a.textDocument,c=this._configuration.create(u.uri,u.languageId,u.version,u.text);this._syncedDocuments.set(u.uri,c);const l=Object.freeze({document:c});this._onDidOpen.fire(l),this._onDidChangeContent.fire(l)})),n.push(r.onDidChangeTextDocument(a=>{const u=a.textDocument,c=a.contentChanges;if(c.length===0)return;const{version:l}=u;if(l==null)throw new Error(`Received document change event for ${u.uri} without valid version identifier`);let g=this._syncedDocuments.get(u.uri);g!==void 0&&(g=this._configuration.update(g,c,l),this._syncedDocuments.set(u.uri,g),this._onDidChangeContent.fire(Object.freeze({document:g})))})),n.push(r.onDidCloseTextDocument(a=>{let u=this._syncedDocuments.get(a.textDocument.uri);u!==void 0&&(this._syncedDocuments.delete(a.textDocument.uri),this._onDidClose.fire(Object.freeze({document:u})))})),n.push(r.onWillSaveTextDocument(a=>{let u=this._syncedDocuments.get(a.textDocument.uri);u!==void 0&&this._onWillSave.fire(Object.freeze({document:u,reason:a.reason}))})),n.push(r.onWillSaveTextDocumentWaitUntil((a,u)=>{let c=this._syncedDocuments.get(a.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:a.reason}),u):[]})),n.push(r.onDidSaveTextDocument(a=>{let u=this._syncedDocuments.get(a.textDocument.uri);u!==void 0&&this._onDidSave.fire(Object.freeze({document:u}))})),e.Disposable.create(()=>{n.forEach(a=>a.dispose())})}}return ln.TextDocuments=t,ln}var At={},go;function Yo(){if(go)return At;go=1,Object.defineProperty(At,"__esModule",{value:!0}),At.NotebookDocuments=At.NotebookSyncFeature=void 0;const e=Te(),t=Xo(),i=a=>class extends a{get synchronization(){return{onDidOpenNotebookDocument:u=>this.connection.onNotification(e.DidOpenNotebookDocumentNotification.type,c=>{u(c)}),onDidChangeNotebookDocument:u=>this.connection.onNotification(e.DidChangeNotebookDocumentNotification.type,c=>{u(c)}),onDidSaveNotebookDocument:u=>this.connection.onNotification(e.DidSaveNotebookDocumentNotification.type,c=>{u(c)}),onDidCloseNotebookDocument:u=>this.connection.onNotification(e.DidCloseNotebookDocumentNotification.type,c=>{u(c)})}}};At.NotebookSyncFeature=i;class r{onDidOpenTextDocument(u){return this.openHandler=u,e.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(u){this.openHandler&&this.openHandler(u)}onDidChangeTextDocument(u){return this.changeHandler=u,e.Disposable.create(()=>{this.changeHandler=u})}changeTextDocument(u){this.changeHandler&&this.changeHandler(u)}onDidCloseTextDocument(u){return this.closeHandler=u,e.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(u){this.closeHandler&&this.closeHandler(u)}onWillSaveTextDocument(){return r.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return r.NULL_DISPOSE}onDidSaveTextDocument(){return r.NULL_DISPOSE}}r.NULL_DISPOSE=Object.freeze({dispose:()=>{}});class n{constructor(u){u instanceof t.TextDocuments?this._cellTextDocuments=u:this._cellTextDocuments=new t.TextDocuments(u),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new e.Emitter,this._onDidChange=new e.Emitter,this._onDidSave=new e.Emitter,this._onDidClose=new e.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(u){return this._cellTextDocuments.get(u.document)}getNotebookDocument(u){return this.notebookDocuments.get(u)}getNotebookCell(u){const c=this.notebookCellMap.get(u);return c&&c[0]}findNotebookDocumentForCell(u){const c=typeof u=="string"?u:u.document,l=this.notebookCellMap.get(c);return l&&l[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(u){const c=new r,l=[];return l.push(this.cellTextDocuments.listen(c)),l.push(u.notebooks.synchronization.onDidOpenNotebookDocument(g=>{this.notebookDocuments.set(g.notebookDocument.uri,g.notebookDocument);for(const m of g.cellTextDocuments)c.openTextDocument({textDocument:m});this.updateCellMap(g.notebookDocument),this._onDidOpen.fire(g.notebookDocument)})),l.push(u.notebooks.synchronization.onDidChangeNotebookDocument(g=>{const m=this.notebookDocuments.get(g.notebookDocument.uri);if(m===void 0)return;m.version=g.notebookDocument.version;const b=m.metadata;let T=!1;const y=g.change;y.metadata!==void 0&&(T=!0,m.metadata=y.metadata);const S=[],F=[],B=[],N=[];if(y.cells!==void 0){const V=y.cells;if(V.structure!==void 0){const X=V.structure.array;if(m.cells.splice(X.start,X.deleteCount,...X.cells!==void 0?X.cells:[]),V.structure.didOpen!==void 0)for(const te of V.structure.didOpen)c.openTextDocument({textDocument:te}),S.push(te.uri);if(V.structure.didClose)for(const te of V.structure.didClose)c.closeTextDocument({textDocument:te}),F.push(te.uri)}if(V.data!==void 0){const X=new Map(V.data.map(te=>[te.document,te]));for(let te=0;te<=m.cells.length;te++){const de=X.get(m.cells[te].document);if(de!==void 0){const Fe=m.cells.splice(te,1,de);if(B.push({old:Fe[0],new:de}),X.delete(de.document),X.size===0)break}}}if(V.textContent!==void 0)for(const X of V.textContent)c.changeTextDocument({textDocument:X.document,contentChanges:X.changes}),N.push(X.document.uri)}this.updateCellMap(m);const E={notebookDocument:m};T&&(E.metadata={old:b,new:m.metadata});const O=[];for(const V of S)O.push(this.getNotebookCell(V));const Q=[];for(const V of F)Q.push(this.getNotebookCell(V));const Y=[];for(const V of N)Y.push(this.getNotebookCell(V));(O.length>0||Q.length>0||B.length>0||Y.length>0)&&(E.cells={added:O,removed:Q,changed:{data:B,textContent:Y}}),(E.metadata!==void 0||E.cells!==void 0)&&this._onDidChange.fire(E)})),l.push(u.notebooks.synchronization.onDidSaveNotebookDocument(g=>{const m=this.notebookDocuments.get(g.notebookDocument.uri);m!==void 0&&this._onDidSave.fire(m)})),l.push(u.notebooks.synchronization.onDidCloseNotebookDocument(g=>{const m=this.notebookDocuments.get(g.notebookDocument.uri);if(m!==void 0){this._onDidClose.fire(m);for(const b of g.cellTextDocuments)c.closeTextDocument({textDocument:b});this.notebookDocuments.delete(g.notebookDocument.uri);for(const b of m.cells)this.notebookCellMap.delete(b.document)}})),e.Disposable.create(()=>{l.forEach(g=>g.dispose())})}updateCellMap(u){for(const c of u.cells)this.notebookCellMap.set(c.document,[c,u])}}return At.NotebookDocuments=n,At}var K={},De={},po;function Qo(){if(po)return De;po=1,Object.defineProperty(De,"__esModule",{value:!0}),De.thenable=De.typedArray=De.stringArray=De.array=De.func=De.error=De.number=De.string=De.boolean=void 0;function e(g){return g===!0||g===!1}De.boolean=e;function t(g){return typeof g=="string"||g instanceof String}De.string=t;function i(g){return typeof g=="number"||g instanceof Number}De.number=i;function r(g){return g instanceof Error}De.error=r;function n(g){return typeof g=="function"}De.func=n;function a(g){return Array.isArray(g)}De.array=a;function u(g){return a(g)&&g.every(m=>t(m))}De.stringArray=u;function c(g,m){return Array.isArray(g)&&g.every(m)}De.typedArray=c;function l(g){return g&&n(g.then)}return De.thenable=l,De}var Ue={},mo;function Zo(){if(mo)return Ue;mo=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.generateUuid=Ue.parse=Ue.isUUID=Ue.v4=Ue.empty=void 0;class e{constructor(l){this._value=l}asHex(){return this._value}equals(l){return this.asHex()===l.asHex()}}class t extends e{static _oneOf(l){return l[Math.floor(l.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}}t._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t._timeHighBits=["8","9","a","b"],Ue.empty=new e("00000000-0000-0000-0000-000000000000");function i(){return new t}Ue.v4=i;const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function n(c){return r.test(c)}Ue.isUUID=n;function a(c){if(!n(c))throw new Error("invalid uuid");return new e(c)}Ue.parse=a;function u(){return i().asHex()}return Ue.generateUuid=u,Ue}var yt={},yo;function $s(){if(yo)return yt;yo=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.attachPartialResult=yt.ProgressFeature=yt.attachWorkDone=void 0;const e=Te(),t=Zo();class i{constructor(T,y){this._connection=T,this._token=y,i.Instances.set(this._token,this)}begin(T,y,S,F){let B={kind:"begin",title:T,percentage:y,message:S,cancellable:F};this._connection.sendProgress(e.WorkDoneProgress.type,this._token,B)}report(T,y){let S={kind:"report"};typeof T=="number"?(S.percentage=T,y!==void 0&&(S.message=y)):S.message=T,this._connection.sendProgress(e.WorkDoneProgress.type,this._token,S)}done(){i.Instances.delete(this._token),this._connection.sendProgress(e.WorkDoneProgress.type,this._token,{kind:"end"})}}i.Instances=new Map;class r extends i{constructor(T,y){super(T,y),this._source=new e.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class n{constructor(){}begin(){}report(){}done(){}}class a extends n{constructor(){super(),this._source=new e.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}function u(b,T){if(T===void 0||T.workDoneToken===void 0)return new n;const y=T.workDoneToken;return delete T.workDoneToken,new i(b,y)}yt.attachWorkDone=u;const c=b=>class extends b{constructor(){super(),this._progressSupported=!1}initialize(T){super.initialize(T),T?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(e.WorkDoneProgressCancelNotification.type,y=>{let S=i.Instances.get(y.token);(S instanceof r||S instanceof a)&&S.cancel()}))}attachWorkDoneProgress(T){return T===void 0?new n:new i(this.connection,T)}createWorkDoneProgress(){if(this._progressSupported){const T=(0,t.generateUuid)();return this.connection.sendRequest(e.WorkDoneProgressCreateRequest.type,{token:T}).then(()=>new r(this.connection,T))}else return Promise.resolve(new a)}};yt.ProgressFeature=c;var l;(function(b){b.type=new e.ProgressType})(l||(l={}));class g{constructor(T,y){this._connection=T,this._token=y}report(T){this._connection.sendProgress(l.type,this._token,T)}}function m(b,T){if(T===void 0||T.partialResultToken===void 0)return;const y=T.partialResultToken;return delete T.partialResultToken,new g(b,y)}return yt.attachPartialResult=m,yt}var dn={},_o;function Hs(){if(_o)return dn;_o=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.ConfigurationFeature=void 0;const e=Te(),t=Qo(),i=r=>class extends r{getConfiguration(n){return n?t.string(n)?this._getConfiguration({section:n}):this._getConfiguration(n):this._getConfiguration({})}_getConfiguration(n){let a={items:Array.isArray(n)?n:[n]};return this.connection.sendRequest(e.ConfigurationRequest.type,a).then(u=>Array.isArray(u)?Array.isArray(n)?u:u[0]:Array.isArray(n)?[]:null)}};return dn.ConfigurationFeature=i,dn}var fn={},bo;function Us(){if(bo)return fn;bo=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.WorkspaceFoldersFeature=void 0;const e=Te(),t=i=>class extends i{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(r){super.initialize(r);let n=r.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new e.Emitter,this.connection.onNotification(e.DidChangeWorkspaceFoldersNotification.type,a=>{this._onDidChangeWorkspaceFolders.fire(a.event)}))}fillServerCapabilities(r){super.fillServerCapabilities(r);const n=r.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(e.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(e.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};return fn.WorkspaceFoldersFeature=t,fn}var hn={},wo;function zs(){if(wo)return hn;wo=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.CallHierarchyFeature=void 0;const e=Te(),t=i=>class extends i{get callHierarchy(){return{onPrepare:r=>this.connection.onRequest(e.CallHierarchyPrepareRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:r=>{const n=e.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))},onOutgoingCalls:r=>{const n=e.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))}}}};return hn.CallHierarchyFeature=t,hn}var gn={},vo;function Vs(){if(vo)return gn;vo=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.ShowDocumentFeature=void 0;const e=Te(),t=i=>class extends i{showDocument(r){return this.connection.sendRequest(e.ShowDocumentRequest.type,r)}};return gn.ShowDocumentFeature=t,gn}var pn={},Ro;function Js(){if(Ro)return pn;Ro=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.FileOperationsFeature=void 0;const e=Te(),t=i=>class extends i{onDidCreateFiles(r){return this.connection.onNotification(e.DidCreateFilesNotification.type,n=>{r(n)})}onDidRenameFiles(r){return this.connection.onNotification(e.DidRenameFilesNotification.type,n=>{r(n)})}onDidDeleteFiles(r){return this.connection.onNotification(e.DidDeleteFilesNotification.type,n=>{r(n)})}onWillCreateFiles(r){return this.connection.onRequest(e.WillCreateFilesRequest.type,(n,a)=>r(n,a))}onWillRenameFiles(r){return this.connection.onRequest(e.WillRenameFilesRequest.type,(n,a)=>r(n,a))}onWillDeleteFiles(r){return this.connection.onRequest(e.WillDeleteFilesRequest.type,(n,a)=>r(n,a))}};return pn.FileOperationsFeature=t,pn}var mn={},Do;function Gs(){if(Do)return mn;Do=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.LinkedEditingRangeFeature=void 0;const e=Te(),t=i=>class extends i{onLinkedEditingRange(r){return this.connection.onRequest(e.LinkedEditingRangeRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n),void 0))}};return mn.LinkedEditingRangeFeature=t,mn}var yn={},To;function Xs(){if(To)return yn;To=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.TypeHierarchyFeature=void 0;const e=Te(),t=i=>class extends i{get typeHierarchy(){return{onPrepare:r=>this.connection.onRequest(e.TypeHierarchyPrepareRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n),void 0)),onSupertypes:r=>{const n=e.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))},onSubtypes:r=>{const n=e.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))}}}};return yn.TypeHierarchyFeature=t,yn}var _n={},Po;function Ys(){if(Po)return _n;Po=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.InlineValueFeature=void 0;const e=Te(),t=i=>class extends i{get inlineValue(){return{refresh:()=>this.connection.sendRequest(e.InlineValueRefreshRequest.type),on:r=>this.connection.onRequest(e.InlineValueRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n)))}}};return _n.InlineValueFeature=t,_n}var bn={},ko;function Qs(){if(ko)return bn;ko=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.FoldingRangeFeature=void 0;const e=Te(),t=i=>class extends i{get foldingRange(){return{refresh:()=>this.connection.sendRequest(e.FoldingRangeRefreshRequest.type),on:r=>{const n=e.FoldingRangeRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))}}}};return bn.FoldingRangeFeature=t,bn}var wn={},Co;function Zs(){if(Co)return wn;Co=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.InlayHintFeature=void 0;const e=Te(),t=i=>class extends i{get inlayHint(){return{refresh:()=>this.connection.sendRequest(e.InlayHintRefreshRequest.type),on:r=>this.connection.onRequest(e.InlayHintRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n))),resolve:r=>this.connection.onRequest(e.InlayHintResolveRequest.type,(n,a)=>r(n,a))}}};return wn.InlayHintFeature=t,wn}var vn={},So;function Ks(){if(So)return vn;So=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.DiagnosticFeature=void 0;const e=Te(),t=i=>class extends i{get diagnostics(){return{refresh:()=>this.connection.sendRequest(e.DiagnosticRefreshRequest.type),on:r=>this.connection.onRequest(e.DocumentDiagnosticRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(e.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:r=>this.connection.onRequest(e.WorkspaceDiagnosticRequest.type,(n,a)=>r(n,a,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(e.WorkspaceDiagnosticRequest.partialResult,n)))}}};return vn.DiagnosticFeature=t,vn}var Rn={},qo;function ea(){if(qo)return Rn;qo=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.MonikerFeature=void 0;const e=Te(),t=i=>class extends i{get moniker(){return{on:r=>{const n=e.MonikerRequest.type;return this.connection.onRequest(n,(a,u)=>r(a,u,this.attachWorkDoneProgress(a),this.attachPartialResultProgress(n,a)))}}}};return Rn.MonikerFeature=t,Rn}var Eo;function ta(){if(Eo)return K;Eo=1,Object.defineProperty(K,"__esModule",{value:!0}),K.createConnection=K.combineFeatures=K.combineNotebooksFeatures=K.combineLanguagesFeatures=K.combineWorkspaceFeatures=K.combineWindowFeatures=K.combineClientFeatures=K.combineTracerFeatures=K.combineTelemetryFeatures=K.combineConsoleFeatures=K._NotebooksImpl=K._LanguagesImpl=K.BulkUnregistration=K.BulkRegistration=K.ErrorMessageTracker=void 0;const e=Te(),t=Qo(),i=Zo(),r=$s(),n=Hs(),a=Us(),u=zs(),c=Go(),l=Vs(),g=Js(),m=Gs(),b=Xs(),T=Ys(),y=Qs(),S=Zs(),F=Ks(),B=Yo(),N=ea();function E(W){if(W!==null)return W}class O{constructor(){this._messages=Object.create(null)}add(w){let k=this._messages[w];k||(k=0),k++,this._messages[w]=k}sendErrors(w){Object.keys(this._messages).forEach(k=>{w.window.showErrorMessage(k)})}}K.ErrorMessageTracker=O;class Q{constructor(){}rawAttach(w){this._rawConnection=w}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(w){}initialize(w){}error(w){this.send(e.MessageType.Error,w)}warn(w){this.send(e.MessageType.Warning,w)}info(w){this.send(e.MessageType.Info,w)}log(w){this.send(e.MessageType.Log,w)}debug(w){this.send(e.MessageType.Debug,w)}send(w,k){this._rawConnection&&this._rawConnection.sendNotification(e.LogMessageNotification.type,{type:w,message:k}).catch(()=>{(0,e.RAL)().console.error("Sending log message failed")})}}class Y{constructor(){}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}showErrorMessage(w,...k){let j={type:e.MessageType.Error,message:w,actions:k};return this.connection.sendRequest(e.ShowMessageRequest.type,j).then(E)}showWarningMessage(w,...k){let j={type:e.MessageType.Warning,message:w,actions:k};return this.connection.sendRequest(e.ShowMessageRequest.type,j).then(E)}showInformationMessage(w,...k){let j={type:e.MessageType.Info,message:w,actions:k};return this.connection.sendRequest(e.ShowMessageRequest.type,j).then(E)}}const V=(0,l.ShowDocumentFeature)((0,r.ProgressFeature)(Y));var X;(function(W){function w(){return new te}W.create=w})(X||(K.BulkRegistration=X={}));class te{constructor(){this._registrations=[],this._registered=new Set}add(w,k){const j=t.string(w)?w:w.method;if(this._registered.has(j))throw new Error(`${j} is already added to this registration`);const P=i.generateUuid();this._registrations.push({id:P,method:j,registerOptions:k||{}}),this._registered.add(j)}asRegistrationParams(){return{registrations:this._registrations}}}var de;(function(W){function w(){return new Fe(void 0,[])}W.create=w})(de||(K.BulkUnregistration=de={}));class Fe{constructor(w,k){this._connection=w,this._unregistrations=new Map,k.forEach(j=>{this._unregistrations.set(j.method,j)})}get isAttached(){return!!this._connection}attach(w){this._connection=w}add(w){this._unregistrations.set(w.method,w)}dispose(){let w=[];for(let j of this._unregistrations.values())w.push(j);let k={unregisterations:w};this._connection.sendRequest(e.UnregistrationRequest.type,k).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(w){const k=t.string(w)?w:w.method,j=this._unregistrations.get(k);if(!j)return!1;let P={unregisterations:[j]};return this._connection.sendRequest(e.UnregistrationRequest.type,P).then(()=>{this._unregistrations.delete(k)},oe=>{this._connection.console.info(`Un-registering request handler for ${j.id} failed.`)}),!0}}class fe{attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}register(w,k,j){return w instanceof te?this.registerMany(w):w instanceof Fe?this.registerSingle1(w,k,j):this.registerSingle2(w,k)}registerSingle1(w,k,j){const P=t.string(k)?k:k.method,oe=i.generateUuid();let Se={registrations:[{id:oe,method:P,registerOptions:j||{}}]};return w.isAttached||w.attach(this.connection),this.connection.sendRequest(e.RegistrationRequest.type,Se).then(Ie=>(w.add({id:oe,method:P}),w),Ie=>(this.connection.console.info(`Registering request handler for ${P} failed.`),Promise.reject(Ie)))}registerSingle2(w,k){const j=t.string(w)?w:w.method,P=i.generateUuid();let oe={registrations:[{id:P,method:j,registerOptions:k||{}}]};return this.connection.sendRequest(e.RegistrationRequest.type,oe).then(Se=>e.Disposable.create(()=>{this.unregisterSingle(P,j).catch(()=>{this.connection.console.info(`Un-registering capability with id ${P} failed.`)})}),Se=>(this.connection.console.info(`Registering request handler for ${j} failed.`),Promise.reject(Se)))}unregisterSingle(w,k){let j={unregisterations:[{id:w,method:k}]};return this.connection.sendRequest(e.UnregistrationRequest.type,j).catch(()=>{this.connection.console.info(`Un-registering request handler for ${w} failed.`)})}registerMany(w){let k=w.asRegistrationParams();return this.connection.sendRequest(e.RegistrationRequest.type,k).then(()=>new Fe(this._connection,k.registrations.map(j=>({id:j.id,method:j.method}))),j=>(this.connection.console.info("Bulk registration failed."),Promise.reject(j)))}}class H{constructor(){}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}applyEdit(w){function k(P){return P&&!!P.edit}let j=k(w)?w:{edit:w};return this.connection.sendRequest(e.ApplyWorkspaceEditRequest.type,j)}}const D=(0,g.FileOperationsFeature)((0,a.WorkspaceFoldersFeature)((0,n.ConfigurationFeature)(H)));class A{constructor(){this._trace=e.Trace.Off}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}set trace(w){this._trace=w}log(w,k){this._trace!==e.Trace.Off&&this.connection.sendNotification(e.LogTraceNotification.type,{message:w,verbose:this._trace===e.Trace.Verbose?k:void 0}).catch(()=>{})}}class U{constructor(){}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}logEvent(w){this.connection.sendNotification(e.TelemetryEventNotification.type,w).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class I{constructor(){}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}attachWorkDoneProgress(w){return(0,r.attachWorkDone)(this.connection,w)}attachPartialResultProgress(w,k){return(0,r.attachPartialResult)(this.connection,k)}}K._LanguagesImpl=I;const J=(0,y.FoldingRangeFeature)((0,N.MonikerFeature)((0,F.DiagnosticFeature)((0,S.InlayHintFeature)((0,T.InlineValueFeature)((0,b.TypeHierarchyFeature)((0,m.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,u.CallHierarchyFeature)(I)))))))));class it{constructor(){}attach(w){this._connection=w}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(w){}fillServerCapabilities(w){}attachWorkDoneProgress(w){return(0,r.attachWorkDone)(this.connection,w)}attachPartialResultProgress(w,k){return(0,r.attachPartialResult)(this.connection,k)}}K._NotebooksImpl=it;const ot=(0,B.NotebookSyncFeature)(it);function st(W,w){return function(k){return w(W(k))}}K.combineConsoleFeatures=st;function ne(W,w){return function(k){return w(W(k))}}K.combineTelemetryFeatures=ne;function ue(W,w){return function(k){return w(W(k))}}K.combineTracerFeatures=ue;function xe(W,w){return function(k){return w(W(k))}}K.combineClientFeatures=xe;function Be(W,w){return function(k){return w(W(k))}}K.combineWindowFeatures=Be;function We(W,w){return function(k){return w(W(k))}}K.combineWorkspaceFeatures=We;function $e(W,w){return function(k){return w(W(k))}}K.combineLanguagesFeatures=$e;function ze(W,w){return function(k){return w(W(k))}}K.combineNotebooksFeatures=ze;function Pe(W,w){function k(P,oe,Se){return P&&oe?Se(P,oe):P||oe}return{__brand:"features",console:k(W.console,w.console,st),tracer:k(W.tracer,w.tracer,ue),telemetry:k(W.telemetry,w.telemetry,ne),client:k(W.client,w.client,xe),window:k(W.window,w.window,Be),workspace:k(W.workspace,w.workspace,We),languages:k(W.languages,w.languages,$e),notebooks:k(W.notebooks,w.notebooks,ze)}}K.combineFeatures=Pe;function Oe(W,w,k){const j=k&&k.console?new(k.console(Q)):new Q,P=W(j);j.rawAttach(P);const oe=k&&k.tracer?new(k.tracer(A)):new A,Se=k&&k.telemetry?new(k.telemetry(U)):new U,Ie=k&&k.client?new(k.client(fe)):new fe,Ze=k&&k.window?new(k.window(V)):new V,Ke=k&&k.workspace?new(k.workspace(D)):new D,Ge=k&&k.languages?new(k.languages(J)):new J,ke=k&&k.notebooks?new(k.notebooks(ot)):new ot,_e=[j,oe,Se,Ie,Ze,Ke,Ge,ke];function et(o){return o instanceof Promise?o:t.thenable(o)?new Promise((s,f)=>{o.then(_=>s(_),_=>f(_))}):Promise.resolve(o)}let Xe,qe,Ye,d={listen:()=>P.listen(),sendRequest:(o,...s)=>P.sendRequest(t.string(o)?o:o.method,...s),onRequest:(o,s)=>P.onRequest(o,s),sendNotification:(o,s)=>{const f=t.string(o)?o:o.method;return P.sendNotification(f,s)},onNotification:(o,s)=>P.onNotification(o,s),onProgress:P.onProgress,sendProgress:P.sendProgress,onInitialize:o=>(qe=o,{dispose:()=>{qe=void 0}}),onInitialized:o=>P.onNotification(e.InitializedNotification.type,o),onShutdown:o=>(Xe=o,{dispose:()=>{Xe=void 0}}),onExit:o=>(Ye=o,{dispose:()=>{Ye=void 0}}),get console(){return j},get telemetry(){return Se},get tracer(){return oe},get client(){return Ie},get window(){return Ze},get workspace(){return Ke},get languages(){return Ge},get notebooks(){return ke},onDidChangeConfiguration:o=>P.onNotification(e.DidChangeConfigurationNotification.type,o),onDidChangeWatchedFiles:o=>P.onNotification(e.DidChangeWatchedFilesNotification.type,o),__textDocumentSync:void 0,onDidOpenTextDocument:o=>P.onNotification(e.DidOpenTextDocumentNotification.type,o),onDidChangeTextDocument:o=>P.onNotification(e.DidChangeTextDocumentNotification.type,o),onDidCloseTextDocument:o=>P.onNotification(e.DidCloseTextDocumentNotification.type,o),onWillSaveTextDocument:o=>P.onNotification(e.WillSaveTextDocumentNotification.type,o),onWillSaveTextDocumentWaitUntil:o=>P.onRequest(e.WillSaveTextDocumentWaitUntilRequest.type,o),onDidSaveTextDocument:o=>P.onNotification(e.DidSaveTextDocumentNotification.type,o),sendDiagnostics:o=>P.sendNotification(e.PublishDiagnosticsNotification.type,o),onHover:o=>P.onRequest(e.HoverRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),onCompletion:o=>P.onRequest(e.CompletionRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onCompletionResolve:o=>P.onRequest(e.CompletionResolveRequest.type,o),onSignatureHelp:o=>P.onRequest(e.SignatureHelpRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),onDeclaration:o=>P.onRequest(e.DeclarationRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onDefinition:o=>P.onRequest(e.DefinitionRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onTypeDefinition:o=>P.onRequest(e.TypeDefinitionRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onImplementation:o=>P.onRequest(e.ImplementationRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onReferences:o=>P.onRequest(e.ReferencesRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onDocumentHighlight:o=>P.onRequest(e.DocumentHighlightRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onDocumentSymbol:o=>P.onRequest(e.DocumentSymbolRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onWorkspaceSymbol:o=>P.onRequest(e.WorkspaceSymbolRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onWorkspaceSymbolResolve:o=>P.onRequest(e.WorkspaceSymbolResolveRequest.type,o),onCodeAction:o=>P.onRequest(e.CodeActionRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onCodeActionResolve:o=>P.onRequest(e.CodeActionResolveRequest.type,(s,f)=>o(s,f)),onCodeLens:o=>P.onRequest(e.CodeLensRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onCodeLensResolve:o=>P.onRequest(e.CodeLensResolveRequest.type,(s,f)=>o(s,f)),onDocumentFormatting:o=>P.onRequest(e.DocumentFormattingRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),onDocumentRangeFormatting:o=>P.onRequest(e.DocumentRangeFormattingRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),onDocumentOnTypeFormatting:o=>P.onRequest(e.DocumentOnTypeFormattingRequest.type,(s,f)=>o(s,f)),onRenameRequest:o=>P.onRequest(e.RenameRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),onPrepareRename:o=>P.onRequest(e.PrepareRenameRequest.type,(s,f)=>o(s,f)),onDocumentLinks:o=>P.onRequest(e.DocumentLinkRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onDocumentLinkResolve:o=>P.onRequest(e.DocumentLinkResolveRequest.type,(s,f)=>o(s,f)),onDocumentColor:o=>P.onRequest(e.DocumentColorRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onColorPresentation:o=>P.onRequest(e.ColorPresentationRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onFoldingRanges:o=>P.onRequest(e.FoldingRangeRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onSelectionRanges:o=>P.onRequest(e.SelectionRangeRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),(0,r.attachPartialResult)(P,s))),onExecuteCommand:o=>P.onRequest(e.ExecuteCommandRequest.type,(s,f)=>o(s,f,(0,r.attachWorkDone)(P,s),void 0)),dispose:()=>P.dispose()};for(let o of _e)o.attach(d);return P.onRequest(e.InitializeRequest.type,o=>{w.initialize(o),t.string(o.trace)&&(oe.trace=e.Trace.fromString(o.trace));for(let s of _e)s.initialize(o.capabilities);if(qe){let s=qe(o,new e.CancellationTokenSource().token,(0,r.attachWorkDone)(P,o),void 0);return et(s).then(f=>{if(f instanceof e.ResponseError)return f;let _=f;_||(_={capabilities:{}});let v=_.capabilities;v||(v={},_.capabilities=v),v.textDocumentSync===void 0||v.textDocumentSync===null?v.textDocumentSync=t.number(d.__textDocumentSync)?d.__textDocumentSync:e.TextDocumentSyncKind.None:!t.number(v.textDocumentSync)&&!t.number(v.textDocumentSync.change)&&(v.textDocumentSync.change=t.number(d.__textDocumentSync)?d.__textDocumentSync:e.TextDocumentSyncKind.None);for(let C of _e)C.fillServerCapabilities(v);return _})}else{let s={capabilities:{textDocumentSync:e.TextDocumentSyncKind.None}};for(let f of _e)f.fillServerCapabilities(s.capabilities);return s}}),P.onRequest(e.ShutdownRequest.type,()=>{if(w.shutdownReceived=!0,Xe)return Xe(new e.CancellationTokenSource().token)}),P.onNotification(e.ExitNotification.type,()=>{try{Ye&&Ye()}finally{w.shutdownReceived?w.exit(0):w.exit(1)}}),P.onNotification(e.SetTraceNotification.type,o=>{oe.trace=e.Trace.fromString(o.value)}),d}return K.createConnection=Oe,K}var Mo;function No(){return Mo||(Mo=1,function(e){var t=Pt&&Pt.__createBinding||(Object.create?function(l,g,m,b){b===void 0&&(b=m);var T=Object.getOwnPropertyDescriptor(g,m);(!T||("get"in T?!g.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(l,b,T)}:function(l,g,m,b){b===void 0&&(b=m),l[b]=g[m]}),i=Pt&&Pt.__exportStar||function(l,g){for(var m in l)m!=="default"&&!Object.prototype.hasOwnProperty.call(g,m)&&t(g,l,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;const r=Go();Object.defineProperty(e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return r.SemanticTokensBuilder}});const n=Ws();i(Te(),e);const a=Xo();Object.defineProperty(e,"TextDocuments",{enumerable:!0,get:function(){return a.TextDocuments}});const u=Yo();Object.defineProperty(e,"NotebookDocuments",{enumerable:!0,get:function(){return u.NotebookDocuments}}),i(ta(),e);var c;(function(l){l.all={__brand:"features",languages:n.InlineCompletionFeature}})(c||(e.ProposedFeatures=c={}))}(Pt)),Pt}var ar,Fo;function na(){return Fo||(Fo=1,ar=Te()),ar}var Oo;function Ko(){return Oo||(Oo=1,function(e){var t=Tt&&Tt.__createBinding||(Object.create?function(c,l,g,m){m===void 0&&(m=g);var b=Object.getOwnPropertyDescriptor(l,g);(!b||("get"in b?!l.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return l[g]}}),Object.defineProperty(c,m,b)}:function(c,l,g,m){m===void 0&&(m=g),c[m]=l[g]}),i=Tt&&Tt.__exportStar||function(c,l){for(var g in c)g!=="default"&&!Object.prototype.hasOwnProperty.call(l,g)&&t(l,c,g)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=void 0;const r=No();i(na(),e),i(No(),e);let n=!1;const a={initialize:c=>{},get shutdownReceived(){return n},set shutdownReceived(c){n=c},exit:c=>{}};function u(c,l,g,m){let b,T,y,S;c!==void 0&&c.__brand==="features"&&(b=c,c=l,l=g,g=m),r.ConnectionStrategy.is(c)||r.ConnectionOptions.is(c)?S=c:(T=c,y=l,S=g);const F=B=>(0,r.createProtocolConnection)(T,y,B,S);return(0,r.createConnection)(F,a,b)}e.createConnection=u}(Tt)),Tt}var cr,Io;function ra(){return Io||(Io=1,cr=Ko()),cr}var ur=ra(),ia=Ko();let $,nt=0,Tn=null;function kn(){return(Tn===null||Tn.byteLength===0)&&(Tn=new Uint8Array($.memory.buffer)),Tn}const Gn=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},oa=typeof Gn.encodeInto=="function"?function(e,t){return Gn.encodeInto(e,t)}:function(e,t){const i=Gn.encode(e);return t.set(i),{read:e.length,written:i.length}};function Ht(e,t,i){if(i===void 0){const c=Gn.encode(e),l=t(c.length,1)>>>0;return kn().subarray(l,l+c.length).set(c),nt=c.length,l}let r=e.length,n=t(r,1)>>>0;const a=kn();let u=0;for(;u<r;u++){const c=e.charCodeAt(u);if(c>127)break;a[n+u]=c}if(u!==r){u!==0&&(e=e.slice(u)),n=i(n,r,r=u+e.length*3,1)>>>0;const c=kn().subarray(n+u,n+r),l=oa(e,c);u+=l.written,n=i(n,r,u,1)>>>0}return nt=u,n}let Lt=null;function Ve(){return(Lt===null||Lt.buffer.detached===!0||Lt.buffer.detached===void 0&&Lt.buffer!==$.memory.buffer)&&(Lt=new DataView($.memory.buffer)),Lt}function Pn(e){const t=$.__externref_table_alloc();return $.__wbindgen_export_4.set(t,e),t}function jt(e,t){try{return e.apply(this,t)}catch(i){const r=Pn(i);$.__wbindgen_exn_store(r)}}const es=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&es.decode();function Rt(e,t){return e=e>>>0,es.decode(kn().subarray(e,e+t))}function _t(e){return e==null}const Ao=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{$.__wbindgen_export_6.get(e.dtor)(e.a,e.b)});function jo(e,t,i,r){const n={a:e,b:t,cnt:1,dtor:i},a=(...u)=>{n.cnt++;const c=n.a;n.a=0;try{return r(c,n.b,...u)}finally{--n.cnt===0?($.__wbindgen_export_6.get(n.dtor)(c,n.b),Ao.unregister(n)):n.a=c}};return a.original=n,Ao.register(a,n,n),a}function hi(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const n=e.description;return n==null?"Symbol":`Symbol(${n})`}if(t=="function"){const n=e.name;return typeof n=="string"&&n.length>0?`Function(${n})`:"Function"}if(Array.isArray(e)){const n=e.length;let a="[";n>0&&(a+=hi(e[0]));for(let u=1;u<n;u++)a+=", "+hi(e[u]);return a+="]",a}const i=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(i&&i.length>1)r=i[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function ts(e){const t=$.__wbindgen_export_4.get(e);return $.__externref_table_dealloc(e),t}function sa(e,t){const i=t(e.length*1,1)>>>0;return kn().set(e,i/1),nt=e.length,i}function aa(e,t,i){$.closure1242_externref_shim(e,t,i)}function ca(e,t){$._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h1cf4d56000053a1d(e,t)}function ua(e,t,i,r){$.closure3074_externref_shim(e,t,i,r)}const Lo=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_individuallanguages_free(e>>>0,1));class yi{static __wrap(t){t=t>>>0;const i=Object.create(yi.prototype);return i.__wbg_ptr=t,Lo.register(i,i.__wbg_ptr,i),i}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Lo.unregister(this),t}free(){const t=this.__destroy_into_raw();$.__wbg_individuallanguages_free(t,0)}get name(){let t,i;try{const r=$.individuallanguages_name(this.__wbg_ptr);return t=r[0],i=r[1],Rt(r[0],r[1])}finally{$.__wbindgen_free(t,i,1)}}get code(){let t,i;try{const r=$.individuallanguages_code(this.__wbg_ptr);return t=r[0],i=r[1],Rt(r[0],r[1])}finally{$.__wbindgen_free(t,i,1)}}}typeof FinalizationRegistry>"u"||new FinalizationRegistry(e=>$.__wbg_languagecode_free(e>>>0,1));const lr=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_proxycontext_free(e>>>0,1));class nr{static __wrap(t){t=t>>>0;const i=Object.create(nr.prototype);return i.__wbg_ptr=t,lr.register(i,i.__wbg_ptr,i),i}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,lr.unregister(this),t}free(){const t=this.__destroy_into_raw();$.__wbg_proxycontext_free(t,0)}constructor(t){const i=$.proxycontext_new(t);return this.__wbg_ptr=i>>>0,lr.register(this,this.__wbg_ptr,this),this}get context(){return $.proxycontext_context(this.__wbg_ptr)}untar(t,i){const r=sa(t,$.__wbindgen_malloc),n=nt,a=$.proxycontext_untar(this.__wbg_ptr,r,n,i);if(a[1])throw ts(a[0])}}const Bo=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>$.__wbg_tinymistlanguageserver_free(e>>>0,1));class xo{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Bo.unregister(this),t}free(){const t=this.__destroy_into_raw();$.__wbg_tinymistlanguageserver_free(t,0)}constructor(t){const i=$.tinymistlanguageserver_new(t);if(i[2])throw ts(i[1]);return this.__wbg_ptr=i[0]>>>0,Bo.register(this,this.__wbg_ptr,this),this}on_event(t){$.tinymistlanguageserver_on_event(this.__wbg_ptr,t)}on_request(t,i){const r=Ht(t,$.__wbindgen_malloc,$.__wbindgen_realloc),n=nt;return $.tinymistlanguageserver_on_request(this.__wbg_ptr,r,n,i)}on_notification(t,i){const r=Ht(t,$.__wbindgen_malloc,$.__wbindgen_realloc),n=nt;$.tinymistlanguageserver_on_notification(this.__wbg_ptr,r,n,i)}on_response(t){$.tinymistlanguageserver_on_response(this.__wbg_ptr,t)}static version(){let t,i;try{const r=$.tinymistlanguageserver_version();return t=r[0],i=r[1],Rt(r[0],r[1])}finally{$.__wbindgen_free(t,i,1)}}}async function la(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const i=await e.arrayBuffer();return await WebAssembly.instantiate(i,t)}else{const i=await WebAssembly.instantiate(e,t);return i instanceof WebAssembly.Instance?{instance:i,module:e}:i}}function da(){const e={};return e.wbg={},e.wbg.__wbg_String_8f0eb39a4a4c2f66=function(t,i){const r=String(i),n=Ht(r,$.__wbindgen_malloc,$.__wbindgen_realloc),a=nt;Ve().setInt32(t+4,a,!0),Ve().setInt32(t+0,n,!0)},e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return t.buffer},e.wbg.__wbg_call_672a4d21634d4a24=function(){return jt(function(t,i){return t.call(i)},arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return jt(function(t,i,r){return t.call(i,r)},arguments)},e.wbg.__wbg_call_b8adc8b1d0a0d8eb=function(){return jt(function(t,i,r,n,a){return t.call(i,r,n,a)},arguments)},e.wbg.__wbg_done_769e5ede4b31c67b=function(t){return t.done},e.wbg.__wbg_entries_3265d4158b33e5dc=function(t){return Object.entries(t)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,i){let r,n;try{r=t,n=i,console.error(Rt(t,i))}finally{$.__wbindgen_free(r,n,1)}},e.wbg.__wbg_getTimezoneOffset_6b5752021c499c47=function(t){return t.getTimezoneOffset()},e.wbg.__wbg_get_67b2ba62fc30de12=function(){return jt(function(t,i){return Reflect.get(t,i)},arguments)},e.wbg.__wbg_get_b9b93047fe3cf45b=function(t,i){return t[i>>>0]},e.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(t,i){return t[i]},e.wbg.__wbg_individuallanguages_new=function(t){return yi.__wrap(t)},e.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc=function(t){let i;try{i=t instanceof ArrayBuffer}catch{i=!1}return i},e.wbg.__wbg_instanceof_Map_f3469ce2244d2430=function(t){let i;try{i=t instanceof Map}catch{i=!1}return i},e.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9=function(t){let i;try{i=t instanceof Uint8Array}catch{i=!1}return i},e.wbg.__wbg_isArray_a1eab7e0d067391b=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_343e2beeeece1bb0=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_9a24c88df860dc65=function(){return Symbol.iterator},e.wbg.__wbg_length_a446193dc22c12f8=function(t){return t.length},e.wbg.__wbg_length_e2d2a49132c1b256=function(t){return t.length},e.wbg.__wbg_new_23a2665fac83c611=function(t,i){try{var r={a:t,b:i},n=(u,c)=>{const l=r.a;r.a=0;try{return ua(l,r.b,u,c)}finally{r.a=l}};return new Promise(n)}finally{r.a=r.b=0}},e.wbg.__wbg_new_31a97dac4f10fab7=function(t){return new Date(t)},e.wbg.__wbg_new_405e22f390576ce2=function(){return new Object},e.wbg.__wbg_new_5e0be73521bc8c17=function(){return new Map},e.wbg.__wbg_new_78feb108b6472713=function(){return new Array},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return new Uint8Array(t)},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,i){return new Function(Rt(t,i))},e.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,i,r){return new Uint8Array(t,i>>>0,r>>>0)},e.wbg.__wbg_next_25feadfc0913fea9=function(t){return t.next},e.wbg.__wbg_next_6574e1a8a62d1055=function(){return jt(function(t){return t.next()},arguments)},e.wbg.__wbg_now_2c95c9de01293173=function(t){return t.now()},e.wbg.__wbg_now_807e54c39636c349=function(){return Date.now()},e.wbg.__wbg_now_e1163c67115ff874=function(t){return t.now()},e.wbg.__wbg_performance_7a3ffd0b17f663ad=function(t){return t.performance},e.wbg.__wbg_performance_7fe0928f3ab059e5=function(t){return t.performance},e.wbg.__wbg_proxycontext_new=function(t){return nr.__wrap(t)},e.wbg.__wbg_push_737cfc8c1432c2c6=function(t,i){return t.push(i)},e.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5=function(t){queueMicrotask(t)},e.wbg.__wbg_queueMicrotask_d3219def82552485=function(t){return t.queueMicrotask},e.wbg.__wbg_resolve_4851785c9c5f573d=function(t){return Promise.resolve(t)},e.wbg.__wbg_setTimeout_42370cb3051b8c2c=function(){return jt(function(t,i,r){return t.setTimeout(i,r)},arguments)},e.wbg.__wbg_set_37837023f3d740e8=function(t,i,r){t[i>>>0]=r},e.wbg.__wbg_set_3f1d0b984ed272ed=function(t,i,r){t[i]=r},e.wbg.__wbg_set_65595bdd868b3009=function(t,i,r){t.set(i,r>>>0)},e.wbg.__wbg_set_8fc6bf8a5b1071d1=function(t,i,r){return t.set(i,r)},e.wbg.__wbg_set_bb8cecf6a62b9f46=function(){return jt(function(t,i,r){return Reflect.set(t,i,r)},arguments)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,i){const r=i.stack,n=Ht(r,$.__wbindgen_malloc,$.__wbindgen_realloc),a=nt;Ve().setInt32(t+4,a,!0),Ve().setInt32(t+0,n,!0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t=typeof global>"u"?null:global;return _t(t)?0:Pn(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t=typeof globalThis>"u"?null:globalThis;return _t(t)?0:Pn(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t=typeof self>"u"?null:self;return _t(t)?0:Pn(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t=typeof window>"u"?null:window;return _t(t)?0:Pn(t)},e.wbg.__wbg_then_44b73946d2fb3e7d=function(t,i){return t.then(i)},e.wbg.__wbg_value_cd1ffa7b1ab794f1=function(t){return t.value},e.wbg.__wbindgen_as_number=function(t){return+t},e.wbg.__wbindgen_bigint_from_i64=function(t){return t},e.wbg.__wbindgen_bigint_from_u64=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_bigint_get_as_i64=function(t,i){const r=i,n=typeof r=="bigint"?r:void 0;Ve().setBigInt64(t+8,_t(n)?BigInt(0):n,!0),Ve().setInt32(t+0,!_t(n),!0)},e.wbg.__wbindgen_boolean_get=function(t){const i=t;return typeof i=="boolean"?i?1:0:2},e.wbg.__wbindgen_cb_drop=function(t){const i=t.original;return i.cnt--==1?(i.a=0,!0):!1},e.wbg.__wbindgen_closure_wrapper2744=function(t,i,r){return jo(t,i,1243,aa)},e.wbg.__wbindgen_closure_wrapper2774=function(t,i,r){return jo(t,i,1255,ca)},e.wbg.__wbindgen_debug_string=function(t,i){const r=hi(i),n=Ht(r,$.__wbindgen_malloc,$.__wbindgen_realloc),a=nt;Ve().setInt32(t+4,a,!0),Ve().setInt32(t+0,n,!0)},e.wbg.__wbindgen_error_new=function(t,i){return new Error(Rt(t,i))},e.wbg.__wbindgen_in=function(t,i){return t in i},e.wbg.__wbindgen_init_externref_table=function(){const t=$.__wbindgen_export_4,i=t.grow(4);t.set(0,void 0),t.set(i+0,void 0),t.set(i+1,null),t.set(i+2,!0),t.set(i+3,!1)},e.wbg.__wbindgen_is_bigint=function(t){return typeof t=="bigint"},e.wbg.__wbindgen_is_function=function(t){return typeof t=="function"},e.wbg.__wbindgen_is_object=function(t){const i=t;return typeof i=="object"&&i!==null},e.wbg.__wbindgen_is_string=function(t){return typeof t=="string"},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_jsval_eq=function(t,i){return t===i},e.wbg.__wbindgen_jsval_loose_eq=function(t,i){return t==i},e.wbg.__wbindgen_memory=function(){return $.memory},e.wbg.__wbindgen_number_get=function(t,i){const r=i,n=typeof r=="number"?r:void 0;Ve().setFloat64(t+8,_t(n)?0:n,!0),Ve().setInt32(t+0,!_t(n),!0)},e.wbg.__wbindgen_number_new=function(t){return t},e.wbg.__wbindgen_string_get=function(t,i){const r=i,n=typeof r=="string"?r:void 0;var a=_t(n)?0:Ht(n,$.__wbindgen_malloc,$.__wbindgen_realloc),u=nt;Ve().setInt32(t+4,u,!0),Ve().setInt32(t+0,a,!0)},e.wbg.__wbindgen_string_new=function(t,i){return Rt(t,i)},e.wbg.__wbindgen_throw=function(t,i){throw new Error(Rt(t,i))},e}function fa(e,t){return $=e.exports,ns.__wbindgen_wasm_module=t,Lt=null,Tn=null,$.__wbindgen_start(),$}async function ns(e){if($!==void 0)return $;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/typst-playground/assets/tinymist_bg-B5YfL_fh.wasm",import.meta.url));const t=da();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:i,module:r}=await la(await e,t);return fa(i,r)}var dr={},Dn={},Wo;function ha(){if(Wo)return Dn;Wo=1,Dn.byteLength=c,Dn.toByteArray=g,Dn.fromByteArray=T;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=r.length;n<a;++n)e[n]=r[n],t[r.charCodeAt(n)]=n;t[45]=62,t[95]=63;function u(y){var S=y.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var F=y.indexOf("=");F===-1&&(F=S);var B=F===S?0:4-F%4;return[F,B]}function c(y){var S=u(y),F=S[0],B=S[1];return(F+B)*3/4-B}function l(y,S,F){return(S+F)*3/4-F}function g(y){var S,F=u(y),B=F[0],N=F[1],E=new i(l(y,B,N)),O=0,Q=N>0?B-4:B,Y;for(Y=0;Y<Q;Y+=4)S=t[y.charCodeAt(Y)]<<18|t[y.charCodeAt(Y+1)]<<12|t[y.charCodeAt(Y+2)]<<6|t[y.charCodeAt(Y+3)],E[O++]=S>>16&255,E[O++]=S>>8&255,E[O++]=S&255;return N===2&&(S=t[y.charCodeAt(Y)]<<2|t[y.charCodeAt(Y+1)]>>4,E[O++]=S&255),N===1&&(S=t[y.charCodeAt(Y)]<<10|t[y.charCodeAt(Y+1)]<<4|t[y.charCodeAt(Y+2)]>>2,E[O++]=S>>8&255,E[O++]=S&255),E}function m(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function b(y,S,F){for(var B,N=[],E=S;E<F;E+=3)B=(y[E]<<16&16711680)+(y[E+1]<<8&65280)+(y[E+2]&255),N.push(m(B));return N.join("")}function T(y){for(var S,F=y.length,B=F%3,N=[],E=16383,O=0,Q=F-B;O<Q;O+=E)N.push(b(y,O,O+E>Q?Q:O+E));return B===1?(S=y[F-1],N.push(e[S>>2]+e[S<<4&63]+"==")):B===2&&(S=(y[F-2]<<8)+y[F-1],N.push(e[S>>10]+e[S>>4&63]+e[S<<2&63]+"=")),N.join("")}return Dn}var Jn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var $o;function ga(){return $o||($o=1,Jn.read=function(e,t,i,r,n){var a,u,c=n*8-r-1,l=(1<<c)-1,g=l>>1,m=-7,b=i?n-1:0,T=i?-1:1,y=e[t+b];for(b+=T,a=y&(1<<-m)-1,y>>=-m,m+=c;m>0;a=a*256+e[t+b],b+=T,m-=8);for(u=a&(1<<-m)-1,a>>=-m,m+=r;m>0;u=u*256+e[t+b],b+=T,m-=8);if(a===0)a=1-g;else{if(a===l)return u?NaN:(y?-1:1)*(1/0);u=u+Math.pow(2,r),a=a-g}return(y?-1:1)*u*Math.pow(2,a-r)},Jn.write=function(e,t,i,r,n,a){var u,c,l,g=a*8-n-1,m=(1<<g)-1,b=m>>1,T=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:a-1,S=r?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,u=m):(u=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-u))<1&&(u--,l*=2),u+b>=1?t+=T/l:t+=T*Math.pow(2,1-b),t*l>=2&&(u++,l/=2),u+b>=m?(c=0,u=m):u+b>=1?(c=(t*l-1)*Math.pow(2,n),u=u+b):(c=t*Math.pow(2,b-1)*Math.pow(2,n),u=0));n>=8;e[i+y]=c&255,y+=S,c/=256,n-=8);for(u=u<<n|c,g+=n;g>0;e[i+y]=u&255,y+=S,u/=256,g-=8);e[i+y-S]|=F*128}),Jn}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ho;function pa(){return Ho||(Ho=1,function(e){const t=ha(),i=ga(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const d=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(d,o),d.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(d){if(d>n)throw new RangeError('The value "'+d+'" is invalid for option "size"');const o=new Uint8Array(d);return Object.setPrototypeOf(o,c.prototype),o}function c(d,o,s){if(typeof d=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(d)}return l(d,o,s)}c.poolSize=8192;function l(d,o,s){if(typeof d=="string")return T(d,o);if(ArrayBuffer.isView(d))return S(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(_e(d,ArrayBuffer)||d&&_e(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_e(d,SharedArrayBuffer)||d&&_e(d.buffer,SharedArrayBuffer)))return F(d,o,s);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=d.valueOf&&d.valueOf();if(f!=null&&f!==d)return c.from(f,o,s);const _=B(d);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return c.from(d[Symbol.toPrimitive]("string"),o,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}c.from=function(d,o,s){return l(d,o,s)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function g(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function m(d,o,s){return g(d),d<=0?u(d):o!==void 0?typeof s=="string"?u(d).fill(o,s):u(d).fill(o):u(d)}c.alloc=function(d,o,s){return m(d,o,s)};function b(d){return g(d),u(d<0?0:N(d)|0)}c.allocUnsafe=function(d){return b(d)},c.allocUnsafeSlow=function(d){return b(d)};function T(d,o){if((typeof o!="string"||o==="")&&(o="utf8"),!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o);const s=O(d,o)|0;let f=u(s);const _=f.write(d,o);return _!==s&&(f=f.slice(0,_)),f}function y(d){const o=d.length<0?0:N(d.length)|0,s=u(o);for(let f=0;f<o;f+=1)s[f]=d[f]&255;return s}function S(d){if(_e(d,Uint8Array)){const o=new Uint8Array(d);return F(o.buffer,o.byteOffset,o.byteLength)}return y(d)}function F(d,o,s){if(o<0||d.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<o+(s||0))throw new RangeError('"length" is outside of buffer bounds');let f;return o===void 0&&s===void 0?f=new Uint8Array(d):s===void 0?f=new Uint8Array(d,o):f=new Uint8Array(d,o,s),Object.setPrototypeOf(f,c.prototype),f}function B(d){if(c.isBuffer(d)){const o=N(d.length)|0,s=u(o);return s.length===0||d.copy(s,0,0,o),s}if(d.length!==void 0)return typeof d.length!="number"||et(d.length)?u(0):y(d);if(d.type==="Buffer"&&Array.isArray(d.data))return y(d.data)}function N(d){if(d>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return d|0}function E(d){return+d!=d&&(d=0),c.alloc(+d)}c.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==c.prototype},c.compare=function(o,s){if(_e(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),_e(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),!c.isBuffer(o)||!c.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===s)return 0;let f=o.length,_=s.length;for(let v=0,C=Math.min(f,_);v<C;++v)if(o[v]!==s[v]){f=o[v],_=s[v];break}return f<_?-1:_<f?1:0},c.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(o,s){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return c.alloc(0);let f;if(s===void 0)for(s=0,f=0;f<o.length;++f)s+=o[f].length;const _=c.allocUnsafe(s);let v=0;for(f=0;f<o.length;++f){let C=o[f];if(_e(C,Uint8Array))v+C.length>_.length?(c.isBuffer(C)||(C=c.from(C)),C.copy(_,v)):Uint8Array.prototype.set.call(_,C,v);else if(c.isBuffer(C))C.copy(_,v);else throw new TypeError('"list" argument must be an Array of Buffers');v+=C.length}return _};function O(d,o){if(c.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||_e(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const s=d.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&s===0)return 0;let _=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return Ie(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return Ge(d).length;default:if(_)return f?-1:Ie(d).length;o=(""+o).toLowerCase(),_=!0}}c.byteLength=O;function Q(d,o,s){let f=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,o>>>=0,s<=o))return"";for(d||(d="utf8");;)switch(d){case"hex":return ot(this,o,s);case"utf8":case"utf-8":return A(this,o,s);case"ascii":return J(this,o,s);case"latin1":case"binary":return it(this,o,s);case"base64":return D(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return st(this,o,s);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),f=!0}}c.prototype._isBuffer=!0;function Y(d,o,s){const f=d[o];d[o]=d[s],d[s]=f}c.prototype.swap16=function(){const o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let s=0;s<o;s+=2)Y(this,s,s+1);return this},c.prototype.swap32=function(){const o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let s=0;s<o;s+=4)Y(this,s,s+3),Y(this,s+1,s+2);return this},c.prototype.swap64=function(){const o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let s=0;s<o;s+=8)Y(this,s,s+7),Y(this,s+1,s+6),Y(this,s+2,s+5),Y(this,s+3,s+4);return this},c.prototype.toString=function(){const o=this.length;return o===0?"":arguments.length===0?A(this,0,o):Q.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(o){if(!c.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:c.compare(this,o)===0},c.prototype.inspect=function(){let o="";const s=e.INSPECT_MAX_BYTES;return o=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(o+=" ... "),"<Buffer "+o+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(o,s,f,_,v){if(_e(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(s===void 0&&(s=0),f===void 0&&(f=o?o.length:0),_===void 0&&(_=0),v===void 0&&(v=this.length),s<0||f>o.length||_<0||v>this.length)throw new RangeError("out of range index");if(_>=v&&s>=f)return 0;if(_>=v)return-1;if(s>=f)return 1;if(s>>>=0,f>>>=0,_>>>=0,v>>>=0,this===o)return 0;let C=v-_,G=f-s;const se=Math.min(C,G),re=this.slice(_,v),ae=o.slice(s,f);for(let ee=0;ee<se;++ee)if(re[ee]!==ae[ee]){C=re[ee],G=ae[ee];break}return C<G?-1:G<C?1:0};function V(d,o,s,f,_){if(d.length===0)return-1;if(typeof s=="string"?(f=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,et(s)&&(s=_?0:d.length-1),s<0&&(s=d.length+s),s>=d.length){if(_)return-1;s=d.length-1}else if(s<0)if(_)s=0;else return-1;if(typeof o=="string"&&(o=c.from(o,f)),c.isBuffer(o))return o.length===0?-1:X(d,o,s,f,_);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?_?Uint8Array.prototype.indexOf.call(d,o,s):Uint8Array.prototype.lastIndexOf.call(d,o,s):X(d,[o],s,f,_);throw new TypeError("val must be string, number or Buffer")}function X(d,o,s,f,_){let v=1,C=d.length,G=o.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(d.length<2||o.length<2)return-1;v=2,C/=2,G/=2,s/=2}function se(ae,ee){return v===1?ae[ee]:ae.readUInt16BE(ee*v)}let re;if(_){let ae=-1;for(re=s;re<C;re++)if(se(d,re)===se(o,ae===-1?0:re-ae)){if(ae===-1&&(ae=re),re-ae+1===G)return ae*v}else ae!==-1&&(re-=re-ae),ae=-1}else for(s+G>C&&(s=C-G),re=s;re>=0;re--){let ae=!0;for(let ee=0;ee<G;ee++)if(se(d,re+ee)!==se(o,ee)){ae=!1;break}if(ae)return re}return-1}c.prototype.includes=function(o,s,f){return this.indexOf(o,s,f)!==-1},c.prototype.indexOf=function(o,s,f){return V(this,o,s,f,!0)},c.prototype.lastIndexOf=function(o,s,f){return V(this,o,s,f,!1)};function te(d,o,s,f){s=Number(s)||0;const _=d.length-s;f?(f=Number(f),f>_&&(f=_)):f=_;const v=o.length;f>v/2&&(f=v/2);let C;for(C=0;C<f;++C){const G=parseInt(o.substr(C*2,2),16);if(et(G))return C;d[s+C]=G}return C}function de(d,o,s,f){return ke(Ie(o,d.length-s),d,s,f)}function Fe(d,o,s,f){return ke(Ze(o),d,s,f)}function fe(d,o,s,f){return ke(Ge(o),d,s,f)}function H(d,o,s,f){return ke(Ke(o,d.length-s),d,s,f)}c.prototype.write=function(o,s,f,_){if(s===void 0)_="utf8",f=this.length,s=0;else if(f===void 0&&typeof s=="string")_=s,f=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(f)?(f=f>>>0,_===void 0&&(_="utf8")):(_=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const v=this.length-s;if((f===void 0||f>v)&&(f=v),o.length>0&&(f<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let C=!1;for(;;)switch(_){case"hex":return te(this,o,s,f);case"utf8":case"utf-8":return de(this,o,s,f);case"ascii":case"latin1":case"binary":return Fe(this,o,s,f);case"base64":return fe(this,o,s,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,o,s,f);default:if(C)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),C=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(d,o,s){return o===0&&s===d.length?t.fromByteArray(d):t.fromByteArray(d.slice(o,s))}function A(d,o,s){s=Math.min(d.length,s);const f=[];let _=o;for(;_<s;){const v=d[_];let C=null,G=v>239?4:v>223?3:v>191?2:1;if(_+G<=s){let se,re,ae,ee;switch(G){case 1:v<128&&(C=v);break;case 2:se=d[_+1],(se&192)===128&&(ee=(v&31)<<6|se&63,ee>127&&(C=ee));break;case 3:se=d[_+1],re=d[_+2],(se&192)===128&&(re&192)===128&&(ee=(v&15)<<12|(se&63)<<6|re&63,ee>2047&&(ee<55296||ee>57343)&&(C=ee));break;case 4:se=d[_+1],re=d[_+2],ae=d[_+3],(se&192)===128&&(re&192)===128&&(ae&192)===128&&(ee=(v&15)<<18|(se&63)<<12|(re&63)<<6|ae&63,ee>65535&&ee<1114112&&(C=ee))}}C===null?(C=65533,G=1):C>65535&&(C-=65536,f.push(C>>>10&1023|55296),C=56320|C&1023),f.push(C),_+=G}return I(f)}const U=4096;function I(d){const o=d.length;if(o<=U)return String.fromCharCode.apply(String,d);let s="",f=0;for(;f<o;)s+=String.fromCharCode.apply(String,d.slice(f,f+=U));return s}function J(d,o,s){let f="";s=Math.min(d.length,s);for(let _=o;_<s;++_)f+=String.fromCharCode(d[_]&127);return f}function it(d,o,s){let f="";s=Math.min(d.length,s);for(let _=o;_<s;++_)f+=String.fromCharCode(d[_]);return f}function ot(d,o,s){const f=d.length;(!o||o<0)&&(o=0),(!s||s<0||s>f)&&(s=f);let _="";for(let v=o;v<s;++v)_+=Xe[d[v]];return _}function st(d,o,s){const f=d.slice(o,s);let _="";for(let v=0;v<f.length-1;v+=2)_+=String.fromCharCode(f[v]+f[v+1]*256);return _}c.prototype.slice=function(o,s){const f=this.length;o=~~o,s=s===void 0?f:~~s,o<0?(o+=f,o<0&&(o=0)):o>f&&(o=f),s<0?(s+=f,s<0&&(s=0)):s>f&&(s=f),s<o&&(s=o);const _=this.subarray(o,s);return Object.setPrototypeOf(_,c.prototype),_};function ne(d,o,s){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+o>s)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(o,s,f){o=o>>>0,s=s>>>0,f||ne(o,s,this.length);let _=this[o],v=1,C=0;for(;++C<s&&(v*=256);)_+=this[o+C]*v;return _},c.prototype.readUintBE=c.prototype.readUIntBE=function(o,s,f){o=o>>>0,s=s>>>0,f||ne(o,s,this.length);let _=this[o+--s],v=1;for(;s>0&&(v*=256);)_+=this[o+--s]*v;return _},c.prototype.readUint8=c.prototype.readUInt8=function(o,s){return o=o>>>0,s||ne(o,1,this.length),this[o]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(o,s){return o=o>>>0,s||ne(o,2,this.length),this[o]|this[o+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(o,s){return o=o>>>0,s||ne(o,2,this.length),this[o]<<8|this[o+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},c.prototype.readBigUInt64LE=qe(function(o){o=o>>>0,j(o,"offset");const s=this[o],f=this[o+7];(s===void 0||f===void 0)&&P(o,this.length-8);const _=s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,v=this[++o]+this[++o]*2**8+this[++o]*2**16+f*2**24;return BigInt(_)+(BigInt(v)<<BigInt(32))}),c.prototype.readBigUInt64BE=qe(function(o){o=o>>>0,j(o,"offset");const s=this[o],f=this[o+7];(s===void 0||f===void 0)&&P(o,this.length-8);const _=s*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],v=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f;return(BigInt(_)<<BigInt(32))+BigInt(v)}),c.prototype.readIntLE=function(o,s,f){o=o>>>0,s=s>>>0,f||ne(o,s,this.length);let _=this[o],v=1,C=0;for(;++C<s&&(v*=256);)_+=this[o+C]*v;return v*=128,_>=v&&(_-=Math.pow(2,8*s)),_},c.prototype.readIntBE=function(o,s,f){o=o>>>0,s=s>>>0,f||ne(o,s,this.length);let _=s,v=1,C=this[o+--_];for(;_>0&&(v*=256);)C+=this[o+--_]*v;return v*=128,C>=v&&(C-=Math.pow(2,8*s)),C},c.prototype.readInt8=function(o,s){return o=o>>>0,s||ne(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},c.prototype.readInt16LE=function(o,s){o=o>>>0,s||ne(o,2,this.length);const f=this[o]|this[o+1]<<8;return f&32768?f|4294901760:f},c.prototype.readInt16BE=function(o,s){o=o>>>0,s||ne(o,2,this.length);const f=this[o+1]|this[o]<<8;return f&32768?f|4294901760:f},c.prototype.readInt32LE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},c.prototype.readInt32BE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},c.prototype.readBigInt64LE=qe(function(o){o=o>>>0,j(o,"offset");const s=this[o],f=this[o+7];(s===void 0||f===void 0)&&P(o,this.length-8);const _=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(f<<24);return(BigInt(_)<<BigInt(32))+BigInt(s+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),c.prototype.readBigInt64BE=qe(function(o){o=o>>>0,j(o,"offset");const s=this[o],f=this[o+7];(s===void 0||f===void 0)&&P(o,this.length-8);const _=(s<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(_)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f)}),c.prototype.readFloatLE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),i.read(this,o,!0,23,4)},c.prototype.readFloatBE=function(o,s){return o=o>>>0,s||ne(o,4,this.length),i.read(this,o,!1,23,4)},c.prototype.readDoubleLE=function(o,s){return o=o>>>0,s||ne(o,8,this.length),i.read(this,o,!0,52,8)},c.prototype.readDoubleBE=function(o,s){return o=o>>>0,s||ne(o,8,this.length),i.read(this,o,!1,52,8)};function ue(d,o,s,f,_,v){if(!c.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>_||o<v)throw new RangeError('"value" argument is out of bounds');if(s+f>d.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(o,s,f,_){if(o=+o,s=s>>>0,f=f>>>0,!_){const G=Math.pow(2,8*f)-1;ue(this,o,s,f,G,0)}let v=1,C=0;for(this[s]=o&255;++C<f&&(v*=256);)this[s+C]=o/v&255;return s+f},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(o,s,f,_){if(o=+o,s=s>>>0,f=f>>>0,!_){const G=Math.pow(2,8*f)-1;ue(this,o,s,f,G,0)}let v=f-1,C=1;for(this[s+v]=o&255;--v>=0&&(C*=256);)this[s+v]=o/C&255;return s+f},c.prototype.writeUint8=c.prototype.writeUInt8=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,1,255,0),this[s]=o&255,s+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,2,65535,0),this[s]=o&255,this[s+1]=o>>>8,s+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,2,65535,0),this[s]=o>>>8,this[s+1]=o&255,s+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,4,4294967295,0),this[s+3]=o>>>24,this[s+2]=o>>>16,this[s+1]=o>>>8,this[s]=o&255,s+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,4,4294967295,0),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4};function xe(d,o,s,f,_){k(o,f,_,d,s,7);let v=Number(o&BigInt(4294967295));d[s++]=v,v=v>>8,d[s++]=v,v=v>>8,d[s++]=v,v=v>>8,d[s++]=v;let C=Number(o>>BigInt(32)&BigInt(4294967295));return d[s++]=C,C=C>>8,d[s++]=C,C=C>>8,d[s++]=C,C=C>>8,d[s++]=C,s}function Be(d,o,s,f,_){k(o,f,_,d,s,7);let v=Number(o&BigInt(4294967295));d[s+7]=v,v=v>>8,d[s+6]=v,v=v>>8,d[s+5]=v,v=v>>8,d[s+4]=v;let C=Number(o>>BigInt(32)&BigInt(4294967295));return d[s+3]=C,C=C>>8,d[s+2]=C,C=C>>8,d[s+1]=C,C=C>>8,d[s]=C,s+8}c.prototype.writeBigUInt64LE=qe(function(o,s=0){return xe(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=qe(function(o,s=0){return Be(this,o,s,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(o,s,f,_){if(o=+o,s=s>>>0,!_){const se=Math.pow(2,8*f-1);ue(this,o,s,f,se-1,-se)}let v=0,C=1,G=0;for(this[s]=o&255;++v<f&&(C*=256);)o<0&&G===0&&this[s+v-1]!==0&&(G=1),this[s+v]=(o/C>>0)-G&255;return s+f},c.prototype.writeIntBE=function(o,s,f,_){if(o=+o,s=s>>>0,!_){const se=Math.pow(2,8*f-1);ue(this,o,s,f,se-1,-se)}let v=f-1,C=1,G=0;for(this[s+v]=o&255;--v>=0&&(C*=256);)o<0&&G===0&&this[s+v+1]!==0&&(G=1),this[s+v]=(o/C>>0)-G&255;return s+f},c.prototype.writeInt8=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,1,127,-128),o<0&&(o=255+o+1),this[s]=o&255,s+1},c.prototype.writeInt16LE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,2,32767,-32768),this[s]=o&255,this[s+1]=o>>>8,s+2},c.prototype.writeInt16BE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,2,32767,-32768),this[s]=o>>>8,this[s+1]=o&255,s+2},c.prototype.writeInt32LE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,4,2147483647,-2147483648),this[s]=o&255,this[s+1]=o>>>8,this[s+2]=o>>>16,this[s+3]=o>>>24,s+4},c.prototype.writeInt32BE=function(o,s,f){return o=+o,s=s>>>0,f||ue(this,o,s,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[s]=o>>>24,this[s+1]=o>>>16,this[s+2]=o>>>8,this[s+3]=o&255,s+4},c.prototype.writeBigInt64LE=qe(function(o,s=0){return xe(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=qe(function(o,s=0){return Be(this,o,s,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(d,o,s,f,_,v){if(s+f>d.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function $e(d,o,s,f,_){return o=+o,s=s>>>0,_||We(d,o,s,4),i.write(d,o,s,f,23,4),s+4}c.prototype.writeFloatLE=function(o,s,f){return $e(this,o,s,!0,f)},c.prototype.writeFloatBE=function(o,s,f){return $e(this,o,s,!1,f)};function ze(d,o,s,f,_){return o=+o,s=s>>>0,_||We(d,o,s,8),i.write(d,o,s,f,52,8),s+8}c.prototype.writeDoubleLE=function(o,s,f){return ze(this,o,s,!0,f)},c.prototype.writeDoubleBE=function(o,s,f){return ze(this,o,s,!1,f)},c.prototype.copy=function(o,s,f,_){if(!c.isBuffer(o))throw new TypeError("argument should be a Buffer");if(f||(f=0),!_&&_!==0&&(_=this.length),s>=o.length&&(s=o.length),s||(s=0),_>0&&_<f&&(_=f),_===f||o.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),o.length-s<_-f&&(_=o.length-s+f);const v=_-f;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,f,_):Uint8Array.prototype.set.call(o,this.subarray(f,_),s),v},c.prototype.fill=function(o,s,f,_){if(typeof o=="string"){if(typeof s=="string"?(_=s,s=0,f=this.length):typeof f=="string"&&(_=f,f=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!c.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(o.length===1){const C=o.charCodeAt(0);(_==="utf8"&&C<128||_==="latin1")&&(o=C)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(s<0||this.length<s||this.length<f)throw new RangeError("Out of range index");if(f<=s)return this;s=s>>>0,f=f===void 0?this.length:f>>>0,o||(o=0);let v;if(typeof o=="number")for(v=s;v<f;++v)this[v]=o;else{const C=c.isBuffer(o)?o:c.from(o,_),G=C.length;if(G===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(v=0;v<f-s;++v)this[v+s]=C[v%G]}return this};const Pe={};function Oe(d,o,s){Pe[d]=class extends s{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(d,o){return`The "${d}" argument must be of type number. Received type ${typeof o}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(d,o,s){let f=`The value of "${d}" is out of range.`,_=s;return Number.isInteger(s)&&Math.abs(s)>2**32?_=W(String(s)):typeof s=="bigint"&&(_=String(s),(s>BigInt(2)**BigInt(32)||s<-(BigInt(2)**BigInt(32)))&&(_=W(_)),_+="n"),f+=` It must be ${o}. Received ${_}`,f},RangeError);function W(d){let o="",s=d.length;const f=d[0]==="-"?1:0;for(;s>=f+4;s-=3)o=`_${d.slice(s-3,s)}${o}`;return`${d.slice(0,s)}${o}`}function w(d,o,s){j(o,"offset"),(d[o]===void 0||d[o+s]===void 0)&&P(o,d.length-(s+1))}function k(d,o,s,f,_,v){if(d>s||d<o){const C=typeof o=="bigint"?"n":"";let G;throw o===0||o===BigInt(0)?G=`>= 0${C} and < 2${C} ** ${(v+1)*8}${C}`:G=`>= -(2${C} ** ${(v+1)*8-1}${C}) and < 2 ** ${(v+1)*8-1}${C}`,new Pe.ERR_OUT_OF_RANGE("value",G,d)}w(f,_,v)}function j(d,o){if(typeof d!="number")throw new Pe.ERR_INVALID_ARG_TYPE(o,"number",d)}function P(d,o,s){throw Math.floor(d)!==d?(j(d,s),new Pe.ERR_OUT_OF_RANGE("offset","an integer",d)):o<0?new Pe.ERR_BUFFER_OUT_OF_BOUNDS:new Pe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${o}`,d)}const oe=/[^+/0-9A-Za-z-_]/g;function Se(d){if(d=d.split("=")[0],d=d.trim().replace(oe,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function Ie(d,o){o=o||1/0;let s;const f=d.length;let _=null;const v=[];for(let C=0;C<f;++C){if(s=d.charCodeAt(C),s>55295&&s<57344){if(!_){if(s>56319){(o-=3)>-1&&v.push(239,191,189);continue}else if(C+1===f){(o-=3)>-1&&v.push(239,191,189);continue}_=s;continue}if(s<56320){(o-=3)>-1&&v.push(239,191,189),_=s;continue}s=(_-55296<<10|s-56320)+65536}else _&&(o-=3)>-1&&v.push(239,191,189);if(_=null,s<128){if((o-=1)<0)break;v.push(s)}else if(s<2048){if((o-=2)<0)break;v.push(s>>6|192,s&63|128)}else if(s<65536){if((o-=3)<0)break;v.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((o-=4)<0)break;v.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return v}function Ze(d){const o=[];for(let s=0;s<d.length;++s)o.push(d.charCodeAt(s)&255);return o}function Ke(d,o){let s,f,_;const v=[];for(let C=0;C<d.length&&!((o-=2)<0);++C)s=d.charCodeAt(C),f=s>>8,_=s%256,v.push(_),v.push(f);return v}function Ge(d){return t.toByteArray(Se(d))}function ke(d,o,s,f){let _;for(_=0;_<f&&!(_+s>=o.length||_>=d.length);++_)o[_+s]=d[_];return _}function _e(d,o){return d instanceof o||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===o.name}function et(d){return d!==d}const Xe=function(){const d="0123456789abcdef",o=new Array(256);for(let s=0;s<16;++s){const f=s*16;for(let _=0;_<16;++_)o[f+_]=d[s]+d[_]}return o}();function qe(d){return typeof BigInt>"u"?Ye:d}function Ye(){throw new Error("BigInt not supported")}}(dr)),dr}var ma=pa();const ya=/^[A-Za-z]:\//;function _a(e=""){return e&&e.replace(/\\/g,"/").replace(ya,t=>t.toUpperCase())}const ba=/^[/\\]{2}/,wa=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,va=/^[A-Za-z]:$/,Ra=function(e){if(e.length===0)return".";e=_a(e);const t=e.match(ba),i=Uo(e),r=e[e.length-1]==="/";return e=Da(e,!i),e.length===0?i?"/":r?"./":".":(r&&(e+="/"),va.test(e)&&(e+="/"),t?i?`//${e}`:`//./${e}`:i&&!Uo(e)?`/${e}`:e)};function Da(e,t){let i="",r=0,n=-1,a=0,u=null;for(let c=0;c<=e.length;++c){if(c<e.length)u=e[c];else{if(u==="/")break;u="/"}if(u==="/"){if(!(n===c-1||a===1))if(a===2){if(i.length<2||r!==2||i[i.length-1]!=="."||i[i.length-2]!=="."){if(i.length>2){const l=i.lastIndexOf("/");l===-1?(i="",r=0):(i=i.slice(0,l),r=i.length-1-i.lastIndexOf("/")),n=c,a=0;continue}else if(i.length>0){i="",r=0,n=c,a=0;continue}}t&&(i+=i.length>0?"/..":"..",r=2)}else i.length>0?i+=`/${e.slice(n+1,c)}`:i=e.slice(n+1,c),r=c-n-1;n=c,a=0}else u==="."&&a!==-1?++a:a=-1}return i}const Uo=function(e){return wa.test(e)};class Ta{constructor(){this.files=new Map}normalizePath(t){let i=Ra(t);return i.startsWith("/")||(i="/"+i),i}set(t,i,r){const n=this.normalizePath(t);this.files.set(n,{content:i,mtime:r,size:i.length})}get(t){const i=this.normalizePath(t);return this.files.get(i)}has(t){const i=this.normalizePath(t);return this.files.has(i)}delete(t){const i=this.normalizePath(t);return this.files.delete(i)}keys(){return Array.from(this.files.keys())}clear(){this.files.clear()}size(){return this.files.size}}class Pa{constructor(t){const i=new ur.BrowserMessageReader(self),r=new ur.BrowserMessageWriter(self);this.connection=ur.createConnection(i,r),i.listen(n=>{console.log("Editor -> LSP:",n)}),this.bridge=null,this.events=[],this.vfs=new Ta,this.packageRegistry=null,this.proxyContext=null,this.resolvePackage=null,this.fonts=t,this.packageResolveCache=new Map}async start(){await ns(),console.log(`tinymist ${xo.version()} wasm is loaded!`),this.initializePackageRegistry(),this.initializeBridge(),this.setupConnectionHandlers(),this.connection.sendNotification("serverWorkerReady"),this.connection.listen()}initializePackageRegistry(){this.resolvePackage=t=>{const i=`${t.namespace}/${t.name}-${t.version}`,r=`/packages/${t.namespace}/${t.name}/${t.version}`;if(this.vfs.has(`${r}/.resolved`))return console.log(`Package ${i} already resolved, returning cached result`),r;if(this.packageResolveCache.has(i))throw console.log(`Package ${i} is being resolved, waiting...`),new Error(`Package ${i} is being downloaded, please retry`);const n=`https://packages.typst.org/${t.namespace}/${t.name}-${t.version}.tar.gz`;console.log(`Downloading: ${n}`);const a=this.downloadAndExtractPackage(n,r);this.packageResolveCache.set(i,a),a.finally(()=>{this.packageResolveCache.delete(i)});try{const u=new XMLHttpRequest;if(u.open("GET",n,!1),u.responseType="arraybuffer",u.send(),u.status!==200)throw this.packageResolveCache.delete(i),new Error(`Download failed: ${u.status} ${u.statusText}`);const c=new Uint8Array(u.response);console.log(`Downloaded: ${c.length} bytes`);const l=(g,m,b)=>{const T=`${r}/${g}`;this.vfs.set(T,m,b)};return this.proxyContext.untar(c,l),this.vfs.set(`${r}/.resolved`,new Uint8Array(0),Date.now()),console.log(`Package ${i} resolved successfully`),r}catch(u){throw this.packageResolveCache.delete(i),u}},this.proxyContext=new nr({})}async downloadAndExtractPackage(t,i){return new Promise((r,n)=>{const a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=()=>{if(a.status!==200){n(new Error(`Download failed: ${a.status} ${a.statusText}`));return}try{const u=new Uint8Array(a.response);console.log(`Downloaded: ${u.length} bytes`);const c=(l,g,m)=>{const b=`${i}/${l}`;this.vfs.set(b,g,m)};this.proxyContext.untar(u,c),this.vfs.set(`${i}/.resolved`,new Uint8Array(0),Date.now()),r(i)}catch(u){n(u)}},a.onerror=()=>{n(new Error("Network error"))},a.send()})}initializeBridge(){this.bridge=new xo({sendEvent:t=>{this.events.push(t)},sendRequest:({id:t,method:i,params:r})=>{this.connection.sendRequest(i,r).then(n=>this.bridge?.on_response({id:t,result:n})).catch(n=>this.bridge?.on_response({id:t,error:{code:-32603,message:n.toString()}}))},fsContent:t=>this.getFsContent(t),sendNotification:({method:t,params:i})=>{this.connection.sendNotification(t,i)},resolveFn:this.resolvePackage,extraFonts:this.fonts})}getFsContent(t){console.log("Reading file",t);try{if(console.log("file exists, returning",t),this.vfs.has(t)){const i=this.vfs.get(t).content;return{content:ma.Buffer.from(i).toString("base64"),exists:!0}}}catch(i){return console.error("err when reading file: ",i),{content:""}}return{content:"",exists:!1}}setupConnectionHandlers(){const t=i=>{for(const r of this.events.splice(0))this.bridge?.on_event(r);return i};this.connection.onInitialize(i=>t(this.bridge?.on_request(ia.InitializeRequest.method,{...i,initializationOptions:{formatterMode:"typstyle"}}))),this.connection.onRequest((i,r)=>t(this.bridge?.on_request(i,r))),this.connection.onNotification((i,r)=>t(this.bridge?.on_notification(i,r)))}}const ka=new Pa(await Promise.all(is.map(e=>e.getData())));ka.start();
