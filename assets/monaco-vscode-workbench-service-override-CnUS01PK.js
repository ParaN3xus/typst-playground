import{C as e,D as t,E as n,F as r,G as i,H as a,I as o,J as s,K as c,L as l,M as u,N as ee,P as te,Q as ne,R as re,S as ie,T as ae,U as oe,V as se,Y as ce,Z as le,a$ as ue,a1 as de,a2 as fe,a3 as pe,a4 as me,a5 as he,a6 as ge,aA as d,aB as f,aC as _e,aD as p,aE as ve,aF as ye,aG as be,aH as xe,aI as Se,aJ as Ce,aK as we,aL as Te,aM as Ee,aN as De,aO as Oe,aR as m,aS as ke,aT as Ae,aU as je,aV as Me,aW as Ne,aZ as Pe,a_ as Fe,ab as Ie,ac as Le,ad as Re,ae as ze,af as Be,ag as Ve,ah as He,ai as Ue,an as We,ao as Ge,ap as Ke,aq as qe,ar as Je,at as Ye,au as Xe,av as Ze,aw as Qe,ax as h,ay as $e,az as g,b$ as et,b0 as tt,b1 as nt,b2 as rt,b3 as it,b4 as at,b5 as ot,b6 as st,b7 as ct,b8 as lt,b9 as ut,bA as dt,bB as ft,bC as pt,bD as mt,bE as ht,bF as gt,bG as _t,bH as vt,bI as yt,bJ as bt,bK as xt,bL as St,bO as Ct,bP as wt,bQ as Tt,bR as Et,bS as Dt,bT as Ot,bU as kt,bV as At,bW as jt,bX as Mt,bY as Nt,bZ as Pt,b_ as Ft,ba as It,bf as Lt,bg as Rt,bj as zt,bk as Bt,br as Vt,bs as Ht,bt as Ut,bu as Wt,bx as Gt,by as Kt,bz as qt,c0 as Jt,c3 as Yt,c4 as Xt,c7 as Zt,c8 as Qt,c9 as $t,cA as en,cB as tn,cC as _,cD as nn,cE as rn,cF as an,cG as on,cH as sn,cI as cn,cJ as ln,cP as un,cQ as dn,cT as fn,cU as pn,cV as mn,cW as hn,cX as gn,cY as _n,ca as vn,cb as yn,cc as bn,cd as xn,ce as Sn,cf as Cn,cg as wn,ch as Tn,ci as En,cj as Dn,ck as On,cl as kn,cm as An,cn as jn,co as Mn,cp as Nn,cq as Pn,cr as Fn,cs as In,ct as Ln,cu as Rn,cv as zn,cw as Bn,cx as Vn,cy as Hn,cz as Un,d$ as Wn,dE as Gn,dF as Kn,dJ as qn,dK as Jn,dN as Yn,dO as Xn,dP as Zn,dQ as Qn,dT as $n,dU as er,dV as tr,dW as nr,dX as rr,dY as ir,dZ as ar,d_ as or,dg as sr,dh as cr,di as lr,dj as ur,dk as dr,dn as fr,do as pr,dp as mr,dq as hr,dr as gr,ds as _r,dt as vr,du as yr,dv as br,dw as xr,dx as Sr,dy as Cr,e0 as wr,e1 as Tr,e2 as v,e3 as Er,e4 as Dr,e5 as Or,e6 as kr,e7 as Ar,e8 as jr,e9 as Mr,eA as Nr,eB as Pr,eC as Fr,eD as Ir,eE as Lr,eF as Rr,eG as y,eH as zr,eI as Br,eJ as Vr,eK as Hr,eL as Ur,eM as Wr,eN as Gr,eO as Kr,eP as qr,eW as Jr,eX as Yr,ea as Xr,eb as Zr,ec as Qr,ed as $r,ef as ei,eg as ti,eh as ni,ei as ri,ej as ii,ek as ai,el as oi,em as si,en as ci,eo as li,ep as ui,er as di,ev as fi,ez as pi,f as mi,f$ as hi,f3 as gi,f4 as _i,f5 as vi,f7 as yi,f8 as bi,f9 as xi,fA as Si,fB as Ci,fC as wi,fD as Ti,fE as Ei,fF as Di,fG as b,fH as Oi,fI as ki,fJ as Ai,fK as x,fL as ji,fM as Mi,fN as Ni,fO as Pi,fP as Fi,fQ as Ii,fR as S,fS as Li,fT as Ri,fU as zi,fV as Bi,fW as Vi,fX as C,fY as w,fZ as Hi,f_ as Ui,fa as Wi,fb as Gi,fc as Ki,fd as T,fe as qi,fk as Ji,fl as Yi,fq as Xi,fr as Zi,fs as E,ft as Qi,fu as D,fv as O,fw as $i,fx as ea,fy as ta,fz as na,g as ra,g$ as ia,g0 as aa,g1 as oa,g2 as sa,g3 as ca,g4 as la,g5 as ua,g6 as da,g7 as fa,g8 as pa,g9 as ma,gA as ha,gB as ga,gC as _a,gD as va,gE as ya,gF as ba,gG as xa,gH as Sa,gI as k,gJ as Ca,gK as wa,gL as Ta,gM as A,gN as Ea,gO as Da,gP as j,gQ as M,gR as Oa,gS as ka,gT as Aa,gU as ja,gV as Ma,gW as Na,gX as Pa,gY as Fa,gZ as Ia,g_ as N,go as La,gp as Ra,gs as za,gt as Ba,gu as Va,gv as Ha,gw as Ua,gx as Wa,gy as Ga,gz as Ka,h as qa,h0 as Ja,h1 as Ya,h2 as Xa,h3 as Za,h4 as Qa,h5 as $a,h6 as eo,h7 as to,h8 as no,h9 as ro,hA as io,hB as ao,hC as oo,hD as so,hE as co,hF as lo,hG as uo,hH as fo,hI as po,hJ as mo,hK as ho,hL as go,hV as _o,hW as vo,hX as yo,hY as bo,hZ as xo,h_ as So,ha as Co,hb as wo,hc as To,hd as Eo,he as Do,hf as Oo,hg as ko,hh as Ao,hi as jo,hj as Mo,hk as No,hl as Po,hm as Fo,hn as Io,ho as P,hp as Lo,hq as Ro,hr as zo,hs as Bo,ht as Vo,hu as Ho,hv as Uo,hw as Wo,hx as Go,hy as Ko,hz as qo,i3 as Jo,i7 as Yo,i8 as Xo,iA as Zo,iB as Qo,iC as $o,iD as es,iE as ts,iF as ns,iL as rs,iM as os,iN as F,iO as ss,iP as cs,iQ as ls,iR as us,iS as ds,iT as I,iU as fs,iV as ps,iW as ms,iX as hs,iY as gs,iZ as _s,ia as vs,ic as ys,if as bs,ih as xs,ii as Ss,ij as Cs,it as ws,iu as L,iv as Ts,iw as Es,ix as Ds,iy as Os,iz as ks,j$ as As,j0 as js,j1 as Ms,j4 as Ns,j5 as Ps,j9 as Fs,jA as R,jB as Is,jC as z,jD as Ls,jE as B,jF as Rs,jK as V,jL as zs,jM as Bs,jN as Vs,jS as H,jT as Hs,jU as U,jV as Us,jW as Ws,jX as Gs,jY as W,jZ as Ks,j_ as qs,ja as Js,jb as Ys,jm as Xs,jn as Zs,jq as Qs,js as $s,jt as ec,ju as tc,jv as nc,jw as rc,jx as ic,jy as ac,jz as G,k0 as oc,k1 as sc,k2 as cc,k7 as lc,k8 as uc,k9 as dc,ka as fc,kb as pc,kc as mc,kd as hc,ke as gc,kf as _c,kg as vc,kh as yc,ki as bc,kj as K,kk as q,kl as J,m as xc,n as Sc,p as Cc,q as wc,r as Tc,s as Ec,t as Dc,u as Oc,v as Y,w as kc,x as Ac,y as jc}from"./index-Diz4JYK5.js";_e(),we(),ft(),mt(),Xr(),Ki(),Qi(),ea(),Di(),Ca(),Xa(),No(),Fo(),Ro(),Vo(),ao(),ws(),$o(),ss(),ls(),ds(),js(),Zs(),Qs(),G(),Bs(),W(),As(),cc(),lc(),fc(),hc(),_c(),J();var Mc={},Nc={};Hn(),Yi(),lo(),uo(),fo(),po(),mo(),ho(),go(),_o(),yo(),So(),Jo(),Xo(),ys(),bs(),Cs(),Rs(),zr(),es(),Bi(),Sr(),qi();var Pc;(function(e){e[e.ADD=0]=`ADD`,e[e.CHANGE=1]=`CHANGE`,e[e.EXPAND_COLLAPSE=2]=`EXPAND_COLLAPSE`,e[e.REMOVE=3]=`REMOVE`})(Pc||={});var Fc;(function(e){e[e.ADD=0]=`ADD`,e[e.REMOVE=1]=`REMOVE`})(Fc||={});var Ic=class extends H{constructor(e,t){super(),this.item=e,this.onClose=t,this._onDidClose=this._register(new V),this.onDidClose=this._onDidClose.event,this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.registerListeners()}registerListeners(){this._register(this.item.onDidChangeVisibility(e=>this._onDidChangeVisibility.fire(e))),zs.once(this.item.onDidClose)(()=>{this._onDidClose.fire(),this.dispose()})}get progress(){return this.item.progress}updateSeverity(e){this.item.updateSeverity(e)}updateMessage(e){this.item.updateMessage(e)}updateActions(e){this.item.updateActions(e)}close(){this.onClose(this.item),this.dispose()}};(class e extends H{constructor(){super(...arguments),this._onDidChangeNotification=this._register(new V),this.onDidChangeNotification=this._onDidChangeNotification.event,this._onDidChangeStatusMessage=this._register(new V),this.onDidChangeStatusMessage=this._onDidChangeStatusMessage.event,this._onDidChangeFilter=this._register(new V),this.onDidChangeFilter=this._onDidChangeFilter.event,this._notifications=[],this.filter={global:y.OFF,sources:new Map}}static{this.NO_OP_NOTIFICATION=new Lr}get notifications(){return this._notifications}get statusMessage(){return this._statusMessage}setFilter(e){let t=!1;typeof e.global==`number`&&(t=this.filter.global!==e.global,this.filter.global=e.global);let n=!1;e.sources&&(n=!uc(this.filter.sources,e.sources),this.filter.sources=e.sources),(t||n)&&this._onDidChangeFilter.fire({global:t?e.global:void 0,sources:n?e.sources:void 0})}addNotification(t){let n=this.createViewItem(t);if(!n)return e.NO_OP_NOTIFICATION;let r=this.findNotification(n);return r?.close(),this._notifications.splice(0,0,n),this._onDidChangeNotification.fire({item:n,index:0,kind:Pc.ADD}),new Ic(n,e=>this.onClose(e))}onClose(e){let t=this.findNotification(e);t&&t!==e?t.close():e.close()}findNotification(e){return this._notifications.find(t=>t.equals(e))}createViewItem(e){let t=Bc.create(e,this.filter);if(!t)return;let n=(e,n)=>{let r=this._notifications.indexOf(t);r>=0&&this._onDidChangeNotification.fire({item:t,index:r,kind:e,detail:n})},r=t.onDidChangeExpansion(()=>n(Pc.EXPAND_COLLAPSE)),i=t.onDidChangeContent(e=>n(Pc.CHANGE,e.kind));return zs.once(t.onDidClose)(()=>{r.dispose(),i.dispose();let e=this._notifications.indexOf(t);e>=0&&(this._notifications.splice(e,1),this._onDidChangeNotification.fire({item:t,index:e,kind:Pc.REMOVE}))}),t}showStatusMessage(e,t){let n=Hc.create(e,t);return n?(this._statusMessage=n,this._onDidChangeStatusMessage.fire({kind:Fc.ADD,item:n}),{close:()=>{this._statusMessage===n&&(this._statusMessage=void 0,this._onDidChangeStatusMessage.fire({kind:Fc.REMOVE,item:n}))}}):{close:()=>{}}}});function Lc(e){return e instanceof Bc}var Rc;(function(e){e[e.SEVERITY=0]=`SEVERITY`,e[e.MESSAGE=1]=`MESSAGE`,e[e.ACTIONS=2]=`ACTIONS`,e[e.PROGRESS=3]=`PROGRESS`})(Rc||={});var zc=class extends H{constructor(){super(),this._onDidChange=this._register(new V),this.onDidChange=this._onDidChange.event,this._state=Object.create(null)}get state(){return this._state}infinite(){this._state.infinite||(this._state.infinite=!0,this._state.total=void 0,this._state.worked=void 0,this._state.done=void 0,this._onDidChange.fire())}done(){this._state.done||(this._state.done=!0,this._state.infinite=void 0,this._state.total=void 0,this._state.worked=void 0,this._onDidChange.fire())}total(e){this._state.total!==e&&(this._state.total=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire())}worked(e){typeof this._state.worked==`number`?this._state.worked+=e:this._state.worked=e,this._state.infinite=void 0,this._state.done=void 0,this._onDidChange.fire()}},Bc=class e extends H{static{this.MAX_MESSAGE_LENGTH=1e3}static create(t,n){if(!t||!t.message||vc(t.message))return;let r;r=typeof t.severity==`number`?t.severity:T.Info;let i=e.parseNotificationMessage(t.message);if(!i)return;let a;t.actions?a=t.actions:ts(t.message)&&(a={primary:t.message.actions});let o=t.priority??Rr.DEFAULT;return(o===Rr.DEFAULT||o===Rr.OPTIONAL)&&r!==T.Error&&(n.global===y.ERROR||Br(t.source)&&n.sources.get(t.source.id)===y.ERROR)&&(o=Rr.SILENT),new e(t.id,r,t.sticky,o,i,t.source,t.progress,a)}static parseNotificationMessage(t){let n;if(t instanceof Error?n=ns(t,!1):typeof t==`string`&&(n=t),!n)return;let r=n;n.length>e.MAX_MESSAGE_LENGTH&&(n=`${n.substr(0,e.MAX_MESSAGE_LENGTH)}...`),n=n.replace(/(\r\n|\n|\r)/gm,` `).trim();let i=Cr(n);return{raw:r,linkedText:i,original:t}}constructor(e,t,n,r,i,a,o,s){super(),this.id=e,this._severity=t,this._sticky=n,this._priority=r,this._message=i,this._source=a,this._visible=!1,this._onDidChangeExpansion=this._register(new V),this.onDidChangeExpansion=this._onDidChangeExpansion.event,this._onDidClose=this._register(new V),this.onDidClose=this._onDidClose.event,this._onDidChangeContent=this._register(new V),this.onDidChangeContent=this._onDidChangeContent.event,this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,o&&this.setProgress(o),this.setActions(s)}setProgress(e){e.infinite?this.progress.infinite():e.total&&(this.progress.total(e.total),e.worked&&this.progress.worked(e.worked))}setActions(e={primary:[],secondary:[]}){this._actions={primary:Array.isArray(e.primary)?e.primary:[],secondary:Array.isArray(e.secondary)?e.secondary:[]},this._expanded=e.primary&&e.primary.length>0}get canCollapse(){return!this.hasActions}get expanded(){return!!this._expanded}get severity(){return this._severity}get sticky(){if(this._sticky)return!0;let e=this.hasActions;return!!(e&&this._severity===T.Error||!e&&this._expanded||this._progress&&!this._progress.state.done)}get priority(){return this._priority}get hasActions(){return!this._actions||!this._actions.primary?!1:this._actions.primary.length>0}get hasProgress(){return!!this._progress}get progress(){return this._progress||(this._progress=this._register(new zc),this._register(this._progress.onDidChange(()=>this._onDidChangeContent.fire({kind:Rc.PROGRESS})))),this._progress}get message(){return this._message}get source(){return typeof this._source==`string`?this._source:this._source?this._source.label:void 0}get sourceId(){return this._source&&typeof this._source!=`string`&&`id`in this._source?this._source.id:void 0}get actions(){return this._actions}get visible(){return this._visible}updateSeverity(e){e!==this._severity&&(this._severity=e,this._onDidChangeContent.fire({kind:Rc.SEVERITY}))}updateMessage(t){let n=e.parseNotificationMessage(t);!n||n.raw===this._message.raw||(this._message=n,this._onDidChangeContent.fire({kind:Rc.MESSAGE}))}updateActions(e){this.setActions(e),this._onDidChangeContent.fire({kind:Rc.ACTIONS})}updateVisibility(e){this._visible!==e&&(this._visible=e,this._onDidChangeVisibility.fire(e))}expand(){this._expanded||!this.canCollapse||(this._expanded=!0,this._onDidChangeExpansion.fire())}collapse(e){!this._expanded||!this.canCollapse||(this._expanded=!1,e||this._onDidChangeExpansion.fire())}toggle(){this._expanded?this.collapse():this.expand()}close(){this._onDidClose.fire(),this.dispose()}equals(e){if(this.hasProgress||e.hasProgress)return!1;if(typeof this.id==`string`||typeof e.id==`string`)return this.id===e.id;if(typeof this._source==`object`){if(this._source.label!==e.source||this._source.id!==e.sourceId)return!1}else if(this._source!==e.source)return!1;if(this._message.raw!==e.message.raw)return!1;let t=this._actions&&this._actions.primary||[],n=e.actions&&e.actions.primary||[];return mc(t,n,(e,t)=>e.id+e.label===t.id+t.label)}},Vc=class e extends S{constructor(t,n){super(t,n.label,void 0,!0,async()=>{n.run(),this._onDidRun.fire()}),this._onDidRun=this._register(new V),this.onDidRun=this._onDidRun.event,this._keepOpen=!!n.keepOpen,this._menu=!n.isSecondary&&n.menu?n.menu.map((n,r)=>new e(`${t}.${r}`,n)):void 0}get menu(){return this._menu}get keepOpen(){return this._keepOpen}},Hc=class{static create(e,t){if(!e||vc(e))return;let n;if(e instanceof Error?n=ns(e,!1):typeof e==`string`&&(n=e),n)return{message:n,options:t}}};Ii(),hi(),ps(),Hi(),Ni(),Xn(),Qn(),Zi(),st(),zr(),Bi(),ki(),W(),le(),pn();const Uc=`notifications.showList`,Wc=`notifications.hideList`,Gc=`notifications.hideToasts`,Kc=`notifications.focusToasts`,qc=`notification.collapse`,Jc=`notification.expand`,Yc=`notification.acceptPrimaryAction`,Xc=`notification.clear`,Zc=`notifications.clearAll`,Qc=`notifications.toggleDoNotDisturbMode`,$c=`notifications.toggleDoNotDisturbModeBySource`;function el(e,t){if(Lc(t))return t;let n=e.lastFocusedList;if(n instanceof Yn){let e=n.getFocusedElements()[0];if(Lc(e)||n.isDOMFocused()&&(e=n.element(0)),Lc(e))return e}}function tl(e,t,n){w.registerCommandAndKeybindingRule({id:Uc,weight:C.WorkbenchContrib,primary:Io(Lo.CtrlCmd|P.KeyK,Lo.CtrlCmd|Lo.Shift|P.KeyN),handler:()=>{t.hide(),e.show()}}),w.registerCommandAndKeybindingRule({id:Wc,weight:C.WorkbenchContrib+50,when:nt,primary:P.Escape,handler:()=>e.hide()}),Ui.registerCommand(`notifications.toggleList`,()=>{e.isVisible?e.hide():(t.hide(),e.show())}),w.registerCommandAndKeybindingRule({id:Xc,weight:C.WorkbenchContrib,when:tt,primary:P.Delete,mac:{primary:Lo.CtrlCmd|P.Backspace},handler:(e,t)=>{let n=e.get(fn),r=el(e.get(Zn),t);r&&!r.hasProgress&&(r.close(),n.playSignal(ce.clear))}}),w.registerCommandAndKeybindingRule({id:Jc,weight:C.WorkbenchContrib,when:tt,primary:P.RightArrow,handler:(e,t)=>{let n=el(e.get(Zn),t);n?.expand()}}),w.registerCommandAndKeybindingRule({id:Yc,weight:C.WorkbenchContrib,when:I.or(tt,rt),primary:Lo.CtrlCmd|Lo.Shift|P.KeyA,handler:e=>{let t=e.get(F).createInstance(nl),r=el(e.get(Zn))||n.notifications.at(0);if(!r)return;let i=r.actions?.primary?r.actions.primary.at(0):void 0;i&&(t.run(i,r),r.close(),t.dispose())}}),w.registerCommandAndKeybindingRule({id:qc,weight:C.WorkbenchContrib,when:tt,primary:P.LeftArrow,handler:(e,t)=>{let n=el(e.get(Zn),t);n?.collapse()}}),w.registerCommandAndKeybindingRule({id:`notification.toggle`,weight:C.WorkbenchContrib,when:tt,primary:P.Space,secondary:[P.Enter],handler:e=>{let t=el(e.get(Zn));t?.toggle()}}),Ui.registerCommand(Gc,e=>{t.hide()}),w.registerKeybindingRule({id:Gc,weight:C.WorkbenchContrib-50,when:rt,primary:P.Escape}),w.registerKeybindingRule({id:Gc,weight:C.WorkbenchContrib+100,when:I.and(rt,tt),primary:P.Escape}),Ui.registerCommand(Kc,()=>t.focus()),w.registerCommandAndKeybindingRule({id:`notifications.focusNextToast`,weight:C.WorkbenchContrib,when:I.and(tt,rt),primary:P.DownArrow,handler:()=>{t.focusNext()}}),w.registerCommandAndKeybindingRule({id:`notifications.focusPreviousToast`,weight:C.WorkbenchContrib,when:I.and(tt,rt),primary:P.UpArrow,handler:()=>{t.focusPrevious()}}),w.registerCommandAndKeybindingRule({id:`notifications.focusFirstToast`,weight:C.WorkbenchContrib,when:I.and(tt,rt),primary:P.PageUp,secondary:[P.Home],handler:()=>{t.focusFirst()}}),w.registerCommandAndKeybindingRule({id:`notifications.focusLastToast`,weight:C.WorkbenchContrib,when:I.and(tt,rt),primary:P.PageDown,secondary:[P.End],handler:()=>{t.focusLast()}}),Ui.registerCommand(Zc,()=>e.clearAll()),Ui.registerCommand(Qc,e=>{let t=e.get(Gi);t.setFilter(t.getFilter()===y.ERROR?y.OFF:y.ERROR)}),Ui.registerCommand($c,e=>{let t=e.get(Gi),n=e.get(Oi),r=t.getFilters().sort((e,t)=>e.label.localeCompare(t.label)),i=new U,a=i.add(n.createQuickPick());a.items=r.map(e=>({id:e.id,label:e.label,tooltip:`${e.label} (${e.id})`,filter:e.filter})),a.canSelectMany=!0,a.placeholder=R(3453,`Select sources to enable all notifications from`),a.selectedItems=a.items.filter(e=>e.filter===y.OFF),a.show(),i.add(a.onDidAccept(async()=>{for(let e of a.items)t.setFilter({id:e.id,label:e.label,filter:a.selectedItems.includes(e)?y.OFF:y.ERROR});a.hide()})),i.add(a.onDidHide(()=>i.dispose()))});let r=Is(3454,`Notifications`);ji.appendMenuItem(x.CommandPalette,{command:{id:Uc,title:Is(3455,`Show Notifications`),category:r}}),ji.appendMenuItem(x.CommandPalette,{command:{id:Wc,title:Is(3456,`Hide Notifications`),category:r},when:nt}),ji.appendMenuItem(x.CommandPalette,{command:{id:Zc,title:Is(3457,`Clear All Notifications`),category:r}}),ji.appendMenuItem(x.CommandPalette,{command:{id:Yc,title:Is(3458,`Accept Notification Primary Action`),category:r}}),ji.appendMenuItem(x.CommandPalette,{command:{id:Qc,title:Is(3459,`Toggle Do Not Disturb Mode`),category:r}}),ji.appendMenuItem(x.CommandPalette,{command:{id:$c,title:Is(3460,`Toggle Do Not Disturb Mode By Source...`),category:r}}),ji.appendMenuItem(x.CommandPalette,{command:{id:Kc,title:Is(3461,`Focus Notification Toast`),category:r},when:rt})}let nl=class extends Li{constructor(e,t){super(),this.telemetryService=e,this.notificationService=t}async runAction(e,t){this.telemetryService.publicLog2(`workbenchActionExecuted`,{id:e.id,from:`message`});try{await super.runAction(e,t)}catch(e){this.notificationService.error(e)}}};nl=K([q(0,Xi),q(1,Gi)],nl),lt(),wt(),kt(),ei(),Ei(),oa(),Ta(),co(),Ls();var rl={};_r(),si(),ui(),Pr(),za(),Ga(),Sa(),Fs(),J(),G(),Bi(),_n(),sr(),oo(Nc);const il=cr(`notifications-clear`,B.close,R(3426,`Icon for the clear action in notifications.`)),al=cr(`notifications-clear-all`,B.clearAll,R(3427,`Icon for the clear all action in notifications.`)),ol=cr(`notifications-hide`,B.chevronDown,R(3428,`Icon for the hide action in notifications.`)),sl=cr(`notifications-expand`,B.chevronUp,R(3429,`Icon for the expand action in notifications.`)),cl=cr(`notifications-collapse`,B.chevronDown,R(3430,`Icon for the collapse action in notifications.`)),ll=cr(`notifications-configure`,B.gear,R(3431,`Icon for the configure action in notifications.`)),ul=cr(`notifications-do-not-disturb`,B.bellSlash,R(3432,`Icon for the mute all action in notifications.`));let dl=class extends S{static{this.ID=Xc}static{this.LABEL=R(3433,`Clear Notification`)}constructor(e,t,n){super(e,t,z.asClassName(il)),this.commandService=n}async run(e){this.commandService.executeCommand(Xc,e)}};dl=K([q(2,aa)],dl);let fl=class extends S{static{this.ID=Zc}static{this.LABEL=R(3434,`Clear All Notifications`)}constructor(e,t,n){super(e,t,z.asClassName(al)),this.commandService=n}async run(){this.commandService.executeCommand(Zc)}};fl=K([q(2,aa)],fl);let pl=class extends S{static{this.ID=Qc}static{this.LABEL=R(3435,`Toggle Do Not Disturb Mode`)}constructor(e,t,n){super(e,t,z.asClassName(ul)),this.commandService=n}async run(){this.commandService.executeCommand(Qc)}};pl=K([q(2,aa)],pl);let ml=class extends S{static{this.ID=$c}static{this.LABEL=R(3436,`Toggle Do Not Disturb Mode By Source...`)}constructor(e,t,n){super(e,t),this.commandService=n}async run(){this.commandService.executeCommand($c)}};ml=K([q(2,aa)],ml);var hl=class extends S{static{this.ID=`workbench.action.configureDoNotDisturbMode`}static{this.LABEL=R(3437,`Configure Do Not Disturb...`)}constructor(e,t){super(e,t,z.asClassName(ul))}};let gl=class extends S{static{this.ID=Wc}static{this.LABEL=R(3438,`Hide Notifications`)}constructor(e,t,n){super(e,t,z.asClassName(ol)),this.commandService=n}async run(){this.commandService.executeCommand(Wc)}};gl=K([q(2,aa)],gl);let _l=class extends S{static{this.ID=Jc}static{this.LABEL=R(3439,`Expand Notification`)}constructor(e,t,n){super(e,t,z.asClassName(sl)),this.commandService=n}async run(e){this.commandService.executeCommand(Jc,e)}};_l=K([q(2,aa)],_l);let vl=class extends S{static{this.ID=qc}static{this.LABEL=R(3440,`Collapse Notification`)}constructor(e,t,n){super(e,t,z.asClassName(cl)),this.commandService=n}async run(e){this.commandService.executeCommand(qc,e)}};vl=K([q(2,aa)],vl);var yl=class extends S{static{this.ID=`workbench.action.configureNotification`}static{this.LABEL=R(3441,`More Actions...`)}constructor(e,t,n){super(e,t,z.asClassName(ll)),this.notification=n}};let bl=class extends S{static{this.ID=`workbench.action.copyNotificationMessage`}static{this.LABEL=R(3442,`Copy Text`)}constructor(e,t,n){super(e,t),this.clipboardService=n}run(e){return this.clipboardService.writeText(e.message.raw)}};bl=K([q(2,gn)],bl),J(),G(),Bi(),ss(),W(),pr(),zr(),Ki(),hc(),Rs(),Ls(),ni(),Ua(),Bs(),Ro(),xr(),qi();var xl,Sl,Cl=class e{static{this.ROW_HEIGHT=42}static{this.LINE_HEIGHT=22}constructor(e){this.offsetHelper=this.createOffsetHelper(e)}createOffsetHelper(e){return e.appendChild(A(`.notification-offset-helper`))}getHeight(t){if(!t.expanded)return e.ROW_HEIGHT;let n=e.ROW_HEIGHT,r=this.computePreferredHeight(t),i=e.LINE_HEIGHT<r;if(i){let t=r-e.LINE_HEIGHT;n+=t}return(t.source||gc(t.actions&&t.actions.primary))&&(n+=e.ROW_HEIGHT),n===e.ROW_HEIGHT&&t.collapse(!0),n}computePreferredHeight(e){let t=0;e.hasProgress||t++,e.canCollapse&&t++,gc(e.actions&&e.actions.secondary)&&t++,this.offsetHelper.style.width=`${450-(40+t*30-Math.max(t-1,0)*4)}px`;let n=wl.render(e.message);this.offsetHelper.appendChild(n);let r=Math.max(this.offsetHelper.offsetHeight,this.offsetHelper.scrollHeight);return ka(this.offsetHelper),r}getTemplateId(e){if(e instanceof Bc)return Tl.TEMPLATE_ID;throw Error(`unknown element type: `+e)}},wl=class{static render(e,t){let n=A(`span`);for(let r of e.linkedText.nodes)if(typeof r==`string`)n.appendChild(document.createTextNode(r));else{let e=r.title;!e&&r.href.startsWith(`command:`)?e=R(3483,`Click to execute command '{0}'`,r.href.substr(8)):e||=r.href;let i=A(`a`,{href:r.href,title:e,tabIndex:0},r.label);if(t){let e=e=>{ro(e)&&Da.stop(e,!0),t.callback(r.href)},n=t.toDispose.add(new Ha(i,j.CLICK)).event,a=t.toDispose.add(new Ha(i,j.KEY_DOWN)).event,o=zs.chain(a,e=>e.filter(e=>{let t=new Po(e);return t.equals(P.Space)||t.equals(P.Enter)}));t.toDispose.add(xa.addTarget(i));let s=t.toDispose.add(new Ha(i,ba.Tap)).event;zs.any(n,s,o)(e,null,t.toDispose)}n.appendChild(i)}return n}};let Tl=class{static{xl=this}static{this.TEMPLATE_ID=`notification`}constructor(e,t,n,r){this.actionRunner=e,this.contextMenuService=t,this.instantiationService=n,this.notificationService=r}get templateId(){return xl.TEMPLATE_ID}renderTemplate(e){let t=Object.create(null);t.toDispose=new U,t.container=A(`.notification-list-item`),t.mainRow=A(`.notification-list-item-main-row`),t.icon=A(`.notification-list-item-icon.codicon`),t.message=A(`.notification-list-item-message`);let n=this,r=A(`.notification-list-item-toolbar-container`);return t.toolbar=new ai(r,{ariaLabel:R(3484,`Notification Actions`),actionViewItemProvider:(e,r)=>{if(e instanceof yl)return t.toDispose.add(new ti(e,{getActions(){let t=[],r={id:e.notification.sourceId,label:e.notification.source};if(Br(r)){let i=n.notificationService.getFilter(r)===y.ERROR;t.push(Vi({id:r.id,label:i?R(3485,`Turn On All Notifications from '{0}'`,r.label):R(3486,`Turn Off Info and Warning Notifications from '{0}'`,r.label),run:()=>n.notificationService.setFilter({...r,filter:i?y.OFF:y.ERROR})})),e.notification.actions?.secondary?.length&&t.push(new Ri)}return Array.isArray(e.notification.actions?.secondary)&&t.push(...e.notification.actions.secondary),t}},this.contextMenuService,{...r,actionRunner:this.actionRunner,classNames:e.class}))},actionRunner:this.actionRunner}),t.toDispose.add(t.toolbar),t.detailsRow=A(`.notification-list-item-details-row`),t.source=A(`.notification-list-item-source`),t.buttonsContainer=A(`.notification-list-item-buttons-container`),e.appendChild(t.container),t.container.appendChild(t.detailsRow),t.detailsRow.appendChild(t.source),t.detailsRow.appendChild(t.buttonsContainer),t.container.appendChild(t.mainRow),t.mainRow.appendChild(t.icon),t.mainRow.appendChild(t.message),t.mainRow.appendChild(r),t.progress=new fr(e,$r),t.toDispose.add(t.progress),t.renderer=this.instantiationService.createInstance(El,t,this.actionRunner),t.toDispose.add(t.renderer),t}renderElement(e,t,n){n.renderer.setInput(e)}disposeTemplate(e){Ws(e.toDispose)}};Tl=xl=K([q(1,so),q(2,F),q(3,Gi)],Tl);let El=class extends H{static{Sl=this}static{this.SEVERITIES=[T.Info,T.Warning,T.Error]}constructor(e,t,n,r,i,a,o){super(),this.template=e,this.actionRunner=t,this.openerService=n,this.instantiationService=r,this.keybindingService=i,this.contextMenuService=a,this.hoverService=o,this.inputDisposables=this._register(new U),Sl.closeNotificationAction||(Sl.closeNotificationAction=r.createInstance(dl,dl.ID,dl.LABEL),Sl.expandNotificationAction=r.createInstance(_l,_l.ID,_l.LABEL),Sl.collapseNotificationAction=r.createInstance(vl,vl.ID,vl.LABEL))}setInput(e){this.inputDisposables.clear(),this.render(e)}render(e){this.template.container.classList.toggle(`expanded`,e.expanded),this.inputDisposables.add(M(this.template.container,j.MOUSE_UP,e=>{e.button===1&&Da.stop(e,!0)})),this.inputDisposables.add(M(this.template.container,j.AUXCLICK,t=>{!e.hasProgress&&t.button===1&&(Da.stop(t,!0),e.close())})),this.renderSeverity(e);let t=this.inputDisposables.add(this.hoverService.setupManagedHover(Nr(`mouse`),this.template.message,``)),n=this.renderMessage(e,t);this.renderSecondaryActions(e,n);let r=this.inputDisposables.add(this.hoverService.setupManagedHover(Nr(`mouse`),this.template.source,``));this.renderSource(e,r),this.renderButtons(e),this.renderProgress(e),this.inputDisposables.add(e.onDidChangeContent(n=>{switch(n.kind){case Rc.SEVERITY:this.renderSeverity(e);break;case Rc.PROGRESS:this.renderProgress(e);break;case Rc.MESSAGE:this.renderMessage(e,t);break}}))}renderSeverity(e){Sl.SEVERITIES.forEach(t=>{e.severity!==t&&this.template.icon.classList.remove(...z.asClassNameArray(this.toSeverityIcon(t)))}),this.template.icon.classList.add(...z.asClassNameArray(this.toSeverityIcon(e.severity)))}renderMessage(e,t){ka(this.template.message),this.template.message.appendChild(wl.render(e.message,{callback:e=>this.openerService.open(Xs.parse(e),{allowCommands:!0}),toDispose:this.inputDisposables}));let n=e.canCollapse&&!e.expanded&&this.template.message.scrollWidth>this.template.message.clientWidth;return t.update(n?this.template.message.textContent+``:``),n}renderSecondaryActions(e,t){let n=[];if(gc(e.actions?.secondary)){let t=this.instantiationService.createInstance(yl,yl.ID,yl.LABEL,e);n.push(t),this.inputDisposables.add(t)}let r=!1;e.canCollapse&&(e.expanded||e.source||t)&&(r=!0),r&&n.push(e.expanded?Sl.collapseNotificationAction:Sl.expandNotificationAction),e.hasProgress||n.push(Sl.closeNotificationAction),this.template.toolbar.clear(),this.template.toolbar.context=e,n.forEach(e=>this.template.toolbar.push(e,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(e)}))}renderSource(e,t){e.expanded&&e.source?(this.template.source.textContent=R(3487,`Source: {0}`,e.source),t.update(e.source)):(this.template.source.textContent=``,t.update(``))}renderButtons(e){ka(this.template.buttonsContainer);let t=e.actions?e.actions.primary:void 0;if(e.expanded&&gc(t)){let n=this,r=this.inputDisposables.add(new class extends Li{async runAction(t){n.actionRunner.run(t,e),(!(t instanceof Vc)||!t.keepOpen)&&e.close()}}),i=this.inputDisposables.add(new gr(this.template.buttonsContainer));for(let e=0;e<t.length;e++){let n=t[e],a={title:!0,secondary:e>0,...Qr},o=n instanceof Vc?n.menu:void 0,s=this.inputDisposables.add(o?i.addButtonWithDropdown({...a,contextMenuProvider:this.contextMenuService,actions:o,actionRunner:r}):i.addButton(a));s.label=n.label,this.inputDisposables.add(s.onDidClick(e=>{e&&Da.stop(e,!0),r.run(n)}))}}}renderProgress(e){if(!e.hasProgress){this.template.progress.stop().hide();return}let t=e.progress.state;t.infinite?this.template.progress.infinite().show():typeof t.total==`number`||typeof t.worked==`number`?(typeof t.total==`number`&&!this.template.progress.hasTotal()&&this.template.progress.total(t.total),typeof t.worked==`number`&&this.template.progress.setWorked(t.worked).show()):this.template.progress.done().hide()}toSeverityIcon(e){switch(e){case T.Warning:return B.warning;case T.Error:return B.error}return B.info}getKeybindingLabel(e){let t=this.keybindingService.lookupKeybinding(e.id);return t?t.getLabel():null}};El=Sl=K([q(2,Wa),q(3,F),q(4,wa),q(5,so),q(6,br)],El),ao(),J(),G(),Xa(),Xn(),ss(),co(),st(),W(),Ta(),zr(),oo(rl);let Dl=class extends H{constructor(e,t,n,r){super(),this.container=e,this.options=t,this.instantiationService=n,this.contextMenuService=r,this.viewModel=[]}show(){this.isVisible||=(this.list||this.createNotificationsList(),!0)}createNotificationsList(){this.listContainer=A(`.notifications-list-container`);let e=this._register(this.instantiationService.createInstance(nl)),t=this.instantiationService.createInstance(Tl,e),n=this.listDelegate=new Cl(this.listContainer),r=this.options,i=this.list=this._register(this.instantiationService.createInstance(Yn,`NotificationsList`,this.listContainer,n,[t],{...r,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:yn},accessibilityProvider:this.instantiationService.createInstance(Ol,r)})),a=this._register(this.instantiationService.createInstance(bl,bl.ID,bl.LABEL));this._register(i.onContextMenu(t=>{t.element&&this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>[a],getActionsContext:()=>t.element,actionRunner:e})})),this._register(i.onMouseDblClick(e=>e.element.toggle()));let o=this._register(jo(i.getHTMLElement()));this._register(o.onDidBlur(()=>{N(this.listContainer).document.hasFocus()&&i.setFocus([])})),tt.bindTo(i.contextKeyService),this._register(i.onDidChangeSelection(e=>{e.indexes.length>0&&i.setSelection([])})),this.container.appendChild(this.listContainer)}updateNotificationsList(e,t,n=[]){let[r,i]=oc(this.list,this.listContainer),a=$a(i),o=r.getFocus()[0],s=this.viewModel[o],c=null;if(typeof o==`number`&&(c=r.getRelativeTop(o)),this.viewModel.splice(e,t,...n),r.splice(e,t,n),r.layout(),this.viewModel.length===0)this.hide();else if(typeof o==`number`){let e=0;if(s){let t=this.viewModel.indexOf(s);t===-1&&(t=o-1),t<this.viewModel.length&&t>=0&&(e=t)}typeof c==`number`&&r.reveal(e,c),r.setFocus([e])}this.isVisible&&a&&r.domFocus()}updateNotificationHeight(e){let t=this.viewModel.indexOf(e);if(t===-1)return;let[n,r]=oc(this.list,this.listDelegate);n.updateElementHeight(t,r.getHeight(e)),n.layout()}hide(){!this.isVisible||!this.list||(this.isVisible=!1,this.list.splice(0,this.viewModel.length),this.viewModel=[])}focusFirst(){this.list&&(this.list.focusFirst(),this.list.domFocus())}hasFocus(){return this.listContainer?$a(this.listContainer):!1}layout(e,t){this.listContainer&&this.list&&(this.listContainer.style.width=`${e}px`,typeof t==`number`&&(this.list.getHTMLElement().style.maxHeight=`${t}px`),this.list.layout())}dispose(){this.hide(),super.dispose()}};Dl=K([q(2,F),q(3,so)],Dl);let Ol=class{constructor(e,t,n){this._options=e,this._keybindingService=t,this._configurationService=n}getAriaLabel(e){let t,n=this._keybindingService.lookupKeybinding(`editor.action.accessibleView`)?.getAriaLabel();return this._configurationService.getValue(`accessibility.verbosity.notification`)&&(t=n?R(3462,`Inspect the response in the accessible view with {0}`,n):R(3463,`Inspect the response in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding`)),e.source?Vr(t?R(3466,`{0}, source: {1}, notification, {2}`,e.message.raw,e.source,t):R(3467,`{0}, source: {1}, notification`,e.message.raw,e.source),e.severity):Vr(t?R(3464,`{0}, notification, {1}`,e.message.raw,t):R(3465,`{0}, notification`,e.message.raw),e.severity)}getWidgetAriaLabel(){return this._options.widgetAriaLabel??R(3468,`Notifications List`)}getRole(){return`dialog`}};Ol=K([q(1,wa),q(2,k)],Ol),ao(),J(),Hn(),Bs(),ss(),Xa(),St(),G(),si(),Bi(),Ta(),cc(),st(),zr(),Ki(),co(),ni(),le(),pn();var kl;oo(Mc),oo(Nc);let Al=class extends vs{static{kl=this}static{this.MAX_DIMENSIONS=new Ea(450,400)}static{this.MAX_NOTIFICATION_SOURCES=10}constructor(e,t,n,r,i,a,o,s,c,l,u){super(n),this.container=e,this.model=t,this.instantiationService=r,this.layoutService=i,this.editorGroupService=o,this.keybindingService=s,this.notificationService=c,this.accessibilitySignalService=l,this.contextMenuService=u,this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.notificationsCenterVisibleContextKey=nt.bindTo(a),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e))),this._register(this.layoutService.onDidLayoutMainContainer(e=>this.layout(Ea.lift(e)))),this._register(this.notificationService.onDidChangeFilter(()=>this.onDidChangeFilter()))}onDidChangeFilter(){this.notificationService.getFilter()===y.ERROR&&this.hide()}get isVisible(){return!!this._isVisible}show(){if(this._isVisible){let e=sc(this.notificationsList);e.show(),e.focusFirst();return}this.notificationsCenterContainer||this.create(),this.updateTitle();let[e,t]=oc(this.notificationsList,this.notificationsCenterContainer);this._isVisible=!0,t.classList.add(`visible`),e.show(),this.layout(this.workbenchDimensions),e.updateNotificationsList(0,0,this.model.notifications),e.focusFirst(),this.updateStyles(),this.model.notifications.forEach(e=>e.updateVisibility(!0)),this.notificationsCenterVisibleContextKey.set(!0),this._onDidChangeVisibility.fire()}updateTitle(){let[e,t]=oc(this.notificationsCenterTitle,this.clearAllAction);this.model.notifications.length===0?(e.textContent=R(3446,`No new notifications`),t.enabled=!1):(e.textContent=R(3447,`Notifications`),t.enabled=this.model.notifications.some(e=>!e.hasProgress))}create(){this.notificationsCenterContainer=A(`.notifications-center`),this.notificationsCenterHeader=A(`.notifications-center-header`),this.notificationsCenterContainer.appendChild(this.notificationsCenterHeader),this.notificationsCenterTitle=A(`span.notifications-center-header-title`),this.notificationsCenterHeader.appendChild(this.notificationsCenterTitle);let e=A(`.notifications-center-header-toolbar`);this.notificationsCenterHeader.appendChild(e);let t=this._register(this.instantiationService.createInstance(nl)),n=this,r=this._register(new ai(e,{ariaLabel:R(3448,`Notification Center Actions`),actionRunner:t,actionViewItemProvider:(e,r)=>{if(e.id===hl.ID)return this._register(this.instantiationService.createInstance(ti,e,{getActions(){let e=[Vi({id:pl.ID,label:n.notificationService.getFilter()===y.OFF?R(3449,`Enable Do Not Disturb Mode`):R(3450,`Disable Do Not Disturb Mode`),run:()=>n.notificationService.setFilter(n.notificationService.getFilter()===y.OFF?y.ERROR:y.OFF)})],t=n.notificationService.getFilters().sort((e,t)=>e.label.localeCompare(t.label));for(let r of t.slice(0,kl.MAX_NOTIFICATION_SOURCES))e.length===1&&e.push(new Ri),e.push(Vi({id:`${pl.ID}.${r.id}`,label:r.label,checked:r.filter!==y.ERROR,run:()=>n.notificationService.setFilter({...r,filter:r.filter===y.ERROR?y.OFF:y.ERROR})}));return t.length>kl.MAX_NOTIFICATION_SOURCES&&(e.push(new Ri),e.push(n._register(n.instantiationService.createInstance(ml,ml.ID,R(3451,`More…`))))),e}},this.contextMenuService,{...r,actionRunner:t,classNames:e.class,keybindingProvider:e=>this.keybindingService.lookupKeybinding(e.id)}))}}));this.clearAllAction=this._register(this.instantiationService.createInstance(fl,fl.ID,fl.LABEL)),r.push(this.clearAllAction,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(this.clearAllAction)}),this.configureDoNotDisturbAction=this._register(this.instantiationService.createInstance(hl,hl.ID,hl.LABEL)),r.push(this.configureDoNotDisturbAction,{icon:!0,label:!1});let i=this._register(this.instantiationService.createInstance(gl,gl.ID,gl.LABEL));r.push(i,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(i)}),this.notificationsList=this.instantiationService.createInstance(Dl,this.notificationsCenterContainer,{widgetAriaLabel:R(3452,`Notifications Center`)}),this.container.appendChild(this.notificationsCenterContainer)}getKeybindingLabel(e){let t=this.keybindingService.lookupKeybinding(e.id);return t?t.getLabel():null}onDidChangeNotification(e){if(!this._isVisible)return;let t=!1,[n,r]=oc(this.notificationsList,this.notificationsCenterContainer);switch(e.kind){case Pc.ADD:n.updateNotificationsList(e.index,0,[e.item]),e.item.updateVisibility(!0);break;case Pc.CHANGE:switch(e.detail){case Rc.ACTIONS:n.updateNotificationsList(e.index,1,[e.item]);break;case Rc.MESSAGE:e.item.expanded&&n.updateNotificationHeight(e.item);break}break;case Pc.EXPAND_COLLAPSE:n.updateNotificationsList(e.index,1,[e.item]);break;case Pc.REMOVE:t=$a(r),n.updateNotificationsList(e.index,1),e.item.updateVisibility(!1);break}this.updateTitle(),this.model.notifications.length===0&&(this.hide(),t&&this.editorGroupService.activeGroup.focus())}hide(){if(!this._isVisible||!this.notificationsCenterContainer||!this.notificationsList)return;let e=$a(this.notificationsCenterContainer);this._isVisible=!1,this.notificationsCenterContainer.classList.remove(`visible`),this.notificationsList.hide(),this.model.notifications.forEach(e=>e.updateVisibility(!1)),this.notificationsCenterVisibleContextKey.set(!1),this._onDidChangeVisibility.fire(),e&&this.editorGroupService.activeGroup.focus()}updateStyles(){if(this.notificationsCenterContainer&&this.notificationsCenterHeader){let e=this.getColor(vo);this.notificationsCenterContainer.style.boxShadow=e?`0 0 8px 2px ${e}`:``;let t=this.getColor(bn);this.notificationsCenterContainer.style.border=t?`1px solid ${t}`:``;let n=this.getColor(Sn);this.notificationsCenterHeader.style.color=n??``;let r=this.getColor(xn);this.notificationsCenterHeader.style.background=r??``}}layout(e){if(this.workbenchDimensions=e,this._isVisible&&this.notificationsCenterContainer){let e=kl.MAX_DIMENSIONS.width,t=kl.MAX_DIMENSIONS.height,n=e,r=t;this.workbenchDimensions&&(n=this.workbenchDimensions.width,n-=16,r=this.workbenchDimensions.height-35,this.layoutService.isVisible(g.STATUSBAR_PART,L)&&(r-=22),this.layoutService.isVisible(g.TITLEBAR_PART,L)&&(r-=22),r-=24);let i=sc(this.notificationsList);i.layout(Math.min(e,n),Math.min(t,r))}}clearAll(){this.hide();for(let e of[...this.model.notifications])e.hasProgress||e.close(),this.accessibilitySignalService.playSignal(ce.clear)}};Al=kl=K([q(2,Ji),q(3,F),q(4,Ce),q(5,Fi),q(6,xt),q(7,wa),q(8,Gi),q(9,fn),q(10,so)],Al),mr(),da(),G(),W(),es(),zr(),Bs(),qi();var jl=class extends H{constructor(e){super(),this.model=e;for(let t of e.notifications)this.triggerAriaAlert(t);this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e)))}onDidChangeNotification(e){e.kind===Pc.ADD&&(this.triggerAriaAlert(e.item),e.item.severity===T.Error&&(e.item.message.original instanceof Error?console.error(e.item.message.original):console.error(ns(e.item.message.linkedText.toString(),!0))))}triggerAriaAlert(e){if(e.priority===Rr.SILENT)return;let t=e.onDidChangeContent(t=>{t.kind===Rc.MESSAGE&&this.doTriggerAriaAlert(e)});zs.once(e.onDidClose)(()=>t.dispose()),this.doTriggerAriaAlert(e)}doTriggerAriaAlert(e){let t;t=e.severity===T.Error?R(3443,`Error: {0}`,e.message.linkedText.toString()):e.severity===T.Warning?R(3444,`Warning: {0}`,e.message.linkedText.toString()):R(3445,`Info: {0}`,e.message.linkedText.toString()),ua(t)}};J(),rn(),en(),W(),G(),zr(),Ki();let Ml=class extends H{constructor(e,t,n){super(),this.model=e,this.statusbarService=t,this.notificationService=n,this.newNotificationsCount=0,this.isNotificationsCenterVisible=!1,this.isNotificationsToastsVisible=!1,this.updateNotificationsCenterStatusItem(),e.statusMessage&&this.doSetStatusMessage(e.statusMessage),this.registerListeners()}registerListeners(){this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e))),this._register(this.model.onDidChangeStatusMessage(e=>this.onDidChangeStatusMessage(e))),this._register(this.notificationService.onDidChangeFilter(()=>this.updateNotificationsCenterStatusItem()))}onDidChangeNotification(e){this.isNotificationsCenterVisible||(e.kind===Pc.ADD?this.newNotificationsCount++:e.kind===Pc.REMOVE&&this.newNotificationsCount>0&&this.newNotificationsCount--),this.updateNotificationsCenterStatusItem()}updateNotificationsCenterStatusItem(){let e=0;if(!this.isNotificationsCenterVisible&&!this.isNotificationsToastsVisible)for(let t of this.model.notifications)t.hasProgress&&e++;let t={name:R(3469,`Notifications`),text:`${e>0||this.newNotificationsCount>0?`$(bell-dot)`:`$(bell)`}`,ariaLabel:R(3469,`Notifications`),command:this.isNotificationsCenterVisible?Wc:Uc,tooltip:this.getTooltip(e),showBeak:this.isNotificationsCenterVisible};this.notificationService.getFilter()===y.ERROR&&(t={...t,text:`${e>0||this.newNotificationsCount>0?`$(bell-slash-dot)`:`$(bell-slash)`}`,ariaLabel:R(3470,`Do Not Disturb`),tooltip:R(3471,`Do Not Disturb Mode is Enabled`)}),this.notificationsCenterStatusItem?this.notificationsCenterStatusItem.update(t):this.notificationsCenterStatusItem=this.statusbarService.addEntry(t,`status.notifications`,_.RIGHT,-1/0)}getTooltip(e){return this.isNotificationsCenterVisible?R(3472,`Hide Notifications`):this.model.notifications.length===0?R(3473,`No Notifications`):e===0?this.newNotificationsCount===0?R(3474,`No New Notifications`):this.newNotificationsCount===1?R(3475,`1 New Notification`):R(3476,`{0} New Notifications`,this.newNotificationsCount):this.newNotificationsCount===0?R(3477,`No New Notifications ({0} in progress)`,e):this.newNotificationsCount===1?R(3478,`1 New Notification ({0} in progress)`,e):R(3479,`{0} New Notifications ({1} in progress)`,this.newNotificationsCount,e)}update(e,t){let n=!1;this.isNotificationsCenterVisible!==e&&(this.isNotificationsCenterVisible=e,this.newNotificationsCount=0,n=!0),this.isNotificationsToastsVisible!==t&&(this.isNotificationsToastsVisible=t,n=!0),n&&this.updateNotificationsCenterStatusItem()}onDidChangeStatusMessage(e){let t=e.item;switch(e.kind){case Fc.ADD:this.doSetStatusMessage(t);break;case Fc.REMOVE:this.currentStatusMessage&&this.currentStatusMessage[0]===t&&(Ws(this.currentStatusMessage[1]),this.currentStatusMessage=void 0);break}}doSetStatusMessage(e){let t=e.message,n=e.options&&typeof e.options.showAfter==`number`?e.options.showAfter:0,r=e.options&&typeof e.options.hideAfter==`number`?e.options.hideAfter:-1;this.currentStatusMessage&&Ws(this.currentStatusMessage[1]);let i,a=setTimeout(()=>{i=this.statusbarService.addEntry({name:R(3480,`Status Message`),text:t,ariaLabel:t},`status.message`,_.LEFT,-1/0),a=void 0},n),o,s={dispose:()=>{a&&clearTimeout(a),o&&clearTimeout(o),i?.dispose()}};r>0&&(o=setTimeout(()=>s.dispose(),r)),this.currentStatusMessage=[e,s]}};Ml=K([q(1,Un),q(2,Gi)],Ml);var Nl={};ao(),J(),G(),W(),Xa(),ss(),Bs(),_e(),we(),Hn(),ys(),Yi(),Jo(),So(),ho(),_o(),mo(),po(),fo(),go(),yo(),uo(),lo(),St(),Ii(),zr(),Zo(),gt(),cc(),st(),ws(),qi();var Pl;oo(Nl);var Fl;(function(e){e[e.HIDDEN_OR_VISIBLE=0]=`HIDDEN_OR_VISIBLE`,e[e.HIDDEN=1]=`HIDDEN`,e[e.VISIBLE=2]=`VISIBLE`})(Fl||={});let Il=class extends vs{static{Pl=this}static{this.MAX_WIDTH=450}static{this.MAX_NOTIFICATIONS=3}static{this.PURGE_TIMEOUT={[T.Info]:1e4,[T.Warning]:12e3,[T.Error]:15e3}}static{this.SPAM_PROTECTION={interval:800,limit:this.MAX_NOTIFICATIONS}}get isVisible(){return!!this._isVisible}constructor(e,t,n,r,i,a,o,s,c){super(i),this.container=e,this.model=t,this.instantiationService=n,this.layoutService=r,this.editorGroupService=a,this.lifecycleService=s,this.hostService=c,this._onDidChangeVisibility=this._register(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._isVisible=!1,this.mapNotificationToToast=new Map,this.mapNotificationToDisposable=new Map,this.addedToastsIntervalCounter=new hs(Pl.SPAM_PROTECTION.interval),this.notificationsToastsVisibleContextKey=rt.bindTo(o),this.registerListeners()}registerListeners(){this._register(this.layoutService.onDidLayoutMainContainer(e=>this.layout(Ea.lift(e)))),this.lifecycleService.when(qt.Restored).then(()=>{this.model.notifications.forEach(e=>this.addToast(e)),this._register(this.model.onDidChangeNotification(e=>this.onDidChangeNotification(e)))}),this._register(this.model.onDidChangeFilter(({global:e,sources:t})=>{if(e===y.ERROR)this.hide();else if(t)for(let[e]of this.mapNotificationToToast)typeof e.sourceId==`string`&&t.get(e.sourceId)===y.ERROR&&e.severity!==T.Error&&e.priority!==Rr.URGENT&&this.removeToast(e)}))}onDidChangeNotification(e){switch(e.kind){case Pc.ADD:return this.addToast(e.item);case Pc.REMOVE:return this.removeToast(e.item)}}addToast(e){if(this.isNotificationsCenterVisible||e.priority===Rr.SILENT)return;if(e.priority===Rr.OPTIONAL){let e=Pa();if(Co(e)&&to(e)&&no(e,this.layoutService.mainContainer))return}if(this.addedToastsIntervalCounter.increment()>Pl.SPAM_PROTECTION.limit)return;let t=new U;this.mapNotificationToDisposable.set(e,t),t.add(Oo(N(this.container),()=>this.doAddToast(e,t)))}doAddToast(e,t){let n=this.notificationsToastsContainer;n||(n=this.notificationsToastsContainer=A(`.notifications-toasts`),this.container.appendChild(n)),n.classList.add(`visible`);let r=A(`.notification-toast-container`),i=n.firstChild;i?n.insertBefore(r,i):n.appendChild(r);let a=A(`.notification-toast`);r.appendChild(a);let o=this.instantiationService.createInstance(Dl,a,{verticalScrollMode:ks.Hidden,widgetAriaLabel:(()=>e.source?Vr(R(3482,`{0}, source: {1}, notification`,e.message.raw,e.source),e.severity):Vr(R(3481,`{0}, notification`,e.message.raw),e.severity))()});t.add(o);let s={item:e,list:o,container:r,toast:a};this.mapNotificationToToast.set(e,s),t.add(Ks(()=>this.updateToastVisibility(s,!1))),o.show();let c=this.computeMaxDimensions();this.layoutLists(c.width),o.updateNotificationsList(0,0,[e]),this.layoutContainer(c.height),t.add(e.onDidChangeExpansion(()=>{o.updateNotificationsList(0,1,[e])})),t.add(e.onDidChangeContent(t=>{switch(t.kind){case Rc.ACTIONS:o.updateNotificationsList(0,1,[e]);break;case Rc.MESSAGE:e.expanded&&o.updateNotificationHeight(e);break}})),zs.once(e.onDidClose)(()=>{this.removeToast(e)}),this.purgeNotification(e,r,o,t),this.updateStyles(),this.notificationsToastsVisibleContextKey.set(!0),a.classList.add(`notification-fade-in`),t.add(M(a,`transitionend`,()=>{a.classList.remove(`notification-fade-in`),a.classList.add(`notification-fade-in-done`)})),e.updateVisibility(!0),this._isVisible||(this._isVisible=!0,this._onDidChangeVisibility.fire())}purgeNotification(e,t,n,r){let i=!1;r.add(M(t,j.MOUSE_OVER,()=>i=!0)),r.add(M(t,j.MOUSE_OUT,()=>i=!1));let a,o,s=()=>{a=setTimeout(()=>{this.hostService.hasFocus?e.sticky||n.hasFocus()||i?s():this.removeToast(e):o||(o=this.hostService.onDidChangeFocus(e=>{e&&s()}),r.add(o))},Pl.PURGE_TIMEOUT[e.severity])};s(),r.add(Ks(()=>clearTimeout(a)))}removeToast(e){let t=!1,n=this.mapNotificationToToast.get(e);if(n){let r=$a(n.container);r&&(t=!(this.focusNext()||this.focusPrevious())),this.mapNotificationToToast.delete(e)}let r=this.mapNotificationToDisposable.get(e);r&&(Ws(r),this.mapNotificationToDisposable.delete(e)),this.mapNotificationToToast.size>0?this.layout(this.workbenchDimensions):(this.doHide(),t&&this.editorGroupService.activeGroup.focus())}removeToasts(){this.mapNotificationToToast.clear(),this.mapNotificationToDisposable.forEach(e=>Ws(e)),this.mapNotificationToDisposable.clear(),this.doHide()}doHide(){this.notificationsToastsContainer?.classList.remove(`visible`),this.notificationsToastsVisibleContextKey.set(!1),this._isVisible&&(this._isVisible=!1,this._onDidChangeVisibility.fire())}hide(){let e=this.notificationsToastsContainer?$a(this.notificationsToastsContainer):!1;this.removeToasts(),e&&this.editorGroupService.activeGroup.focus()}focus(){let e=this.getToasts(Fl.VISIBLE);return e.length>0?(e[0].list.focusFirst(),!0):!1}focusNext(){let e=this.getToasts(Fl.VISIBLE);for(let t=0;t<e.length;t++){let n=e[t];if(n.list.hasFocus()){let n=e[t+1];if(n)return n.list.focusFirst(),!0;break}}return!1}focusPrevious(){let e=this.getToasts(Fl.VISIBLE);for(let t=0;t<e.length;t++){let n=e[t];if(n.list.hasFocus()){let n=e[t-1];if(n)return n.list.focusFirst(),!0;break}}return!1}focusFirst(){let e=this.getToasts(Fl.VISIBLE)[0];return e?(e.list.focusFirst(),!0):!1}focusLast(){let e=this.getToasts(Fl.VISIBLE);return e.length>0?(e[e.length-1].list.focusFirst(),!0):!1}update(e){this.isNotificationsCenterVisible!==e&&(this.isNotificationsCenterVisible=e,this.isNotificationsCenterVisible&&this.removeToasts())}updateStyles(){this.mapNotificationToToast.forEach(({toast:e})=>{let t=this.getColor(yn);e.style.background=t||``;let n=this.getColor(vo);e.style.boxShadow=n?`0 0 8px 2px ${n}`:``;let r=this.getColor(Cn);e.style.border=r?`1px solid ${r}`:``})}getToasts(e){let t=[];return this.mapNotificationToToast.forEach(n=>{switch(e){case Fl.HIDDEN_OR_VISIBLE:t.push(n);break;case Fl.HIDDEN:this.isToastInDOM(n)||t.push(n);break;case Fl.VISIBLE:this.isToastInDOM(n)&&t.push(n);break}}),t.reverse()}layout(e){this.workbenchDimensions=e;let t=this.computeMaxDimensions();t.height&&this.layoutContainer(t.height),this.layoutLists(t.width)}computeMaxDimensions(){let e=Pl.MAX_WIDTH,t=e,n;return this.workbenchDimensions&&(t=this.workbenchDimensions.width,t-=16,n=this.workbenchDimensions.height,this.layoutService.isVisible(g.STATUSBAR_PART,L)&&(n-=22),this.layoutService.isVisible(g.TITLEBAR_PART,L)&&(n-=22),n-=24),new Ea(Math.min(e,t),n??0)}layoutLists(e){this.mapNotificationToToast.forEach(({list:t})=>t.layout(e))}layoutContainer(e){let t=e,n=Math.round(e*.618),r=0;for(let e of this.getToasts(Fl.HIDDEN_OR_VISIBLE)){e.container.style.opacity=`0`,this.updateToastVisibility(e,!0),t-=e.container.offsetHeight,n-=e.container.offsetHeight;let i=!1;r===Pl.MAX_NOTIFICATIONS?i=!1:(r===0&&t>=0||r>0&&n>=0)&&(i=!0),this.updateToastVisibility(e,i),e.container.style.opacity=``,i&&r++}}updateToastVisibility(e,t){if(this.isToastInDOM(e)===t)return;let n=sc(this.notificationsToastsContainer);t?n.appendChild(e.container):e.container.remove(),e.item.updateVisibility(t)}isToastInDOM(e){return!!e.container.parentElement}};Il=Pl=K([q(2,F),q(3,Ce),q(4,Ji),q(5,xt),q(6,Fi),q(7,pt),q(8,ht)],Il),ke(),Ne(),Bt(),Kt(),vt(),Dt(),Ft(),Jt(),Xt(),hn(),Kn(),Ir(),Ur(),Gr(),qr(),yi(),xi(),na(),wi(),La(),J(),W(),ln(),Es(),Zi(),ps(),Ii(),Wt(),ss();const Ll=new fs(`coreExperimentation.startupExpGroup`,``);var X;(function(e){e.Control=`control`,e.MaximizedChat=`maximizedChat`,e.SplitEmptyEditorChat=`splitEmptyEditorChat`,e.SplitWelcomeChat=`splitWelcomeChat`})(X||={});const Rl=`startup`,zl={stable:{experimentName:Rl,targetPercentage:20,groups:[{name:X.Control,min:0,max:.25,iteration:1},{name:X.MaximizedChat,min:.25,max:.5,iteration:1},{name:X.SplitEmptyEditorChat,min:.5,max:.75,iteration:1},{name:X.SplitWelcomeChat,min:.75,max:1,iteration:1}]},insider:{experimentName:Rl,targetPercentage:50,groups:[{name:X.Control,min:0,max:.25,iteration:1},{name:X.MaximizedChat,min:.25,max:.5,iteration:1},{name:X.SplitEmptyEditorChat,min:.5,max:.75,iteration:1},{name:X.SplitWelcomeChat,min:.75,max:1,iteration:1}]}};let Bl=class extends H{constructor(e,t,n,r,i){super(),this.storageService=e,this.telemetryService=t,this.productService=n,this.contextKeyService=r,this.environmentService=i,this.experiments=new Map,!(i.disableExperiments||i.enableSmokeTestDriver||i.extensionTestsLocationURI)&&this.initializeExperiments()}initializeExperiments(){let e=this.storageService.get(Ts,D.APPLICATION)||new Date().toUTCString(),t=(new Date-+new Date(e))/1e3/60/60/24;if(t>1)return;let n=this.getExperimentConfiguration();if(!n)return;let r=`coreExperimentation.${n.experimentName}`,i=this.storageService.get(r,D.APPLICATION);if(i)try{let e=JSON.parse(i);this.experiments.set(n.experimentName,e),Ll.bindTo(this.contextKeyService).set(e.experimentGroup);return}catch{this.storageService.remove(r,D.APPLICATION);return}let a=this.createStartupExperiment(n.experimentName,n);a&&(this.experiments.set(n.experimentName,a),this.sendExperimentTelemetry(n.experimentName,a),Ll.bindTo(this.contextKeyService).set(a.experimentGroup),this.storageService.store(r,JSON.stringify(a),D.APPLICATION,O.MACHINE))}getExperimentConfiguration(){let e=this.productService.quality;if(e)return zl[e]}createStartupExperiment(e,t){let n=this.environmentService.startupExperimentGroup;if(n){let e=t.groups.find(e=>e.name===n);return e?{cohort:1,subCohort:1,experimentGroup:e.name,iteration:e.iteration,isInExperiment:!0}:void 0}let r=Math.random();if(r>=t.targetPercentage/100)return;let i=r/(t.targetPercentage/100);for(let e of t.groups)if(i>=e.min&&i<e.max)return{cohort:r,subCohort:i,experimentGroup:e.name,iteration:e.iteration,isInExperiment:!0}}sendExperimentTelemetry(e,t){this.telemetryService.publicLog2(`coreExperimentation.experimentCohort`,{experimentName:e,cohort:t.cohort,subCohort:t.subCohort,experimentGroup:t.experimentGroup,iteration:t.iteration,isInExperiment:t.isInExperiment})}getExperiment(){return this.experiments.get(Rl)}};Bl=K([q(0,E),q(1,Xi),q(2,cn),q(3,Fi),q(4,Ut)],Bl),W(),Bs(),Xa(),_e(),ea(),Qi(),Ca(),ft(),mt(),gt(),St(),en(),hc(),cc(),zr(),Ki(),Yi(),Hn(),Zs(),js(),Zi(),ws(),Nt(),_i(),ii();var Z;(function(e){e.SIDEBAR_HIDDEN=`nosidebar`,e.MAIN_EDITOR_AREA_HIDDEN=`nomaineditorarea`,e.PANEL_HIDDEN=`nopanel`,e.AUXILIARYBAR_HIDDEN=`noauxiliarybar`,e.STATUSBAR_HIDDEN=`nostatusbar`,e.FULLSCREEN=`fullscreen`,e.MAXIMIZED=`maximized`,e.WINDOW_BORDER=`border`})(Z||={});const Vl=[`chat.commandCenter.enabled`,`workbench.navigationControl.enabled`,`workbench.experimental.share.enabled`],Hl=[h.ACTIVITY_BAR_LOCATION,h.COMMAND_CENTER,...Vl,h.EDITOR_ACTIONS_LOCATION,h.LAYOUT_ACTIONS,Tr.MenuBarVisibility,v.TITLE_BAR_STYLE,v.CUSTOM_TITLE_BAR_VISIBILITY],Ul=new Ea(wr.width,wr.height);var Wl=class extends H{get activeContainer(){return this.getContainerFromDocument(Na())}get containers(){let e=[];for(let{window:t}of Ja())e.push(this.getContainerFromDocument(t.document));return e}getContainerFromDocument(e){return e===this.mainContainer.ownerDocument?this.mainContainer:e.body.getElementsByClassName(`monaco-workbench`)[0]}whenContainerStylesLoaded(e){return this.containerStylesLoaded.get(e.vscodeWindowId)}get mainContainerDimension(){return this._mainContainerDimension}get activeContainerDimension(){return this.getContainerDimension(this.activeContainer)}getContainerDimension(e){return e===this.mainContainer?this.mainContainerDimension:Ia(e)}get mainContainerOffset(){return this.computeContainerOffset(L)}get activeContainerOffset(){return this.computeContainerOffset(N(this.activeContainer))}computeContainerOffset(e){let t=0,n=0;this.isVisible(g.BANNER_PART)&&(t=this.getPart(g.BANNER_PART).maximumHeight,n=t);let r=this.isVisible(g.TITLEBAR_PART,e);r&&(t+=this.getPart(g.TITLEBAR_PART).maximumHeight,n=t);let i=r&&this.configurationService.getValue(h.COMMAND_CENTER)!==!1;return i&&(n=6),{top:t,quickPickTop:n}}constructor(e,t){super(),this.parent=e,this.layoutOptions=t,this._onDidChangeZenMode=this._register(new V),this.onDidChangeZenMode=this._onDidChangeZenMode.event,this._onDidChangeMainEditorCenteredLayout=this._register(new V),this.onDidChangeMainEditorCenteredLayout=this._onDidChangeMainEditorCenteredLayout.event,this._onDidChangePanelAlignment=this._register(new V),this.onDidChangePanelAlignment=this._onDidChangePanelAlignment.event,this._onDidChangeWindowMaximized=this._register(new V),this.onDidChangeWindowMaximized=this._onDidChangeWindowMaximized.event,this._onDidChangePanelPosition=this._register(new V),this.onDidChangePanelPosition=this._onDidChangePanelPosition.event,this._onDidChangePartVisibility=this._register(new V),this.onDidChangePartVisibility=this._onDidChangePartVisibility.event,this._onDidChangeNotificationsVisibility=this._register(new V),this.onDidChangeNotificationsVisibility=this._onDidChangeNotificationsVisibility.event,this._onDidChangeAuxiliaryBarMaximized=this._register(new V),this.onDidChangeAuxiliaryBarMaximized=this._onDidChangeAuxiliaryBarMaximized.event,this._onDidLayoutMainContainer=this._register(new V),this.onDidLayoutMainContainer=this._onDidLayoutMainContainer.event,this._onDidLayoutActiveContainer=this._register(new V),this.onDidLayoutActiveContainer=this._onDidLayoutActiveContainer.event,this._onDidLayoutContainer=this._register(new V),this.onDidLayoutContainer=this._onDidLayoutContainer.event,this._onDidAddContainer=this._register(new V),this.onDidAddContainer=this._onDidAddContainer.event,this._onDidChangeActiveContainer=this._register(new V),this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event,this.mainContainer=ja(`div`),this.containerStylesLoaded=new Map,this.parts=new Map,this.initialized=!1,this.disposed=!1,this._openedDefaultEditors=!1,this.whenReadyPromise=new ms,this.whenReady=this.whenReadyPromise.p,this.whenRestoredPromise=new ms,this.whenRestored=this.whenRestoredPromise.p,this.restored=!1,this.inMaximizedAuxiliaryBarTransition=!1,vi(e)}initLayout(e){this.environmentService=e.get(Me),this.configurationService=e.get(k),this.hostService=e.get(ht),this.contextService=e.get(Gn),this.storageService=e.get(E),this.themeService=e.get(Ji),this.extensionService=e.get(_t),this.logService=e.get(Ci),this.telemetryService=e.get(Xi),this.auxiliaryWindowService=e.get(et),this.editorService=e.get(Ct),this.editorGroupService=e.get(xt),this.mainPartEditorService=this.editorService.createScoped(this.editorGroupService.mainPart,this._store),this.paneCompositeService=e.get(Gt),this.viewDescriptorService=e.get(Yt),this.titleService=e.get(zt),this.notificationService=e.get(Gi),this.statusBarService=e.get(Un),e.get(Pt),this.registerLayoutListeners(),this.initLayoutState(e.get(pt),e.get(Ti),e.get(Mt))}registerLayoutListeners(){let e=()=>{this.isVisible(g.EDITOR_PART,L)||(this.isAuxiliaryBarMaximized()?this.toggleMaximizedAuxiliaryBar():this.toggleMaximizedPanel())};this.editorGroupService.whenRestored.then(()=>{this._register(this.mainPartEditorService.onDidVisibleEditorsChange(e)),this._register(this.editorGroupService.mainPart.onDidActivateGroup(e)),this._register(this.mainPartEditorService.onDidActiveEditorChange(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED))))}),this._register(this.configurationService.onDidChangeConfiguration(e=>{if([...Hl,Yl.SIDEBAR_POSITION,Yl.STATUSBAR_VISIBLE].some(t=>e.affectsConfiguration(t))){let t=e.affectsConfiguration(`workbench.experimental.share.enabled`)&&this.configurationService.getValue(`workbench.experimental.share.enabled`),n=e.affectsConfiguration(`workbench.navigationControl.enabled`)&&this.configurationService.getValue(`workbench.navigationControl.enabled`);if((t||n)&&this.configurationService.getValue(h.COMMAND_CENTER)===!1){this.configurationService.updateValue(h.COMMAND_CENTER,!0);return}let r=e.affectsConfiguration(h.EDITOR_ACTIONS_LOCATION)&&this.configurationService.getValue(h.EDITOR_ACTIONS_LOCATION)===Ze.TITLEBAR,i=e.affectsConfiguration(h.COMMAND_CENTER)&&this.configurationService.getValue(h.COMMAND_CENTER),a=e.affectsConfiguration(h.LAYOUT_ACTIONS)&&this.configurationService.getValue(h.LAYOUT_ACTIONS),o=e.affectsConfiguration(h.ACTIVITY_BAR_LOCATION)&&[Xe.TOP,Xe.BOTTOM].includes(this.configurationService.getValue(h.ACTIVITY_BAR_LOCATION));if((o||r||i||a)&&this.configurationService.getValue(v.CUSTOM_TITLE_BAR_VISIBILITY)===or.NEVER){this.configurationService.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.AUTO);return}this.doUpdateLayoutConfiguration()}})),this._register(qo(e=>this.onFullscreenChanged(e))),this._register(this.editorGroupService.mainPart.onDidAddGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidRemoveGroup(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED)))),this._register(this.editorGroupService.mainPart.onDidChangeGroupMaximized(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED)))),this._register(M(this.mainContainer,j.SCROLL,()=>this.mainContainer.scrollTop=0));let t=(ic||ec||rc)&&!Mr(this.configurationService);t&&this._register(this.titleService.onMenubarVisibilityChange(e=>this.onMenubarToggled(e))),this._register(this.themeService.onDidColorThemeChange(()=>this.updateWindowBorder())),this._register(this.hostService.onDidChangeFocus(e=>this.onWindowFocusChanged(e))),this._register(this.hostService.onDidChangeActiveWindow(()=>this.onActiveWindowChanged())),rc&&typeof navigator.windowControlsOverlay==`object`&&this._register(M(navigator.windowControlsOverlay,`geometrychange`,()=>this.onDidChangeWCO())),this._register(this.auxiliaryWindowService.onDidOpenAuxiliaryWindow(({window:e,disposables:t})=>{let n=e.window.vscodeWindowId;this.containerStylesLoaded.set(n,e.whenStylesHaveLoaded),e.whenStylesHaveLoaded.then(()=>this.containerStylesLoaded.delete(n)),t.add(Ks(()=>this.containerStylesLoaded.delete(n)));let r=t.add(new U);this._onDidAddContainer.fire({container:e.container,disposables:r}),t.add(e.onDidLayout(t=>this.handleContainerDidLayout(e.container,t)))}))}onMenubarToggled(e){if(e!==this.state.runtime.menuBar.toggled){this.state.runtime.menuBar.toggled=e;let t=Or(this.configurationService);(rc&&t===`toggle`||this.state.runtime.mainWindowFullscreen&&(t===`toggle`||t===`classic`))&&this.workbenchGrid.setViewVisible(this.titleBarPartView,Se(this.configurationService,L,this.state.runtime.menuBar.toggled)),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}}handleContainerDidLayout(e,t){e===this.mainContainer&&this._onDidLayoutMainContainer.fire(t),Za(e)&&this._onDidLayoutActiveContainer.fire(t),this._onDidLayoutContainer.fire({container:e,dimension:t})}onFullscreenChanged(e){if(e===L.vscodeWindowId){if(this.state.runtime.mainWindowFullscreen=Wo(L),this.state.runtime.mainWindowFullscreen)this.mainContainer.classList.add(Z.FULLSCREEN);else{this.mainContainer.classList.remove(Z.FULLSCREEN);let e=this.stateModel.getRuntimeValue($.ZEN_MODE_EXIT_INFO);e.transitionedToFullScreen&&this.isZenModeActive()&&this.toggleZenMode()}this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen,this.workbenchGrid.setViewVisible(this.titleBarPartView,Se(this.configurationService,L,this.state.runtime.menuBar.toggled)),this.updateWindowBorder(!0)}}onActiveWindowChanged(){let e=this.getActiveContainerId();this.state.runtime.activeContainerId!==e&&(this.state.runtime.activeContainerId=e,this.updateWindowBorder(),this._onDidChangeActiveContainer.fire())}onWindowFocusChanged(e){this.state.runtime.hasFocus!==e&&(this.state.runtime.hasFocus=e,this.updateWindowBorder())}getActiveContainerId(){let e=this.activeContainer;return N(e).vscodeWindowId}doUpdateLayoutConfiguration(e){this.updateCustomTitleBarVisibility(),this.updateMenubarVisibility(!!e),this.editorGroupService.whenRestored.then(()=>this.centerMainEditorLayout(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED),e))}setSideBarPosition(e){let t=this.getPart(g.ACTIVITYBAR_PART),n=this.getPart(g.SIDEBAR_PART),r=this.getPart(g.AUXILIARYBAR_PART),i=e===d.LEFT?`left`:`right`,a=e===d.RIGHT?`left`:`right`,o=this.getPanelAlignment(),s=this.getPanelPosition();this.stateModel.setRuntimeValue($.SIDEBAR_POSITON,e);let c=sc(t.getContainer()),l=sc(n.getContainer()),u=sc(r.getContainer());c.classList.remove(a),l.classList.remove(a),c.classList.add(i),l.classList.add(i),u.classList.remove(i),u.classList.add(a),t.updateStyles(),n.updateStyles(),r.updateStyles(),this.adjustPartPositions(e,o,s)}updateWindowBorder(e=!1){if(rc||ic||(ic||ec)&&Zr(this.configurationService)||Mr(this.configurationService))return;let t=this.themeService.getColorTheme(),n=t.getColor(zn),r=t.getColor(Bn),i=this.hasMainWindowBorder();for(let e of this.containers){let t=e===this.mainContainer,i=this.activeContainer===e,a=!1;if(!this.state.runtime.mainWindowFullscreen&&(n||r)){a=!0;let t=i&&this.state.runtime.hasFocus?n:r??n;e.style.setProperty(`--window-border-color`,t?.toString()??`transparent`)}t&&(this.state.runtime.mainWindowBorder=a),e.classList.toggle(Z.WINDOW_BORDER,a)}!e&&i!==this.hasMainWindowBorder()&&this.layout()}initLayoutState(e,t,n){this._mainContainerDimension=Ia(this.parent,Ul),this.stateModel=new Xl(this.storageService,this.configurationService,this.contextService,n,this.environmentService,this.viewDescriptorService),this.stateModel.load({mainContainerDimension:this._mainContainerDimension,resetLayout:!!this.layoutOptions?.resetLayout}),this._register(this.stateModel.onDidChangeState(e=>{e.key===$.ACTIVITYBAR_HIDDEN&&this.setActivityBarHidden(e.value),e.key===$.STATUSBAR_HIDDEN&&this.setStatusBarHidden(e.value),e.key===$.SIDEBAR_POSITON&&this.setSideBarPosition(e.value),e.key===$.PANEL_POSITION&&this.setPanelPosition(e.value),e.key===$.PANEL_ALIGNMENT&&this.setPanelAlignment(e.value),this.doUpdateLayoutConfiguration()}));let r=this.getInitialEditorsState();r&&this.logService.trace(`Initial editor state`,r);let i={layout:{editors:r?.layout},editor:{restoreEditors:this.shouldRestoreEditors(this.contextService,r),editorsToOpen:this.resolveEditorsToOpen(t,r)},views:{defaults:this.getDefaultLayoutViews(this.environmentService,this.storageService),containerToRestore:{}}},a={activeContainerId:this.getActiveContainerId(),mainWindowFullscreen:Wo(L),hasFocus:this.hostService.hasFocus,maximized:new Set,mainWindowBorder:!1,menuBar:{toggled:!1},zenMode:{transitionDisposables:new Hs}};if(this.state={initialization:i,runtime:a},this.isVisible(g.SIDEBAR_PART)){let t;t=!this.environmentService.isBuilt||e.startupKind===dt.ReloadedWindow||this.environmentService.isExtensionDevelopment&&!this.environmentService.extensionTestsLocationURI?this.storageService.get(Cc.activeViewletSettingsKey,D.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(m.Sidebar)?.id):this.viewDescriptorService.getDefaultViewContainer(m.Sidebar)?.id,t?this.state.initialization.views.containerToRestore.sideBar=t:this.stateModel.setRuntimeValue($.SIDEBAR_HIDDEN,!0)}if(this.isVisible(g.PANEL_PART)){let e=this.storageService.get(wc.activePanelSettingsKey,D.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(m.Panel)?.id);e?this.state.initialization.views.containerToRestore.panel=e:this.stateModel.setRuntimeValue($.PANEL_HIDDEN,!0)}if(this.isVisible(g.AUXILIARYBAR_PART)){let e=this.storageService.get(jc.activeViewSettingsKey,D.WORKSPACE,this.viewDescriptorService.getDefaultViewContainer(m.AuxiliaryBar)?.id);e?this.state.initialization.views.containerToRestore.auxiliaryBar=e:this.stateModel.setRuntimeValue($.AUXILIARYBAR_HIDDEN,!0)}this.updateWindowBorder(!0)}getDefaultLayoutViews(e,t){let n=e.options?.defaultLayout;if(!n||!n.force&&!t.isNew(D.WORKSPACE))return;let{views:r}=n;if(r?.length)return r.map(e=>e.id)}shouldRestoreEditors(e,t){if(Si(e.getWorkspace()))return!1;let n=this.configurationService.getValue(`window.restoreWindows`)===`preserve`;return!!n||t===void 0}willRestoreEditors(){return this.state.initialization.editor.restoreEditors}async resolveEditorsToOpen(e,t){if(t){let n=pc(await jt(t.filesToMerge,e,this.logService));if(n.length===4&&At(n[0])&&At(n[1])&&At(n[2])&&At(n[3]))return[{editor:{input1:{resource:n[0].resource},input2:{resource:n[1].resource},base:{resource:n[2].resource},result:{resource:n[3].resource},options:{pinned:!0}}}];let r=pc(await jt(t.filesToDiff,e,this.logService));if(r.length===2)return[{editor:{original:{resource:r[0].resource},modified:{resource:r[1].resource},options:{pinned:!0}}}];let i=[],a=await jt(t.filesToOpenOrCreate,e,this.logService);for(let e=0;e<a.length;e++){let n=a[e];n&&i.push({editor:n,viewColumn:t.filesToOpenOrCreate?.[e].viewColumn})}return i}else if(this.contextService.getWorkbenchState()===ta.EMPTY&&this.configurationService.getValue(`workbench.startupEditor`)===`newUntitledFile`)return this.editorGroupService.hasRestorableState?[]:[{editor:{resource:void 0}}];return[]}get openedDefaultEditors(){return this._openedDefaultEditors}getInitialEditorsState(){let e=this.environmentService.options?.defaultLayout;if((e?.editors?.length||e?.layout?.editors)&&(e.force||this.storageService.isNew(D.WORKSPACE)))return this._openedDefaultEditors=!0,{layout:e.layout?.editors,filesToOpenOrCreate:e?.editors?.map(e=>({viewColumn:e.viewColumn,fileUri:Xs.revive(e.uri),openOnlyIfExists:e.openOnlyIfExists,options:e.options}))};let{filesToOpenOrCreate:t,filesToDiff:n,filesToMerge:r}=this.environmentService;if(t||n||r)return{filesToOpenOrCreate:t,filesToDiff:n,filesToMerge:r}}isRestored(){return this.restored}restoreParts(){let e=[],t=[];e.push((async()=>{b(`code/willRestoreEditors`),await this.editorGroupService.whenReady,b(`code/restoreEditors/editorGroupsReady`),this.state.initialization.layout?.editors&&this.editorGroupService.mainPart.applyLayout(this.state.initialization.layout.editors);let e=await this.state.initialization.editor.editorsToOpen;b(`code/restoreEditors/editorsToOpenResolved`);let n;if(e.length){let t=this.editorGroupService.mainPart.getGroups(Et.GRID_APPEARANCE),r=new Map;for(let n of e){let e=t[(n.viewColumn??1)-1],i=r.get(e.id);i||(i=new Set,r.set(e.id,i)),i.add(n.editor)}n=Promise.all(Array.from(r).map(async([e,t])=>{try{await this.editorService.openEditors(Array.from(t),e,{validateTrust:!0})}catch(e){this.logService.error(e)}}))}t.push(Promise.all([n?.finally(()=>b(`code/restoreEditors/editorsOpened`)),this.editorGroupService.whenRestored.finally(()=>b(`code/restoreEditors/editorGroupsRestored`))]).finally(()=>{b(`code/didRestoreEditors`)}))})());let n=(async()=>{if(this.state.initialization.views.defaults?.length){b(`code/willOpenDefaultViews`);let e=[],t=t=>{let n=this.viewDescriptorService.getViewLocationById(t.id);if(n!==null){let r=this.viewDescriptorService.getViewContainerByViewId(t.id);if(r){t.order>=(e?.[n]?.order??0)&&(e[n]={id:r.id,order:t.order});let i=this.viewDescriptorService.getViewContainerModel(r);return i.setCollapsed(t.id,!1),i.setVisible(t.id,!0),!0}}return!1},n=[...this.state.initialization.views.defaults].reverse().map((e,t)=>({id:e,order:t})),r=n.length;for(;r;)r--,t(n[r])&&n.splice(r,1);if(n.length){await this.extensionService.whenInstalledExtensionsRegistered();let e=n.length;for(;e;)e--,t(n[e])&&n.splice(e,1)}e[m.Sidebar]&&(this.state.initialization.views.containerToRestore.sideBar=e[m.Sidebar].id),e[m.Panel]&&(this.state.initialization.views.containerToRestore.panel=e[m.Panel].id),e[m.AuxiliaryBar]&&(this.state.initialization.views.containerToRestore.auxiliaryBar=e[m.AuxiliaryBar].id),b(`code/didOpenDefaultViews`)}})();e.push(n),e.push((async()=>{await n,this.state.initialization.views.containerToRestore.sideBar&&(b(`code/willRestoreViewlet`),await this.openViewContainer(m.Sidebar,this.state.initialization.views.containerToRestore.sideBar),b(`code/didRestoreViewlet`))})()),e.push((async()=>{await n,this.state.initialization.views.containerToRestore.panel&&(b(`code/willRestorePanel`),await this.openViewContainer(m.Panel,this.state.initialization.views.containerToRestore.panel),b(`code/didRestorePanel`))})()),e.push((async()=>{await n,this.state.initialization.views.containerToRestore.auxiliaryBar&&(b(`code/willRestoreAuxiliaryBar`),await this.openViewContainer(m.AuxiliaryBar,this.state.initialization.views.containerToRestore.auxiliaryBar),b(`code/didRestoreAuxiliaryBar`))})());let r=this.isZenModeActive(),i=Gl(this.configurationService).restore;r&&(this.setZenModeActive(!i),this.toggleZenMode(!1,!0)),this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED)&&this.centerMainEditorLayout(!0,!0),gs.settled(e).finally(()=>{Pa()===L.document.body&&(this.isPanelMaximized()||this.isAuxiliaryBarMaximized())&&this.focus(),this.whenReadyPromise.complete(),gs.settled(t).finally(()=>{this.restored=!0,this.whenRestoredPromise.complete()})})}async openViewContainer(e,t,n){let r=await this.paneCompositeService.openPaneComposite(t,e,n);r||(r=await this.paneCompositeService.openPaneComposite(this.viewDescriptorService.getDefaultViewContainer(e)?.id,e,n),!r&&await this.paneCompositeService.openPaneComposite(this.paneCompositeService.getVisiblePaneCompositeIds(e).at(0),e,n))}registerPart(e){let t=e.getId();return this.parts.set(t,e),Ks(()=>this.parts.delete(t))}getPart(e){let t=this.parts.get(e);if(!t)throw Error(`Unknown part ${e}`);return t}registerNotifications(e){this._register(e.onDidChangeNotificationsVisibility(e=>this._onDidChangeNotificationsVisibility.fire(e)))}hasFocus(e){let t=this.getContainer(Fa(),e);if(!t)return!1;let n=Pa();return n?eo(n,t):!1}_getFocusedPart(){for(let e of this.parts.keys())if(this.hasFocus(e))return e}focusPart(e,t=L){let n=this.getContainer(t,e)??this.mainContainer;switch(e){case g.EDITOR_PART:this.editorGroupService.getPart(n).activeGroup.focus();break;case g.PANEL_PART:this.paneCompositeService.getActivePaneComposite(m.Panel)?.focus();break;case g.SIDEBAR_PART:this.paneCompositeService.getActivePaneComposite(m.Sidebar)?.focus();break;case g.AUXILIARYBAR_PART:this.paneCompositeService.getActivePaneComposite(m.AuxiliaryBar)?.focus();break;case g.ACTIVITYBAR_PART:this.getPart(g.SIDEBAR_PART).focusActivityBar();break;case g.STATUSBAR_PART:this.statusBarService.getPart(n).focus();break;default:n?.focus()}}getContainer(e,t){if(t===void 0)return this.getContainerFromDocument(e.document);if(e===L)return this.getPart(t).getContainer();let n;if(t===g.EDITOR_PART?n=this.editorGroupService.getPart(this.getContainerFromDocument(e.document)):t===g.STATUSBAR_PART?n=this.statusBarService.getPart(this.getContainerFromDocument(e.document)):t===g.TITLEBAR_PART&&(n=this.titleService.getPart(this.getContainerFromDocument(e.document))),n instanceof l)return n.getContainer()}isVisible(e,t=L){if(t!==L&&e===g.EDITOR_PART)return!0;switch(e){case g.TITLEBAR_PART:return this.initialized?this.workbenchGrid.isViewVisible(this.titleBarPartView):Se(this.configurationService,L,this.state.runtime.menuBar.toggled);case g.SIDEBAR_PART:return!this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN);case g.PANEL_PART:return!this.stateModel.getRuntimeValue($.PANEL_HIDDEN);case g.AUXILIARYBAR_PART:return!this.stateModel.getRuntimeValue($.AUXILIARYBAR_HIDDEN);case g.STATUSBAR_PART:return!this.stateModel.getRuntimeValue($.STATUSBAR_HIDDEN);case g.ACTIVITYBAR_PART:return!this.stateModel.getRuntimeValue($.ACTIVITYBAR_HIDDEN);case g.EDITOR_PART:return!this.stateModel.getRuntimeValue($.EDITOR_HIDDEN);case g.BANNER_PART:return this.initialized?this.workbenchGrid.isViewVisible(this.bannerPartView):!1;default:return!1}}shouldShowBannerFirst(){return rc&&!Ko()}focus(){this.isPanelMaximized()&&this.mainContainer===this.activeContainer?this.focusPart(g.PANEL_PART):this.isAuxiliaryBarMaximized()&&this.mainContainer===this.activeContainer?this.focusPart(g.AUXILIARYBAR_PART):this.focusPart(g.EDITOR_PART,N(this.activeContainer))}focusPanelOrEditor(){let e=this.paneCompositeService.getActivePaneComposite(m.Panel);(this.hasFocus(g.PANEL_PART)||!this.isVisible(g.EDITOR_PART))&&e?e.focus():this.focus()}getMaximumEditorDimensions(e){let t=N(e),n=this.getContainerDimension(e);if(e===this.mainContainer){let e=p(this.getPanelPosition()),r=(this.isVisible(g.ACTIVITYBAR_PART)?this.activityBarPartView.minimumWidth:0)+(this.isVisible(g.SIDEBAR_PART)?this.sideBarPartView.minimumWidth:0)+(this.isVisible(g.PANEL_PART)&&!e?this.panelPartView.minimumWidth:0)+(this.isVisible(g.AUXILIARYBAR_PART)?this.auxiliaryBarPartView.minimumWidth:0),i=(this.isVisible(g.TITLEBAR_PART,t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(g.STATUSBAR_PART,t)?this.statusBarPartView.minimumHeight:0)+(this.isVisible(g.PANEL_PART)&&e?this.panelPartView.minimumHeight:0),a=n.width-r,o=n.height-i;return{width:a,height:o}}else{let e=(this.isVisible(g.TITLEBAR_PART,t)?this.titleBarPartView.minimumHeight:0)+(this.isVisible(g.STATUSBAR_PART,t)?this.statusBarPartView.minimumHeight:0);return{width:n.width,height:n.height-e}}}isZenModeActive(){return this.stateModel.getRuntimeValue($.ZEN_MODE_ACTIVE)}setZenModeActive(e){this.stateModel.setRuntimeValue($.ZEN_MODE_ACTIVE,e)}toggleZenMode(e,t=!1){let n=this._getFocusedPart();this.setZenModeActive(!this.isZenModeActive()),this.state.runtime.zenMode.transitionDisposables.clearAndDisposeAll();let r=e=>{for(let t of this.mainPartEditorService.visibleTextEditorControls){if(!e&&bi(t)&&t.hasModel()){let n=t.getModel();e=this.configurationService.getValue(`editor.lineNumbers`,{resource:n.uri,overrideIdentifier:n.getLanguageId()})}e||=this.configurationService.getValue(`editor.lineNumbers`),t.updateOptions({lineNumbers:e})}},i=!1,a=Gl(this.configurationService),o=this.stateModel.getRuntimeValue($.ZEN_MODE_EXIT_INFO);this.isZenModeActive()?(i=!this.state.runtime.mainWindowFullscreen&&a.fullScreen&&!$s,t||(o.transitionedToFullScreen=i,o.transitionedToCenteredEditorLayout=!this.isMainEditorLayoutCentered()&&a.centerLayout,o.handleNotificationsDoNotDisturbMode=this.notificationService.getFilter()===y.OFF,o.wasVisible.sideBar=this.isVisible(g.SIDEBAR_PART),o.wasVisible.panel=this.isVisible(g.PANEL_PART),o.wasVisible.auxiliaryBar=this.isVisible(g.AUXILIARYBAR_PART),this.stateModel.setRuntimeValue($.ZEN_MODE_EXIT_INFO,o)),this.setPanelHidden(!0,!0),this.setAuxiliaryBarHidden(!0,!0),this.setSideBarHidden(!0),a.hideActivityBar&&this.setActivityBarHidden(!0),a.hideStatusBar&&this.setStatusBarHidden(!0),a.hideLineNumbers&&(r(`off`),this.state.runtime.zenMode.transitionDisposables.set(f.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>r(`off`)))),a.showTabs!==this.editorGroupService.partOptions.showTabs&&this.state.runtime.zenMode.transitionDisposables.set(f.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:a.showTabs})),a.silentNotifications&&o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.ERROR),a.centerLayout&&this.centerMainEditorLayout(!0,!0),this.state.runtime.zenMode.transitionDisposables.set(`configurationChange`,this.configurationService.onDidChangeConfiguration(e=>{if(e.affectsConfiguration(f.HIDE_ACTIVITYBAR)||e.affectsConfiguration(h.ACTIVITY_BAR_LOCATION)){let e=this.configurationService.getValue(f.HIDE_ACTIVITYBAR),t=this.configurationService.getValue(h.ACTIVITY_BAR_LOCATION);this.setActivityBarHidden(e?!0:t===Xe.TOP||t===Xe.BOTTOM)}if(e.affectsConfiguration(f.HIDE_STATUSBAR)){let e=this.configurationService.getValue(f.HIDE_STATUSBAR);this.setStatusBarHidden(e)}if(e.affectsConfiguration(f.CENTER_LAYOUT)){let e=this.configurationService.getValue(f.CENTER_LAYOUT);this.centerMainEditorLayout(e,!0)}if(e.affectsConfiguration(f.SHOW_TABS)){let e=this.configurationService.getValue(f.SHOW_TABS)??`multiple`;this.state.runtime.zenMode.transitionDisposables.set(f.SHOW_TABS,this.editorGroupService.mainPart.enforcePartOptions({showTabs:e}))}if(e.affectsConfiguration(f.SILENT_NOTIFICATIONS)){let e=!!this.configurationService.getValue(f.SILENT_NOTIFICATIONS);o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(e?y.ERROR:y.OFF)}if(e.affectsConfiguration(f.HIDE_LINENUMBERS)){let e=this.configurationService.getValue(f.HIDE_LINENUMBERS)?`off`:void 0;r(e),this.state.runtime.zenMode.transitionDisposables.set(f.HIDE_LINENUMBERS,this.mainPartEditorService.onDidVisibleEditorsChange(()=>r(e)))}}))):(o.wasVisible.panel&&this.setPanelHidden(!1,!0),o.wasVisible.auxiliaryBar&&this.setAuxiliaryBarHidden(!1,!0),o.wasVisible.sideBar&&this.setSideBarHidden(!1),this.stateModel.getRuntimeValue($.ACTIVITYBAR_HIDDEN,!0)||this.setActivityBarHidden(!1),this.stateModel.getRuntimeValue($.STATUSBAR_HIDDEN,!0)||this.setStatusBarHidden(!1),o.transitionedToCenteredEditorLayout&&this.centerMainEditorLayout(!1,!0),o.handleNotificationsDoNotDisturbMode&&this.notificationService.setFilter(y.OFF),r(),i=o.transitionedToFullScreen&&this.state.runtime.mainWindowFullscreen),e||this.layout(),i&&this.hostService.toggleFullScreen(L),n&&this.isVisible(n,N(this.activeContainer))?ve(n)?this.focusPart(n,N(this.activeContainer)):this.focusPart(n):this.focus(),this._onDidChangeZenMode.fire(this.isZenModeActive())}setStatusBarHidden(e){this.stateModel.setRuntimeValue($.STATUSBAR_HIDDEN,e),e?this.mainContainer.classList.add(Z.STATUSBAR_HIDDEN):this.mainContainer.classList.remove(Z.STATUSBAR_HIDDEN),this.workbenchGrid.setViewVisible(this.statusBarPartView,!e)}createWorkbenchLayout(){let e=this.getPart(g.TITLEBAR_PART),t=this.getPart(g.BANNER_PART),n=this.getPart(g.EDITOR_PART),r=this.getPart(g.ACTIVITYBAR_PART),i=this.getPart(g.PANEL_PART),a=this.getPart(g.AUXILIARYBAR_PART),o=this.getPart(g.SIDEBAR_PART),s=this.getPart(g.STATUSBAR_PART);this.titleBarPartView=e,this.bannerPartView=t,this.sideBarPartView=o,this.activityBarPartView=r,this.editorPartView=n,this.panelPartView=i,this.auxiliaryBarPartView=a,this.statusBarPartView=s;let c={[g.ACTIVITYBAR_PART]:this.activityBarPartView,[g.BANNER_PART]:this.bannerPartView,[g.TITLEBAR_PART]:this.titleBarPartView,[g.EDITOR_PART]:this.editorPartView,[g.PANEL_PART]:this.panelPartView,[g.SIDEBAR_PART]:this.sideBarPartView,[g.STATUSBAR_PART]:this.statusBarPartView,[g.AUXILIARYBAR_PART]:this.auxiliaryBarPartView},l=({type:e})=>c[e],u=kc.deserialize(this.createGridDescriptor(),{fromJSON:l},{proportionalLayout:!1});this.mainContainer.prepend(u.element),this.mainContainer.setAttribute(`role`,`application`),this.workbenchGrid=u,this.workbenchGrid.edgeSnapping=this.state.runtime.mainWindowFullscreen;for(let c of[e,n,r,i,o,s,a,t])this._register(c.onDidVisibilityChange(e=>{this.inMaximizedAuxiliaryBarTransition||(c===o?this.setSideBarHidden(!e):c===i?this.setPanelHidden(!e,!0):c===a?this.setAuxiliaryBarHidden(!e,!0):c===n&&this.setEditorHidden(!e)),this._onDidChangePartVisibility.fire(),this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension)}));this._register(this.storageService.onWillSaveState(e=>{let t=this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView):this.workbenchGrid.getViewSize(this.sideBarPartView).width;this.stateModel.setInitializationValue($.SIDEBAR_SIZE,t);let n=this.stateModel.getRuntimeValue($.PANEL_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView):p(this.stateModel.getRuntimeValue($.PANEL_POSITION))?this.workbenchGrid.getViewSize(this.panelPartView).height:this.workbenchGrid.getViewSize(this.panelPartView).width;this.stateModel.setInitializationValue($.PANEL_SIZE,n);let r=this.stateModel.getRuntimeValue($.AUXILIARYBAR_HIDDEN)?this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView):this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setInitializationValue($.AUXILIARYBAR_SIZE,r),this.stateModel.save(!0,!0)}))}layout(){this.disposed||(this._mainContainerDimension=Ia(this.state.runtime.mainWindowFullscreen?L.document.body:this.parent,Ul),this.logService.trace(`Layout#layout, height: ${this._mainContainerDimension.height}, width: ${this._mainContainerDimension.width}`),wo(this.mainContainer,0,0,0,0,`relative`),Ao(this.mainContainer,this._mainContainerDimension.width,this._mainContainerDimension.height),this.workbenchGrid.layout(this._mainContainerDimension.width,this._mainContainerDimension.height),this.initialized=!0,this.handleContainerDidLayout(this.mainContainer,this._mainContainerDimension))}isMainEditorLayoutCentered(){return this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED)}centerMainEditorLayout(e,t){this.stateModel.setRuntimeValue($.MAIN_EDITOR_CENTERED,e);let n=pc(this.editorGroupService.mainPart.groups.map(e=>e.activeEditor)),r=n.some(e=>e instanceof ct?this.configurationService.getValue(`diffEditor.renderSideBySide`):!!e?.hasCapability(Ot.MultipleEditors)),i=this.editorGroupService.getLayout(),a=!1;a=i.orientation===Tt.HORIZONTAL?i.groups.length>1:i.groups.some(e=>e.groups&&e.groups.length>1);let o=this.configurationService.getValue(`workbench.editor.centeredLayoutAutoResize`);o&&(a&&!this.editorGroupService.mainPart.hasMaximizedGroup()||r)&&(e=!1),this.editorGroupService.mainPart.isLayoutCentered()!==e&&(this.editorGroupService.mainPart.centerLayout(e),t||this.layout()),this._onDidChangeMainEditorCenteredLayout.fire(this.stateModel.getRuntimeValue($.MAIN_EDITOR_CENTERED))}getSize(e){return this.workbenchGrid.getViewSize(this.getPart(e))}setSize(e,t){this.workbenchGrid.resizeView(this.getPart(e),t)}resizePart(e,t,n){let r=Math.sign(t)*Aa(Fa(),Math.abs(t)),i=Math.sign(n)*Aa(Fa(),Math.abs(n)),a;switch(e){case g.SIDEBAR_PART:a=this.workbenchGrid.getViewSize(this.sideBarPartView),this.workbenchGrid.resizeView(this.sideBarPartView,{width:a.width+r,height:a.height});break;case g.PANEL_PART:a=this.workbenchGrid.getViewSize(this.panelPartView),this.workbenchGrid.resizeView(this.panelPartView,{width:a.width+(p(this.getPanelPosition())?0:r),height:a.height+(p(this.getPanelPosition())?i:0)});break;case g.AUXILIARYBAR_PART:a=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:a.width+r,height:a.height});break;case g.EDITOR_PART:if(a=this.workbenchGrid.getViewSize(this.editorPartView),this.editorGroupService.mainPart.count===1)this.workbenchGrid.resizeView(this.editorPartView,{width:a.width+r,height:a.height+i});else{let e=this.editorGroupService.mainPart.activeGroup,{width:t,height:n}=this.editorGroupService.mainPart.getSize(e);this.editorGroupService.mainPart.setSize(e,{width:t+r,height:n+i});let{width:o,height:s}=this.editorGroupService.mainPart.getSize(e);(i&&n===s||r&&t===o)&&this.workbenchGrid.resizeView(this.editorPartView,{width:a.width+(r&&t===o?r:0),height:a.height+(i&&n===s?i:0)})}break;default:return}}setActivityBarHidden(e){this.stateModel.setRuntimeValue($.ACTIVITYBAR_HIDDEN,e),this.workbenchGrid.setViewVisible(this.activityBarPartView,!e)}setBannerHidden(e){this.workbenchGrid.setViewVisible(this.bannerPartView,!e)}setEditorHidden(e){!e&&this.setAuxiliaryBarMaximized(!1)&&this.isVisible(g.EDITOR_PART)||(this.stateModel.setRuntimeValue($.EDITOR_HIDDEN,e),e?this.mainContainer.classList.add(Z.MAIN_EDITOR_AREA_HIDDEN):this.mainContainer.classList.remove(Z.MAIN_EDITOR_AREA_HIDDEN),this.workbenchGrid.setViewVisible(this.editorPartView,!e),e&&!this.isVisible(g.PANEL_PART)&&!this.isAuxiliaryBarMaximized()&&this.setPanelHidden(!1,!0))}getLayoutClasses(){return pc([this.isVisible(g.SIDEBAR_PART)?void 0:Z.SIDEBAR_HIDDEN,this.isVisible(g.EDITOR_PART,L)?void 0:Z.MAIN_EDITOR_AREA_HIDDEN,this.isVisible(g.PANEL_PART)?void 0:Z.PANEL_HIDDEN,this.isVisible(g.AUXILIARYBAR_PART)?void 0:Z.AUXILIARYBAR_HIDDEN,this.isVisible(g.STATUSBAR_PART)?void 0:Z.STATUSBAR_HIDDEN,this.state.runtime.mainWindowFullscreen?Z.FULLSCREEN:void 0])}setSideBarHidden(e){if(!(!e&&this.setAuxiliaryBarMaximized(!1)&&this.isVisible(g.SIDEBAR_PART))){if(this.stateModel.setRuntimeValue($.SIDEBAR_HIDDEN,e),e?this.mainContainer.classList.add(Z.SIDEBAR_HIDDEN):this.mainContainer.classList.remove(Z.SIDEBAR_HIDDEN),e&&this.paneCompositeService.getActivePaneComposite(m.Sidebar))this.paneCompositeService.hideActivePaneComposite(m.Sidebar),this.isAuxiliaryBarMaximized()||this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(m.Sidebar)){let e=this.paneCompositeService.getLastActivePaneCompositeId(m.Sidebar);e&&this.openViewContainer(m.Sidebar,e,!0)}this.workbenchGrid.setViewVisible(this.sideBarPartView,!e)}}hasViews(e){let t=this.viewDescriptorService.getViewContainerById(e);if(!t)return!1;let n=this.viewDescriptorService.getViewContainerModel(t);return n?n.activeViewDescriptors.length>=1:!1}adjustPartPositions(e,t,n){let r=!p(n),i=r||!(t===`center`||e===d.LEFT&&t===`right`||e===d.RIGHT&&t===`left`),a=r||!(t===`center`||e===d.RIGHT&&t===`right`||e===d.LEFT&&t===`left`),o=this.isVisible(g.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).width:Ac.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumWidth),s=this.isVisible(g.PANEL_PART)?this.workbenchGrid.getViewSize(this.panelPartView).height:Ac.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.panelPartView)??this.panelPartView.minimumHeight),c=this.isVisible(g.SIDEBAR_PART)?this.workbenchGrid.getViewSize(this.sideBarPartView).width:Ac.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.sideBarPartView)??this.sideBarPartView.minimumWidth),l=this.isVisible(g.AUXILIARYBAR_PART)?this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width:Ac.Invisible(this.workbenchGrid.getViewCachedVisibleSize(this.auxiliaryBarPartView)??this.auxiliaryBarPartView.minimumWidth),u=[g.PANEL_PART,g.SIDEBAR_PART,g.AUXILIARYBAR_PART].find(e=>this.hasFocus(e));e===d.LEFT?(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,0]),this.workbenchGrid.moveView(this.sideBarPartView,c,i?this.editorPartView:this.activityBarPartView,i?Y.Left:Y.Right),a?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,Y.Right):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,-1])):(this.workbenchGrid.moveViewTo(this.activityBarPartView,[2,-1]),this.workbenchGrid.moveView(this.sideBarPartView,c,i?this.editorPartView:this.activityBarPartView,i?Y.Right:Y.Left),a?this.workbenchGrid.moveView(this.auxiliaryBarPartView,l,this.editorPartView,Y.Left):this.workbenchGrid.moveViewTo(this.auxiliaryBarPartView,[2,0])),u&&this.focusPart(u),r&&(this.workbenchGrid.moveView(this.panelPartView,o,this.editorPartView,n===d.LEFT?Y.Left:Y.Right),this.workbenchGrid.resizeView(this.panelPartView,{height:s,width:o})),this.isVisible(g.SIDEBAR_PART)&&this.workbenchGrid.resizeView(this.sideBarPartView,{height:this.workbenchGrid.getViewSize(this.sideBarPartView).height,width:c}),this.isVisible(g.AUXILIARYBAR_PART)&&this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{height:this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).height,width:l})}setPanelAlignment(e){p(this.getPanelPosition())||this.setPanelPosition(d.BOTTOM),e!==`center`&&this.isPanelMaximized()&&this.toggleMaximizedPanel(),this.stateModel.setRuntimeValue($.PANEL_ALIGNMENT,e),this.adjustPartPositions(this.getSideBarPosition(),e,this.getPanelPosition()),this._onDidChangePanelAlignment.fire(e)}setPanelHidden(e,t){if(!this.workbenchGrid||!e&&this.setAuxiliaryBarMaximized(!1)&&this.isVisible(g.PANEL_PART))return;let n=!this.isVisible(g.PANEL_PART);this.stateModel.setRuntimeValue($.PANEL_HIDDEN,e);let r=this.isPanelMaximized(),i=this.panelOpensMaximized();e?this.mainContainer.classList.add(Z.PANEL_HIDDEN):this.mainContainer.classList.remove(Z.PANEL_HIDDEN);let a=!1;if(e&&this.paneCompositeService.getActivePaneComposite(m.Panel))this.paneCompositeService.hideActivePaneComposite(m.Panel),!$s&&!this.isAuxiliaryBarMaximized()&&(a=!0);else if(!e&&!this.paneCompositeService.getActivePaneComposite(m.Panel)){let e=this.paneCompositeService.getLastActivePaneCompositeId(m.Panel);(!e||!this.hasViews(e))&&(e=this.viewDescriptorService.getViewContainersByLocation(m.Panel).find(e=>this.hasViews(e.id))?.id),e&&this.openViewContainer(m.Panel,e,!t)}e&&r&&this.toggleMaximizedPanel(),n!==e&&(this.workbenchGrid.setViewVisible(this.panelPartView,!e),e?this.stateModel.setRuntimeValue($.PANEL_WAS_LAST_MAXIMIZED,r):!t&&r!==i&&this.toggleMaximizedPanel(),a&&this.editorGroupService.mainPart.activeGroup.focus())}isAuxiliaryBarMaximized(){return this.stateModel.getRuntimeValue($.AUXILIARYBAR_WAS_LAST_MAXIMIZED)}toggleMaximizedAuxiliaryBar(){this.setAuxiliaryBarMaximized(!this.isAuxiliaryBarMaximized())}setAuxiliaryBarMaximized(e){if(this.inMaximizedAuxiliaryBarTransition||e===this.isAuxiliaryBarMaximized())return!1;if(e){let e={sideBarVisible:this.isVisible(g.SIDEBAR_PART),editorVisible:this.isVisible(g.EDITOR_PART),panelVisible:this.isVisible(g.PANEL_PART),auxiliaryBarVisible:this.isVisible(g.AUXILIARYBAR_PART)};this.stateModel.setRuntimeValue($.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!0),this.inMaximizedAuxiliaryBarTransition=!0;try{e.auxiliaryBarVisible||this.setAuxiliaryBarHidden(!1);let t=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView).width;this.stateModel.setRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE,t),e.sideBarVisible&&this.setSideBarHidden(!0),e.panelVisible&&this.setPanelHidden(!0),e.editorVisible&&this.setEditorHidden(!0),this.stateModel.setRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY,e)}finally{this.inMaximizedAuxiliaryBarTransition=!1}}else{let e=sc(this.stateModel.getRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY));this.stateModel.setRuntimeValue($.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!1),this.inMaximizedAuxiliaryBarTransition=!0;try{this.setEditorHidden(!e?.editorVisible),this.setPanelHidden(!e?.panelVisible),this.setSideBarHidden(!e?.sideBarVisible);let t=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView);this.workbenchGrid.resizeView(this.auxiliaryBarPartView,{width:this.stateModel.getRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE),height:t.height})}finally{this.inMaximizedAuxiliaryBarTransition=!1}}return this.focusPart(g.AUXILIARYBAR_PART),this._onDidChangeAuxiliaryBarMaximized.fire(),!0}isPanelMaximized(){return(this.getPanelAlignment()===`center`||!p(this.getPanelPosition()))&&!this.isVisible(g.EDITOR_PART,L)&&!this.isAuxiliaryBarMaximized()}toggleMaximizedPanel(){let e=this.workbenchGrid.getViewSize(this.panelPartView),t=this.getPanelPosition(),n=!this.isPanelMaximized();n?(this.isVisible(g.PANEL_PART)&&(p(t)?this.stateModel.setRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_HEIGHT,e.height):this.stateModel.setRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_WIDTH,e.width)),this.setEditorHidden(!0)):(this.setEditorHidden(!1),this.workbenchGrid.resizeView(this.panelPartView,{width:p(t)?e.width:this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_WIDTH),height:p(t)?this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_HEIGHT):e.height})),this.stateModel.setRuntimeValue($.PANEL_WAS_LAST_MAXIMIZED,n)}panelOpensMaximized(){if(this.getPanelAlignment()!==`center`&&p(this.getPanelPosition()))return!1;let e=ye(this.configurationService.getValue(Jl.PANEL_OPENS_MAXIMIZED)),t=this.stateModel.getRuntimeValue($.PANEL_WAS_LAST_MAXIMIZED);return e===$e.ALWAYS||e===$e.REMEMBER_LAST&&t}setAuxiliaryBarHidden(e,t){if(!(e&&this.setAuxiliaryBarMaximized(!1)&&!this.isVisible(g.AUXILIARYBAR_PART))){if(this.stateModel.setRuntimeValue($.AUXILIARYBAR_HIDDEN,e),e?this.mainContainer.classList.add(Z.AUXILIARYBAR_HIDDEN):this.mainContainer.classList.remove(Z.AUXILIARYBAR_HIDDEN),e&&this.paneCompositeService.getActivePaneComposite(m.AuxiliaryBar))this.paneCompositeService.hideActivePaneComposite(m.AuxiliaryBar),this.focusPanelOrEditor();else if(!e&&!this.paneCompositeService.getActivePaneComposite(m.AuxiliaryBar)){let e=this.paneCompositeService.getLastActivePaneCompositeId(m.AuxiliaryBar);(!e||!this.hasViews(e))&&(e=this.viewDescriptorService.getViewContainersByLocation(m.AuxiliaryBar).find(e=>this.hasViews(e.id))?.id),e&&this.openViewContainer(m.AuxiliaryBar,e,!t)}this.workbenchGrid.setViewVisible(this.auxiliaryBarPartView,!e)}}setPartHidden(e,t){switch(t){case g.ACTIVITYBAR_PART:return this.setActivityBarHidden(e);case g.SIDEBAR_PART:return this.setSideBarHidden(e);case g.EDITOR_PART:return this.setEditorHidden(e);case g.BANNER_PART:return this.setBannerHidden(e);case g.AUXILIARYBAR_PART:return this.setAuxiliaryBarHidden(e);case g.PANEL_PART:return this.setPanelHidden(e)}}hasMainWindowBorder(){return this.state.runtime.mainWindowBorder}getMainWindowBorderRadius(){return this.state.runtime.mainWindowBorder&&tc?`10px`:void 0}getSideBarPosition(){return this.stateModel.getRuntimeValue($.SIDEBAR_POSITON)}getPanelAlignment(){return this.stateModel.getRuntimeValue($.PANEL_ALIGNMENT)}updateMenubarVisibility(e){let t=Se(this.configurationService,L,this.state.runtime.menuBar.toggled);!e&&this.workbenchGrid&&t!==this.isVisible(g.TITLEBAR_PART,L)&&this.workbenchGrid.setViewVisible(this.titleBarPartView,t)}updateCustomTitleBarVisibility(){let e=Se(this.configurationService,L,this.state.runtime.menuBar.toggled),t=this.isVisible(g.TITLEBAR_PART);e!==t&&this.workbenchGrid.setViewVisible(this.titleBarPartView,e)}toggleMenuBar(){let e=Or(this.configurationService);typeof e!=`string`&&(e=`classic`);let t;t=e===`visible`||e===`classic`?jr(this.configurationService)?`toggle`:`compact`:`classic`,this.configurationService.updateValue(Tr.MenuBarVisibility,t)}getPanelPosition(){return this.stateModel.getRuntimeValue($.PANEL_POSITION)}setPanelPosition(e){this.isVisible(g.PANEL_PART)||this.setPanelHidden(!1);let t=this.getPart(g.PANEL_PART),n=xe(this.getPanelPosition()),r=xe(e),i=sc(t.getContainer());i.classList.remove(n),i.classList.add(r),t.updateStyles();let a=this.workbenchGrid.getViewSize(this.panelPartView),o=this.workbenchGrid.getViewSize(this.sideBarPartView),s=this.workbenchGrid.getViewSize(this.auxiliaryBarPartView),c=!this.isVisible(g.EDITOR_PART,L);r!==n&&!c&&(p(e)?this.stateModel.setRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_WIDTH,a.width):p(be(n))&&this.stateModel.setRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_HEIGHT,a.height)),p(e)&&this.getPanelAlignment()!==`center`&&c&&(this.toggleMaximizedPanel(),c=!1),this.stateModel.setRuntimeValue($.PANEL_POSITION,e);let l=this.isVisible(g.SIDEBAR_PART),u=this.isVisible(g.AUXILIARYBAR_PART),ee=this.hasFocus(g.PANEL_PART);e===d.BOTTOM?this.workbenchGrid.moveView(this.panelPartView,c?a.height:this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,Y.Down):e===d.TOP?this.workbenchGrid.moveView(this.panelPartView,c?a.height:this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_HEIGHT),this.editorPartView,Y.Up):e===d.RIGHT?this.workbenchGrid.moveView(this.panelPartView,c?a.width:this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,Y.Right):this.workbenchGrid.moveView(this.panelPartView,c?a.width:this.stateModel.getRuntimeValue($.PANEL_LAST_NON_MAXIMIZED_WIDTH),this.editorPartView,Y.Left),ee&&this.focusPart(g.PANEL_PART),this.workbenchGrid.resizeView(this.sideBarPartView,o),l||this.setSideBarHidden(!0),this.workbenchGrid.resizeView(this.auxiliaryBarPartView,s),u||this.setAuxiliaryBarHidden(!0),p(e)&&this.adjustPartPositions(this.getSideBarPosition(),this.getPanelAlignment(),e),this._onDidChangePanelPosition.fire(r)}isWindowMaximized(e){return this.state.runtime.maximized.has(ia(e))}updateWindowMaximizedState(e,t){this.mainContainer.classList.toggle(Z.MAXIMIZED,t);let n=ia(e);t!==this.state.runtime.maximized.has(n)&&(t?this.state.runtime.maximized.add(n):this.state.runtime.maximized.delete(n),this.updateWindowBorder(),this._onDidChangeWindowMaximized.fire({windowId:n,maximized:t}))}getVisibleNeighborPart(e,t){if(!this.workbenchGrid||!this.isVisible(e,L))return;let n=this.workbenchGrid.getNeighborViews(this.getPart(e),t,!1);if(n)for(let e of n){let t=[g.ACTIVITYBAR_PART,g.EDITOR_PART,g.PANEL_PART,g.AUXILIARYBAR_PART,g.SIDEBAR_PART,g.STATUSBAR_PART,g.TITLEBAR_PART].find(t=>this.getPart(t)===e&&this.isVisible(t,L));if(t!==void 0)return t}}onDidChangeWCO(){let e=this.workbenchGrid.getNeighborViews(this.titleBarPartView,Y.Up,!1).length>0,t=this.shouldShowBannerFirst();e!==t&&this.workbenchGrid.moveView(this.bannerPartView,Ac.Distribute,this.titleBarPartView,t?Y.Up:Y.Down),this.workbenchGrid.setViewVisible(this.titleBarPartView,Se(this.configurationService,L,this.state.runtime.menuBar.toggled))}arrangeEditorNodes(e,t,n){if(!e.sideBar&&!e.auxiliaryBar)return e.editor.size=t,e.editor;let r=[e.editor];return e.editor.size=n,e.sideBar&&(this.stateModel.getRuntimeValue($.SIDEBAR_POSITON)===d.LEFT?r.splice(0,0,e.sideBar):r.push(e.sideBar),e.editor.size-=this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN)?0:e.sideBar.size),e.auxiliaryBar&&(this.stateModel.getRuntimeValue($.SIDEBAR_POSITON)===d.RIGHT?r.splice(0,0,e.auxiliaryBar):r.push(e.auxiliaryBar),e.editor.size-=this.stateModel.getRuntimeValue($.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size),{type:`branch`,data:r,size:t,visible:r.some(e=>e.visible)}}arrangeMiddleSectionNodes(e,t,n){let r=this.stateModel.getRuntimeValue($.ACTIVITYBAR_HIDDEN)?0:e.activityBar.size,i=this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN)?0:e.sideBar.size,a=this.stateModel.getRuntimeValue($.AUXILIARYBAR_HIDDEN)?0:e.auxiliaryBar.size,o=this.stateModel.getInitializationValue($.PANEL_SIZE)?0:e.panel.size,s=this.stateModel.getRuntimeValue($.PANEL_POSITION),c=this.stateModel.getRuntimeValue($.SIDEBAR_POSITON),l=[];if(!p(s))l.push(e.editor),e.editor.size=t-r-i-o-a,s===d.RIGHT?l.push(e.panel):l.splice(0,0,e.panel),c===d.LEFT?(l.push(e.auxiliaryBar),l.splice(0,0,e.sideBar),l.splice(0,0,e.activityBar)):(l.splice(0,0,e.auxiliaryBar),l.push(e.sideBar),l.push(e.activityBar));else{let u=this.stateModel.getRuntimeValue($.PANEL_ALIGNMENT),ee=!(u===`center`||c===d.LEFT&&u===`right`||c===d.RIGHT&&u===`left`),te=!(u===`center`||c===d.RIGHT&&u===`right`||c===d.LEFT&&u===`left`),ne=t-r-(ee?0:i)-(te?0:a),re=this.arrangeEditorNodes({editor:e.editor,sideBar:ee?e.sideBar:void 0,auxiliaryBar:te?e.auxiliaryBar:void 0},n-o,ne),ie=s===d.BOTTOM?[re,e.panel]:[e.panel,re];l.push({type:`branch`,data:ie,size:ne,visible:ie.some(e=>e.visible)}),ee||(c===d.LEFT?l.splice(0,0,e.sideBar):l.push(e.sideBar)),te||(c===d.RIGHT?l.splice(0,0,e.auxiliaryBar):l.push(e.auxiliaryBar)),c===d.LEFT?l.splice(0,0,e.activityBar):l.push(e.activityBar)}return l}createGridDescriptor(){let{width:e,height:t}=this._mainContainerDimension,n=this.stateModel.getInitializationValue($.SIDEBAR_SIZE),r=this.stateModel.getInitializationValue($.AUXILIARYBAR_SIZE),i=this.stateModel.getInitializationValue($.PANEL_SIZE),a=this.titleBarPartView.minimumHeight,o=this.bannerPartView.minimumHeight,s=this.statusBarPartView.minimumHeight,c=this.activityBarPartView.minimumWidth,l=t-a-s,u=[{type:`leaf`,data:{type:g.TITLEBAR_PART},size:a,visible:this.isVisible(g.TITLEBAR_PART,L)},{type:`leaf`,data:{type:g.BANNER_PART},size:o,visible:!1}],ee={type:`leaf`,data:{type:g.ACTIVITYBAR_PART},size:c,visible:!this.stateModel.getRuntimeValue($.ACTIVITYBAR_HIDDEN)},te={type:`leaf`,data:{type:g.SIDEBAR_PART},size:n,visible:!this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN)},ne={type:`leaf`,data:{type:g.AUXILIARYBAR_PART},size:r,visible:this.isVisible(g.AUXILIARYBAR_PART)},re={type:`leaf`,data:{type:g.EDITOR_PART},size:0,visible:!this.stateModel.getRuntimeValue($.EDITOR_HIDDEN)},ie={type:`leaf`,data:{type:g.PANEL_PART},size:i,visible:!this.stateModel.getRuntimeValue($.PANEL_HIDDEN)},ae=this.arrangeMiddleSectionNodes({activityBar:ee,auxiliaryBar:ne,editor:re,panel:ie,sideBar:te},e,l),oe={root:{type:`branch`,size:e,data:[...this.shouldShowBannerFirst()?u.reverse():u,{type:`branch`,data:ae,size:l},{type:`leaf`,data:{type:g.STATUSBAR_PART},size:s,visible:!this.stateModel.getRuntimeValue($.STATUSBAR_HIDDEN)}]},orientation:ri.VERTICAL,width:e,height:t},se={activityBarVisible:!this.stateModel.getRuntimeValue($.ACTIVITYBAR_HIDDEN),sideBarVisible:!this.stateModel.getRuntimeValue($.SIDEBAR_HIDDEN),auxiliaryBarVisible:!this.stateModel.getRuntimeValue($.AUXILIARYBAR_HIDDEN),panelVisible:!this.stateModel.getRuntimeValue($.PANEL_HIDDEN),statusbarVisible:!this.stateModel.getRuntimeValue($.STATUSBAR_HIDDEN),sideBarPosition:xe(this.stateModel.getRuntimeValue($.SIDEBAR_POSITON)),panelPosition:xe(this.stateModel.getRuntimeValue($.PANEL_POSITION))};return this.telemetryService.publicLog2(`startupLayout`,se),oe}dispose(){super.dispose(),this.disposed=!0}};function Gl(e){return e.getValue(Jl.ZEN_MODE_CONFIG)}var Kl=class{constructor(e,t,n,r){this.name=e,this.scope=t,this.target=n,this.defaultValue=r}},Q=class extends Kl{constructor(e,t,n,r,i){super(e,t,n,r),this.zenModeIgnore=i,this.runtime=!0}},ql=class extends Kl{constructor(){super(...arguments),this.runtime=!1}};const $={MAIN_EDITOR_CENTERED:new Q(`editor.centered`,D.WORKSPACE,O.MACHINE,!1),ZEN_MODE_ACTIVE:new Q(`zenMode.active`,D.WORKSPACE,O.MACHINE,!1),ZEN_MODE_EXIT_INFO:new Q(`zenMode.exitInfo`,D.WORKSPACE,O.MACHINE,{transitionedToCenteredEditorLayout:!1,transitionedToFullScreen:!1,handleNotificationsDoNotDisturbMode:!1,wasVisible:{auxiliaryBar:!1,panel:!1,sideBar:!1}}),SIDEBAR_SIZE:new ql(`sideBar.size`,D.PROFILE,O.MACHINE,300),AUXILIARYBAR_SIZE:new ql(`auxiliaryBar.size`,D.PROFILE,O.MACHINE,300),PANEL_SIZE:new ql(`panel.size`,D.PROFILE,O.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_HEIGHT:new Q(`panel.lastNonMaximizedHeight`,D.PROFILE,O.MACHINE,300),PANEL_LAST_NON_MAXIMIZED_WIDTH:new Q(`panel.lastNonMaximizedWidth`,D.PROFILE,O.MACHINE,300),PANEL_WAS_LAST_MAXIMIZED:new Q(`panel.wasLastMaximized`,D.WORKSPACE,O.MACHINE,!1),AUXILIARYBAR_WAS_LAST_MAXIMIZED:new Q(`auxiliaryBar.wasLastMaximized`,D.WORKSPACE,O.MACHINE,!1),AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE:new Q(`auxiliaryBar.lastNonMaximizedSize`,D.PROFILE,O.MACHINE,300),AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY:new Q(`auxiliaryBar.lastNonMaximizedVisibility`,D.WORKSPACE,O.MACHINE,{sideBarVisible:!1,editorVisible:!1,panelVisible:!1,auxiliaryBarVisible:!1}),SIDEBAR_POSITON:new Q(`sideBar.position`,D.WORKSPACE,O.MACHINE,d.LEFT),PANEL_POSITION:new Q(`panel.position`,D.WORKSPACE,O.MACHINE,d.BOTTOM),PANEL_ALIGNMENT:new Q(`panel.alignment`,D.PROFILE,O.USER,`center`),ACTIVITYBAR_HIDDEN:new Q(`activityBar.hidden`,D.WORKSPACE,O.MACHINE,!1,!0),SIDEBAR_HIDDEN:new Q(`sideBar.hidden`,D.WORKSPACE,O.MACHINE,!1),EDITOR_HIDDEN:new Q(`editor.hidden`,D.WORKSPACE,O.MACHINE,!1),PANEL_HIDDEN:new Q(`panel.hidden`,D.WORKSPACE,O.MACHINE,!0),AUXILIARYBAR_HIDDEN:new Q(`auxiliaryBar.hidden`,D.WORKSPACE,O.MACHINE,!0),STATUSBAR_HIDDEN:new Q(`statusBar.hidden`,D.WORKSPACE,O.MACHINE,!1,!0)};var Jl;(function(e){e.AUXILIARYBAR_DEFAULT_VISIBILITY=`workbench.secondarySideBar.defaultVisibility`,e.ACTIVITY_BAR_VISIBLE=`workbench.activityBar.visible`,e.PANEL_POSITION=`workbench.panel.defaultLocation`,e.PANEL_OPENS_MAXIMIZED=`workbench.panel.opensMaximized`,e.ZEN_MODE_CONFIG=`zenMode`,e.EDITOR_CENTERED_LAYOUT_AUTO_RESIZE=`workbench.editor.centeredLayoutAutoResize`})(Jl||={});var Yl;(function(e){e.STATUSBAR_VISIBLE=`workbench.statusBar.visible`,e.SIDEBAR_POSITION=`workbench.sideBar.location`})(Yl||={});var Xl=class e extends H{static{this.STORAGE_PREFIX=`workbench.`}constructor(e,t,n,r,i,a){super(),this.storageService=e,this.configurationService=t,this.contextService=n,this.coreExperimentationService=r,this.environmentService=i,this.viewDescriptorService=a,this._onDidChangeState=this._register(new V),this.onDidChangeState=this._onDidChangeState.event,this.stateCache=new Map,this.isNew={[D.WORKSPACE]:this.storageService.isNew(D.WORKSPACE),[D.PROFILE]:this.storageService.isNew(D.PROFILE),[D.APPLICATION]:this.storageService.isNew(D.APPLICATION)},this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateStateFromLegacySettings(e)))}updateStateFromLegacySettings(e){e.affectsConfiguration(h.ACTIVITY_BAR_LOCATION)&&this.setRuntimeValueAndFire($.ACTIVITYBAR_HIDDEN,this.isActivityBarHidden()),e.affectsConfiguration(Yl.STATUSBAR_VISIBLE)&&this.setRuntimeValueAndFire($.STATUSBAR_HIDDEN,!this.configurationService.getValue(Yl.STATUSBAR_VISIBLE)),e.affectsConfiguration(Yl.SIDEBAR_POSITION)&&this.setRuntimeValueAndFire($.SIDEBAR_POSITON,be(this.configurationService.getValue(Yl.SIDEBAR_POSITION)??`left`))}updateLegacySettingsFromState(e,t){let n=this.getRuntimeValue($.ZEN_MODE_ACTIVE);e.zenModeIgnore&&n||(e===$.ACTIVITYBAR_HIDDEN?this.configurationService.updateValue(h.ACTIVITY_BAR_LOCATION,t?Xe.HIDDEN:void 0):e===$.STATUSBAR_HIDDEN?this.configurationService.updateValue(Yl.STATUSBAR_VISIBLE,!t):e===$.SIDEBAR_POSITON&&this.configurationService.updateValue(Yl.SIDEBAR_POSITION,xe(t)))}load(t){let n;if(!t.resetLayout)for(n in $){let e=$[n],t=this.loadKeyFromStorage(e);t!==void 0&&this.stateCache.set(e.name,t)}this.stateCache.set($.ACTIVITYBAR_HIDDEN.name,this.isActivityBarHidden()),this.stateCache.set($.STATUSBAR_HIDDEN.name,!this.configurationService.getValue(Yl.STATUSBAR_VISIBLE)),this.stateCache.set($.SIDEBAR_POSITON.name,be(this.configurationService.getValue(Yl.SIDEBAR_POSITION)??`left`));let r=this.contextService.getWorkbenchState(),i=t.mainContainerDimension;for(n in $.SIDEBAR_SIZE.defaultValue=Math.min(300,i.width/4),$.SIDEBAR_HIDDEN.defaultValue=r===ta.EMPTY,$.AUXILIARYBAR_SIZE.defaultValue=Math.min(300,i.width/4),$.AUXILIARYBAR_HIDDEN.defaultValue=(()=>{let e=this.configurationService.inspect(Jl.AUXILIARYBAR_DEFAULT_VISIBILITY);if(e.defaultValue!==`hidden`&&!Ra(e)){if(rc&&!this.environmentService.remoteAuthority)return!0;let e=this.storageService.getObject(`chat.setupContext`,D.PROFILE);if(e&&(e.installed&&e.disabled||!e.installed&&e.hidden))return!0;let t=this.viewDescriptorService.getViewLocationById(`workbench.panel.chat.view.copilot`);if(t===m.Sidebar||t===m.Panel)return!0}switch(this.configurationService.getValue(Jl.AUXILIARYBAR_DEFAULT_VISIBILITY)){case`maximized`:case`visible`:return!1;case`visibleInWorkspace`:case`maximizedInWorkspace`:return r===ta.EMPTY;default:return!0}})(),$.PANEL_SIZE.defaultValue=this.stateCache.get($.PANEL_POSITION.name)??p($.PANEL_POSITION.defaultValue)?i.height/3:i.width/4,$.PANEL_POSITION.defaultValue=be(this.configurationService.getValue(Jl.PANEL_POSITION)??`bottom`),$){let e=$[n];this.stateCache.get(e.name)===void 0&&this.stateCache.set(e.name,e.defaultValue)}this.applyOverrides(t),this._register(this.storageService.onDidChangeValue(D.PROFILE,void 0,this._store)(t=>{let n;for(n in $){let r=$[n];if(r instanceof Q&&r.scope===D.PROFILE&&r.target===O.USER&&`${e.STORAGE_PREFIX}${r.name}`===t.key){let e=this.loadKeyFromStorage(r)??r.defaultValue;this.stateCache.get(r.name)!==e&&(this.stateCache.set(r.name,e),this._onDidChangeState.fire({key:r,value:e}))}}}))}applyOverrides(e){let t=new dc(()=>{try{return this.coreExperimentationService.getExperiment()}catch{return}});if(this.storageService.isNew(D.APPLICATION)&&this.contextService.getWorkbenchState()===ta.EMPTY&&(t.value?.experimentGroup===X.MaximizedChat||t.value?.experimentGroup===X.SplitEmptyEditorChat||t.value?.experimentGroup===X.SplitWelcomeChat)){if(t.value.experimentGroup===X.MaximizedChat)this.applyAuxiliaryBarMaximizedOverride();else if(t.value.experimentGroup===X.SplitEmptyEditorChat||t.value.experimentGroup===X.SplitWelcomeChat){let t=e.mainContainerDimension;this.setRuntimeValue($.AUXILIARYBAR_HIDDEN,!1),this.setInitializationValue($.AUXILIARYBAR_SIZE,Math.ceil(t.width/(1.618*1.618)))}}else if(this.isNew[D.WORKSPACE]){let e=this.configurationService.getValue(Jl.AUXILIARYBAR_DEFAULT_VISIBILITY);(e===`maximized`||e===`maximizedInWorkspace`&&this.contextService.getWorkbenchState()!==ta.EMPTY)&&this.applyAuxiliaryBarMaximizedOverride()}this.getRuntimeValue($.PANEL_HIDDEN)&&this.getRuntimeValue($.EDITOR_HIDDEN)&&!this.getRuntimeValue($.AUXILIARYBAR_WAS_LAST_MAXIMIZED)&&this.setRuntimeValue($.EDITOR_HIDDEN,!1)}applyAuxiliaryBarMaximizedOverride(){this.setRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_VISIBILITY,{sideBarVisible:!this.getRuntimeValue($.SIDEBAR_HIDDEN),panelVisible:!this.getRuntimeValue($.PANEL_HIDDEN),editorVisible:!this.getRuntimeValue($.EDITOR_HIDDEN),auxiliaryBarVisible:!this.getRuntimeValue($.AUXILIARYBAR_HIDDEN)}),this.setRuntimeValue($.SIDEBAR_HIDDEN,!0),this.setRuntimeValue($.PANEL_HIDDEN,!0),this.setRuntimeValue($.EDITOR_HIDDEN,!0),this.setRuntimeValue($.AUXILIARYBAR_HIDDEN,!1),this.setRuntimeValue($.AUXILIARYBAR_LAST_NON_MAXIMIZED_SIZE,this.getInitializationValue($.AUXILIARYBAR_SIZE)),this.setRuntimeValue($.AUXILIARYBAR_WAS_LAST_MAXIMIZED,!0)}save(e,t){let n,r=this.getRuntimeValue($.ZEN_MODE_ACTIVE);for(n in $){let i=$[n];if(e&&i.scope===D.WORKSPACE||t&&i.scope===D.PROFILE){if(r&&i instanceof Q&&i.zenModeIgnore)continue;this.saveKeyToStorage(i)}}}getInitializationValue(e){return this.stateCache.get(e.name)}setInitializationValue(e,t){this.stateCache.set(e.name,t)}getRuntimeValue(e,t){if(t)switch(e){case $.ACTIVITYBAR_HIDDEN:this.stateCache.set(e.name,this.isActivityBarHidden());break;case $.STATUSBAR_HIDDEN:this.stateCache.set(e.name,!this.configurationService.getValue(Yl.STATUSBAR_VISIBLE));break;case $.SIDEBAR_POSITON:this.stateCache.set(e.name,this.configurationService.getValue(Yl.SIDEBAR_POSITION)??`left`);break}return this.stateCache.get(e.name)}setRuntimeValue(e,t){this.stateCache.set(e.name,t);let n=this.getRuntimeValue($.ZEN_MODE_ACTIVE);e.scope===D.PROFILE&&(!n||!e.zenModeIgnore)&&(this.saveKeyToStorage(e),this.updateLegacySettingsFromState(e,t))}isActivityBarHidden(){let e=this.configurationService.getValue(Jl.ACTIVITY_BAR_VISIBLE);return e===void 0?this.configurationService.getValue(h.ACTIVITY_BAR_LOCATION)!==Xe.DEFAULT:!e}setRuntimeValueAndFire(e,t){let n=this.stateCache.get(e.name);n!==t&&(this.setRuntimeValue(e,t),this._onDidChangeState.fire({key:e,value:t}))}saveKeyToStorage(t){let n=this.stateCache.get(t.name);this.storageService.store(`${e.STORAGE_PREFIX}${t.name}`,typeof n==`object`?JSON.stringify(n):n,t.scope,t.target)}loadKeyFromStorage(t){let n=this.storageService.get(`${e.STORAGE_PREFIX}${t.name}`,t.scope);if(n!==void 0)switch(this.isNew[t.scope]=!1,typeof t.defaultValue){case`boolean`:return n===`true`;case`number`:return parseInt(n);case`object`:return JSON.parse(n)}return n}};Jn(),J(),js(),W(),le(),pn();let Zl=class extends H{constructor(e,t,n){super(),this._accessibilitySignalService=n,this._scheduler=new _s(()=>{this._signalLoop=this._accessibilitySignalService.playSignalLoop(ce.progress,t??5e3)},e),this._scheduler.schedule()}dispose(){super.dispose(),this._signalLoop?.dispose(),this._scheduler.dispose()}};Zl=K([q(2,fn)],Zl),Rs(),Ls(),G(),se(),dn(),le(),pn(),oa(),Xn(),Qn(),st(),zr();var Ql=class{constructor(){this.priority=90,this.name=`notifications`,this.when=tt,this.type=oe.View}getProvider(e){let t=e.get(un),n=e.get(Zn),r=e.get(aa),i=e.get(fn);function a(){let e=el(n);if(!e)return;r.executeCommand(`notifications.showList`);let a,o=n.lastFocusedList;if(o instanceof Yn&&(a=o.indexOf(e)),a===void 0)return;function s(){if(r.executeCommand(`notifications.showList`),o&&a!==void 0){o.domFocus();try{o.setFocus([a])}catch{}}}function c(){let e=el(n),t=e?.message.original.toString();if(!(!e||!t))return Vr(e.source?R(3424,`{0} Source: {1}`,t,e.source):t,e.severity)}let l=c();if(l)return e.onDidClose(()=>t.next()),new ie(ae.Notification,{type:oe.View},()=>l,()=>s(),`accessibility.verbosity.notification`,void 0,$l(e,i),()=>{if(o)return s(),o.focusNext(),c()},()=>{if(o)return s(),o.focusPrevious(),c()})}return a()}};function $l(e,t){let n;if(e.actions&&(n=[],e.actions.primary&&n.push(...e.actions.primary),e.actions.secondary&&n.push(...e.actions.secondary)),n)for(let t of n){t.class=z.asClassName(B.bell);let n=t.run;t.run=()=>{n(),e.close()}}let r=n?.find(e=>e.label.includes(`Manage Extension`));return r&&(r.class=z.asClassName(B.gear)),n&&n.push({id:`clearNotification`,label:R(3425,`Clear Notification`),tooltip:R(3425,`Clear Notification`),run:()=>{e.close(),t.playSignal(ce.clear)},enabled:!0,class:z.asClassName(B.clearAll)}),n}Xa(),Bs(),js(),Vo(),Di(),_c(),Qs(),ls(),_e(),we(),ea(),Qi(),Ca(),ft(),mt(),Ki(),da(),es(),hc(),gt(),ws();var eu=class extends Wl{constructor(e,t,n,r){super(e,{resetLayout:!!t?.resetLayout}),this.options=t,this.serviceCollection=n,this._onWillShutdown=this._register(new V),this.onWillShutdown=this._onWillShutdown.event,this._onDidShutdown=this._register(new V),this.onDidShutdown=this._onDidShutdown.event,this.previousUnexpectedError={message:void 0,time:0},b(`code/willStartWorkbench`),this.registerErrorHandler(r),this.parent.appendChild(this.mainContainer)}registerErrorHandler(e){L.addEventListener(`unhandledrejection`,e=>{yc(e.reason),e.preventDefault()}),bc(t=>this.handleUnexpectedError(t,e))}handleUnexpectedError(e,t){let n=ns(e,!0);if(!n)return;let r=Date.now();n===this.previousUnexpectedError.message&&r-this.previousUnexpectedError.time<=1e3||(this.previousUnexpectedError.time=r,this.previousUnexpectedError.message=n,t.error(n))}startup(){try{this._register(Vs(175));let e=this.initServices(this.serviceCollection);return e.invokeFunction(t=>{let n=t.get(pt),r=t.get(E),i=t.get(k),a=t.get(ht),o=t.get(qn),s=t.get(Gi);this.initLayout(t),this.registerListeners(n,r,i,a,o),this.renderWorkbench(e,s,r,i),this.createWorkbenchLayout(),this.layout(),this.restore(n)}),e}catch(e){throw yc(e),e}}initServices(e){e.set(Ce,this);let t=cs();for(let[n,r]of t)e.set(n,r);let n=new mn(e,!0);return n.invokeFunction(e=>{let t=e.get(pt),r=e.get(k);typeof r.acquireInstantiationService==`function`&&r.acquireInstantiationService(n),t.phase=qt.Ready}),n}registerListeners(e,t,n,r,i){this._register(n.onDidChangeConfiguration(e=>this.updateFontAliasing(e,n))),nc?this._register(t.onWillSaveState(e=>{e.reason===$i.SHUTDOWN&&this.storeFontInfo(t)})):this._register(e.onWillShutdown(()=>this.storeFontInfo(t))),this._register(e.onWillShutdown(e=>this._onWillShutdown.fire(e))),this._register(e.onDidShutdown(()=>{this._onDidShutdown.fire(),this.dispose()})),this._register(r.onDidChangeFocus(e=>{e||t.flush()})),this._register(i.onWillShowDialog(()=>this.mainContainer.classList.add(`modal-dialog-visible`))),this._register(i.onDidShowDialog(()=>this.mainContainer.classList.remove(`modal-dialog-visible`)))}updateFontAliasing(e,t){if(!tc||e&&!e.affectsConfiguration(`workbench.fontAliasing`))return;let n=t.getValue(`workbench.fontAliasing`);if(this.fontAliasing===n)return;this.fontAliasing=n;let r=[`antialiased`,`none`,`auto`];this.mainContainer.classList.remove(...r.map(e=>`monaco-font-aliasing-${e}`)),r.some(e=>e===n)&&this.mainContainer.classList.add(`monaco-font-aliasing-${n}`)}restoreFontInfo(e,t){let n=e.get(`editorFontInfo`,D.APPLICATION);if(n)try{let e=JSON.parse(n);Array.isArray(e)&&Hr.restoreFontInfo(L,e)}catch{}Hr.readFontInfo(L,Wr.createFromRawSettings(t.getValue(`editor`),Kr.getInstance(L).value))}storeFontInfo(e){let t=Hr.serializeFontInfo(L);t&&e.store(`editorFontInfo`,JSON.stringify(t),D.APPLICATION,O.MACHINE)}renderWorkbench(e,t,n,r){fa(this.mainContainer),hr((t,n)=>e.createInstance(Zl,t,n));let i=ic?`windows`:ec?`linux`:`mac`,a=pc([`monaco-workbench`,i,rc?`web`:void 0,Ho?`chromium`:Uo?`firefox`:Go?`safari`:void 0,...this.getLayoutClasses(),...this.options?.extraClasses?this.options.extraClasses:[]]);this.mainContainer.classList.add(...a),this.updateFontAliasing(void 0,r),this.restoreFontInfo(n,r);for(let{id:e,role:t,classes:n,options:r}of[{id:g.TITLEBAR_PART,role:`none`,classes:[`titlebar`]},{id:g.BANNER_PART,role:`banner`,classes:[`banner`]},{id:g.ACTIVITYBAR_PART,role:`none`,classes:[`activitybar`,this.getSideBarPosition()===d.LEFT?`left`:`right`]},{id:g.SIDEBAR_PART,role:`none`,classes:[`sidebar`,this.getSideBarPosition()===d.LEFT?`left`:`right`]},{id:g.EDITOR_PART,role:`main`,classes:[`editor`],options:{restorePreviousState:this.willRestoreEditors()}},{id:g.PANEL_PART,role:`none`,classes:[`panel`,`basepanel`,xe(this.getPanelPosition())]},{id:g.AUXILIARYBAR_PART,role:`none`,classes:[`auxiliarybar`,`basepanel`,this.getSideBarPosition()===d.LEFT?`right`:`left`]},{id:g.STATUSBAR_PART,role:`status`,classes:[`statusbar`]}]){let i=this.createPart(e,t,n);b(`code/willCreatePart/${e}`),this.getPart(e).create(i,r),b(`code/didCreatePart/${e}`)}this.createNotificationsHandlers(e,t)}createPart(e,t,n){let r=ja(t===`status`?`footer`:`div`);return r.classList.add(`part`,...n),r.id=e,r.setAttribute(`role`,t),t===`status`&&r.setAttribute(`aria-live`,`off`),r}createNotificationsHandlers(e,t){let n=this._register(e.createInstance(Al,this.mainContainer,t.model)),r=this._register(e.createInstance(Il,this.mainContainer,t.model));this._register(e.createInstance(jl,t.model));let i=e.createInstance(Ml,t.model);this._register(n.onDidChangeVisibility(()=>{i.update(n.isVisible,r.isVisible),r.update(n.isVisible)})),this._register(r.onDidChangeVisibility(()=>{i.update(n.isVisible,r.isVisible)})),tl(n,r,t.model),te.register(new Ql),this.registerNotifications({onDidChangeNotificationsVisibility:zs.map(zs.any(r.onDidChangeVisibility,n.onDidChangeVisibility),()=>r.isVisible||n.isVisible)})}restore(e){try{this.restoreParts()}catch(e){yc(e)}this.whenReady.finally(()=>Promise.race([this.whenRestored,Ms(2e3)]).finally(()=>{function t(){b(`code/didStartWorkbench`),performance.measure(`perf: workbench create & restore`,`code/didLoadWorkbenchMain`,`code/didStartWorkbench`)}this.isRestored()?t():this.whenRestored.finally(()=>t()),e.phase=qt.Restored;let n=this._register(new _s(()=>{this._register(Do(L,()=>e.phase=qt.Eventually,2500))},2500));n.schedule()}))}},tu={};ar(),fi(),J(),Xa(),Pr(),Bi(),Rs(),Bs(),W(),G(),rr(),me(),Ni(),ss(),Ta(),ki(),St(),xr();var nu;let ru=class{constructor(e,t,n,r){this._disposables=new U,this._onDidChangeVisibility=this._disposables.add(new V),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.element=ja(`div`),this.element.classList.add(`command-center`);let i=n.createInstance(fe,this.element,x.CommandCenter,{contextMenu:x.TitleBarContext,hiddenItemStrategy:de.NoHide,toolbarOptions:{primaryGroup:()=>!0},telemetrySource:`commandCenter`,actionViewItemProvider:(r,i)=>r instanceof Mi&&r.item.submenu===x.CommandCenterCenter?n.createInstance(iu,r,e,{...i,hoverDelegate:t}):tr(n,r,{...i,hoverDelegate:t})});this._disposables.add(zs.filter(r.onShow,()=>Za(this.element),this._disposables)(this._setVisibility.bind(this,!1))),this._disposables.add(r.onHide(this._setVisibility.bind(this,!0))),this._disposables.add(i)}_setVisibility(e){this.element.classList.toggle(`hide`,!e),this._onDidChangeVisibility.fire()}dispose(){this._disposables.dispose()}};ru=K([q(2,F),q(3,Oi)],ru);let iu=class extends li{static{nu=this}static{this._quickOpenCommandId=`workbench.action.quickOpenWithModes`}constructor(e,t,n,r,i,a,o){super(void 0,e.actions.find(e=>e.id===`workbench.action.quickOpenWithModes`)??e.actions[0],n),this._submenu=e,this._windowTitle=t,this._hoverService=r,this._keybindingService=i,this._instaService=a,this._editorGroupService=o,this._hoverDelegate=n.hoverDelegate??Nr(`mouse`)}render(e){super.render(e),e.classList.add(`command-center-center`),e.classList.toggle(`multiple`,this._submenu.actions.length>1);let t=this._store.add(this._hoverService.setupManagedHover(this._hoverDelegate,e,this.getTooltip()));this._store.add(this._windowTitle.onDidChange(()=>{t.update(this.getTooltip())}));let n=[];for(let e of this._submenu.actions)e instanceof zi?n.push(e.actions):n.push([e]);for(let t=0;t<n.length;t++){let r=n[t],i=this._instaService.createInstance(pe,e,{hiddenItemStrategy:de.NoHide,telemetrySource:`commandCenterCenter`,actionViewItemProvider:(e,t)=>{if(t={...t,hoverDelegate:this._hoverDelegate},e.id!==nu._quickOpenCommandId)return tr(this._instaService,e,t);let n=this;return this._instaService.createInstance(class extends li{constructor(){super(void 0,e,t)}render(e){super.render(e),e.classList.toggle(`command-center-quick-pick`),e.role=`button`;let t=this.action,r=ja(`span`);r.ariaHidden=`true`,r.className=t.class??``,r.classList.add(`search-icon`);let i=this._getLabel(),a=ja(`span`);a.classList.add(`search-label`),a.innerText=i,Eo(e,r,a);let o=this._store.add(n._hoverService.setupManagedHover(n._hoverDelegate,e,this.getTooltip()));this._store.add(n._windowTitle.onDidChange(()=>{o.update(this.getTooltip()),a.innerText=this._getLabel()})),this._store.add(n._editorGroupService.onDidChangeEditorPartOptions(({newPartOptions:e,oldPartOptions:t})=>{e.showTabs!==t.showTabs&&(o.update(this.getTooltip()),a.innerText=this._getLabel())}))}getTooltip(){return n.getTooltip()}_getLabel(){let{prefix:e,suffix:t}=n._windowTitle.getTitleDecorations(),r=n._windowTitle.workspaceName;return n._windowTitle.isCustomTitleFormat()?r=n._windowTitle.getWindowTitle():n._editorGroupService.partOptions.showTabs===`none`&&(r=n._windowTitle.fileName??r),r||=R(3544,`Search`),e&&(r=R(3545,`{0} {1}`,e,r)),t&&(r=R(3546,`{0} {1}`,r,t)),r.replaceAll(/\r\n|\r|\n/g,`⏎`)}})}});if(i.setActions(r),this._store.add(i),t<n.length-1){let t=Ba(B.circleSmallFilled);t.style.padding=`0 12px`,t.style.height=`100%`,t.style.opacity=`0.5`,e.appendChild(t)}}}getTooltip(){let e=this._keybindingService.lookupKeybinding(this.action.id)?.getLabel(),t=e?R(3547,`Search {0} ({1}) — {2}`,this._windowTitle.workspaceName,e,this._windowTitle.value):R(3548,`Search {0} — {1}`,this._windowTitle.workspaceName,this._windowTitle.value);return t}};iu=nu=K([q(3,br),q(4,wa),q(5,F),q(6,xt)],iu),ji.appendMenuItem(x.CommandCenter,{submenu:x.CommandCenterCenter,title:R(3549,`Command Center`),icon:B.shield,order:101}),Le(),Rt(),ha(),_a(),ya(),G(),Ca(),ea(),Qi(),_e(),Ni(),ps(),Ii(),st(),Xr();var au=class extends Ai{constructor(e,t,n,r,i){super({id:`toggle.${e}`,title:t,metadata:n?{description:n}:void 0,toggled:I.equals(`config.${e}`,!0),menu:[{id:x.TitleBarContext,when:i,order:r,group:`2_config`},{id:x.TitleBarTitleContext,when:i,order:r,group:`2_config`}]}),this.section=e}run(e,...t){let n=e.get(k),r=n.getValue(this.section);n.updateValue(this.section,!r)}};Pi(class extends au{constructor(){super(h.COMMAND_CENTER,R(3568,`Command Center`),R(3569,`Toggle visibility of the Command Center in title bar`),1,Fe.toNegated())}}),Pi(class extends au{constructor(){super(`workbench.navigationControl.enabled`,R(3570,`Navigation Controls`),R(3571,`Toggle visibility of the Navigation Controls in title bar`),2,I.and(Fe.toNegated(),I.has(`config.window.commandCenter`)))}}),Pi(class extends au{constructor(){super(h.LAYOUT_ACTIONS,R(3572,`Layout Controls`),R(3573,`Toggle visibility of the Layout Controls in title bar`),4)}}),Pi(class extends Ai{constructor(){super({id:`toggle.${v.CUSTOM_TITLE_BAR_VISIBILITY}`,title:R(3574,`Hide Custom Title Bar`),menu:[{id:x.TitleBarContext,order:0,when:I.equals(at.key,Er.NATIVE),group:`3_toggle`},{id:x.TitleBarTitleContext,order:0,when:I.equals(at.key,Er.NATIVE),group:`3_toggle`}]})}run(e,...t){let n=e.get(k);n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.NEVER)}}),Pi(class extends Ai{constructor(){super({id:`toggle.${v.CUSTOM_TITLE_BAR_VISIBILITY}.windowed`,title:R(3575,`Hide Custom Title Bar In Full Screen`),menu:[{id:x.TitleBarContext,order:1,when:ue,group:`3_toggle`},{id:x.TitleBarTitleContext,order:1,when:ue,group:`3_toggle`}]})}run(e,...t){let n=e.get(k);n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.WINDOWED)}});var ou=class extends Ai{constructor(){super({id:`toggle.toggleCustomTitleBar`,title:R(3576,`Custom Title Bar`),toggled:ot,menu:[{id:x.MenubarAppearanceMenu,order:6,when:I.or(I.and(I.equals(at.key,Er.NATIVE),I.and(I.equals(`config.workbench.layoutControl.enabled`,!1),I.equals(`config.window.commandCenter`,!1),I.notEquals(`config.workbench.editor.editorActionsLocation`,`titleBar`),I.notEquals(`config.workbench.activityBar.location`,`top`),I.notEquals(`config.workbench.activityBar.location`,`bottom`))?.negate()),ue),group:`2_workbench_layout`}]})}run(e,...t){let n=e.get(k),r=e.get(Fi),i=n.getValue(v.CUSTOM_TITLE_BAR_VISIBILITY);switch(i){case or.NEVER:n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.AUTO);break;case or.WINDOWED:{let e=ue.evaluate(r.getContext(null));e?n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.AUTO):n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.NEVER);break}case or.AUTO:default:n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.NEVER);break}}};Pi(ou),Pi(class extends Ai{constructor(){super({id:`showCustomTitleBar`,title:Is(3577,`Show Custom Title Bar`),precondition:ot.negate(),f1:!0})}run(e,...t){let n=e.get(k);n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.AUTO)}}),Pi(class extends Ai{constructor(){super({id:`hideCustomTitleBar`,title:Is(3578,`Hide Custom Title Bar`),precondition:ot,f1:!0})}run(e,...t){let n=e.get(k);n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.NEVER)}}),Pi(class extends Ai{constructor(){super({id:`hideCustomTitleBarInFullScreen`,title:Is(3579,`Hide Custom Title Bar In Full Screen`),precondition:I.and(ot,ue),f1:!0})}run(e,...t){let n=e.get(k);n.updateValue(v.CUSTOM_TITLE_BAR_VISIBILITY,or.WINDOWED)}}),Pi(class e extends Ai{static{this.settingsID=`workbench.editor.editorActionsLocation`}constructor(){let t=I.and(I.equals(`config.workbench.editor.showTabs`,`none`).negate(),I.equals(`config.${e.settingsID}`,`default`))?.negate();super({id:`toggle.${e.settingsID}`,title:R(3580,`Editor Actions`),toggled:I.equals(`config.${e.settingsID}`,`hidden`).negate(),menu:[{id:x.TitleBarContext,order:3,when:t,group:`2_config`},{id:x.TitleBarTitleContext,order:3,when:t,group:`2_config`}]})}run(t,...n){let r=t.get(k),i=t.get(E),a=r.getValue(e.settingsID);if(a===`hidden`){let t=r.getValue(h.EDITOR_TABS_MODE);if(t!==`none`)r.updateValue(e.settingsID,`titleBar`);else{let t=i.get(e.settingsID,D.PROFILE);r.updateValue(e.settingsID,t??`default`)}i.remove(e.settingsID,D.PROFILE)}else r.updateValue(e.settingsID,`hidden`),i.store(e.settingsID,a,D.PROFILE,O.USER)}});const su={id:i,label:R(3581,`Accounts`),tooltip:R(3581,`Accounts`),class:void 0,enabled:!0,run:function(){}},cu={id:a,label:R(3582,`Manage`),tooltip:R(3582,`Manage`),class:void 0,enabled:!0,run:function(){}};ao(),J(),G(),Vo(),Xr(),co(),Ca(),W(),Ne(),Yi(),Hn(),Qs(),Xa(),ss(),Bs(),ea(),Qi(),_e(),we(),rr(),Ni(),Ii(),gt(),me(),St(),Bi(),wt(),si(),Ta(),ws(),Pr(),hi(),Jr(),st();var lu;oo(tu);let uu=class extends c{constructor(e,t,n){super(`workbench.titleService`,n,t),this.instantiationService=e,this.properties=void 0,this.variables=new Map,this.mainPart=this._register(this.createMainTitlebarPart()),this.onMenubarVisibilityChange=this.mainPart.onMenubarVisibilityChange,this._register(this.registerPart(this.mainPart)),this.registerActions(),this.registerAPICommands()}createMainTitlebarPart(){return this.instantiationService.createInstance(fu)}registerActions(){let e=this;this._register(Pi(class extends Ai{constructor(){super({id:`workbench.action.focusTitleBar`,title:Is(3583,`Focus Title Bar`),category:Lt.View,f1:!0,precondition:ot})}run(){e.getPartByDocument(Na())?.focus()}}))}registerAPICommands(){this._register(Ui.registerCommand({id:`registerWindowTitleVariable`,handler:(e,t,n)=>{this.registerVariables([{name:t,contextKey:n}])},metadata:{description:`Registers a new title variable`,args:[{name:`name`,schema:{type:`string`},description:`The name of the variable to register`},{name:`contextKey`,schema:{type:`string`},description:`The context key to use for the value of the variable`}]}}))}createAuxiliaryTitlebarPart(e,t,n){let r=A(`.part.titlebar`,{role:`none`});r.style.position=`relative`,e.insertBefore(r,e.firstChild);let i=new U,a=this.doCreateAuxiliaryTitlebarPart(r,t,n);return i.add(this.registerPart(a)),i.add(zs.runAndSubscribe(a.onDidChange,()=>r.style.height=`${a.height}px`)),a.create(r),this.properties&&a.updateProperties(this.properties),this.variables.size&&a.registerVariables(Array.from(this.variables.values())),zs.once(a.onWillDispose)(()=>i.dispose()),a}doCreateAuxiliaryTitlebarPart(e,t,n){return n.createInstance(pu,e,t,this.mainPart)}updateProperties(e){this.properties=e;for(let t of this.parts)t.updateProperties(e)}registerVariables(e){let t=[];for(let n of e)this.variables.has(n.name)||(this.variables.set(n.name,n),t.push(n));for(let e of this.parts)e.registerVariables(t)}};uu=K([q(0,F),q(1,E),q(2,Ji)],uu);let du=class extends l{get minimumHeight(){let e=rc&&Ko(),t=this.isCommandCenterVisible||e?Wn:30;return e&&(t=Math.max(t,zo(N(this.element))?.height??0)),t/(this.preventZoom?Bo(N(this.element)):1)}get maximumHeight(){return this.minimumHeight}constructor(e,t,n,r,i,a,o,s,c,l,u,te,ne,re,ie){super(e,{hasTitle:!1},s,c,l),this.editorGroupsContainer=n,this.contextMenuService=r,this.configurationService=i,this.environmentService=a,this.instantiationService=o,this.storageService=c,this.contextKeyService=u,this.hostService=te,this.editorService=ne,this.menuService=re,this.keybindingService=ie,this.minimumWidth=0,this.maximumWidth=1/0,this._onMenubarVisibilityChange=this._register(new V),this.onMenubarVisibilityChange=this._onMenubarVisibilityChange.event,this._onWillDispose=this._register(new V),this.onWillDispose=this._onWillDispose.event,this.customMenubar=this._register(new Us),this.actionToolBarDisposable=this._register(new U),this.editorActionsChangeDisposable=this._register(new U),this.globalToolbarMenuDisposables=this._register(new U),this.editorToolbarMenuDisposables=this._register(new U),this.layoutToolbarMenuDisposables=this._register(new U),this.activityToolbarDisposables=this._register(new U),this.titleDisposables=this._register(new U),this.isInactive=!1,this.isCompact=!1,this.isAuxiliary=t.vscodeWindowId!==L.vscodeWindowId,this.isCompactContextKey=Fe.bindTo(this.contextKeyService),this.titleBarStyle=kr(this.configurationService),this.windowTitle=this._register(o.createInstance(ee,t)),this.hoverDelegate=this._register(pi()),this.registerListeners(ia(t))}registerListeners(e){this._register(this.hostService.onDidChangeFocus(e=>e?this.onFocus():this.onBlur())),this._register(this.hostService.onDidChangeActiveWindow(t=>t===e?this.onFocus():this.onBlur())),this._register(this.configurationService.onDidChangeConfiguration(e=>this.onConfigurationChanged(e))),this._register(this.editorGroupsContainer.onDidChangeEditorPartOptions(e=>this.onEditorPartConfigurationChange(e)))}onBlur(){this.isInactive=!0,this.updateStyles()}onFocus(){this.isInactive=!1,this.updateStyles()}onEditorPartConfigurationChange({oldPartOptions:e,newPartOptions:t}){(e.editorActionsLocation!==t.editorActionsLocation||e.showTabs!==t.showTabs)&&this.actionToolBar&&(this.createActionToolBar(),this.createActionToolBarMenus({editorActions:!0}),this._onDidChange.fire(void 0))}onConfigurationChanged(e){if(!this.isAuxiliary&&!jr(this.configurationService,this.titleBarStyle)&&(!tc||rc)&&e.affectsConfiguration(Tr.MenuBarVisibility)&&(this.currentMenubarVisibility===`compact`?this.uninstallMenubar():this.installMenubar()),this.actionToolBar){let t=e.affectsConfiguration(h.LAYOUT_ACTIONS),n=e.affectsConfiguration(h.ACTIVITY_BAR_LOCATION);(t||n)&&(this.createActionToolBarMenus({layoutActions:t,activityActions:n}),this._onDidChange.fire(void 0))}e.affectsConfiguration(h.COMMAND_CENTER)&&this.recreateTitle()}recreateTitle(){this.createTitle(),this._onDidChange.fire(void 0)}updateOptions(e){let t=this.isCompact;this.isCompact=e.compact,this.isCompactContextKey.set(this.isCompact),t!==this.isCompact&&(this.recreateTitle(),this.createActionToolBarMenus(!0))}installMenubar(){this.menubar||(this.customMenubar.value=this.instantiationService.createInstance(o),this.menubar=Oa(this.leftContent,A(`div.menubar`)),this.menubar.setAttribute(`role`,`menubar`),this._register(this.customMenubar.value.onVisibilityChange(e=>this.onMenubarVisibilityChanged(e))),this.customMenubar.value.create(this.menubar))}uninstallMenubar(){this.customMenubar.value=void 0,this.menubar?.remove(),this.menubar=void 0,this.onMenubarVisibilityChanged(!1)}onMenubarVisibilityChanged(e){(rc||ic||ec)&&(this.lastLayoutDimensions&&this.layout(this.lastLayoutDimensions.width,this.lastLayoutDimensions.height),this._onMenubarVisibilityChange.fire(e))}updateProperties(e){this.windowTitle.updateProperties(e)}registerVariables(e){this.windowTitle.registerVariables(e)}createContentArea(e){if(this.element=e,this.rootContainer=Oa(e,A(`.titlebar-container`)),this.leftContent=Oa(this.rootContainer,A(`.titlebar-left`)),this.centerContent=Oa(this.rootContainer,A(`.titlebar-center`)),this.rightContent=Oa(this.rootContainer,A(`.titlebar-right`)),(ic||ec)&&!Mr(this.configurationService,this.titleBarStyle)&&(this.appIcon=To(this.leftContent,A(`a.window-appicon`))),this.dragRegion=To(this.rootContainer,A(`div.titlebar-drag-region`)),!this.isAuxiliary&&!jr(this.configurationService,this.titleBarStyle)&&(!tc||rc)&&this.currentMenubarVisibility!==`compact`&&this.installMenubar(),this.title=Oa(this.centerContent,A(`div.window-title`)),this.createTitle(),this.actionToolBarElement=Oa(this.rightContent,A(`div.action-toolbar-container`)),this.createActionToolBar(),this.createActionToolBarMenus(),!Mr(this.configurationService,this.titleBarStyle)){let e=tc?`left`:`right`;if(tc&&nc){let t=Yr.Locale(ac).value;t?.textInfo?.direction===`rtl`&&(e=`right`)}tc&&nc&&e===`left`||Ar(this.configurationService)===Dr.HIDDEN||(this.windowControlsContainer=Oa(e===`left`?this.leftContent:this.rightContent,A(`div.window-controls-container`)),rc&&Oa(e===`left`?this.rightContent:this.leftContent,A(`div.window-controls-container`)),Ko()&&this.windowControlsContainer.classList.add(`wco-enabled`))}return this._register(M(this.rootContainer,j.CONTEXT_MENU,e=>{Da.stop(e);let t;t=tc&&Co(e.target)&&Qa(e.target,this.title)?x.TitleBarTitleContext:x.TitleBarContext,this.onContextMenu(e,t)})),tc&&this._register(M(this.title,j.MOUSE_DOWN,e=>{e.metaKey&&(Da.stop(e,!0),this.onContextMenu(e,x.TitleBarTitleContext))},!0)),this.updateStyles(),this.element}createTitle(){this.titleDisposables.clear();let e=Mr(this.configurationService,this.titleBarStyle);if(!this.isCommandCenterVisible)e?Eo(this.title):(this.title.innerText=this.windowTitle.value,this.titleDisposables.add(this.windowTitle.onDidChange(()=>{this.title.innerText=this.windowTitle.value,this.lastLayoutDimensions&&this.updateLayout(this.lastLayoutDimensions)})));else{let e=this.instantiationService.createInstance(ru,this.windowTitle,this.hoverDelegate);Eo(this.title,e.element),this.titleDisposables.add(e)}}actionViewItemProvider(e,r){if(!this.isAuxiliary){if(e.id===a)return this.instantiationService.createInstance(n,{position:()=>ga.BELOW},r);if(e.id===i)return this.instantiationService.createInstance(t,{position:()=>ga.BELOW},r)}let o=this.editorGroupsContainer.activeGroup?.activeEditorPane;if(o&&o instanceof Ie){let t=o.getActionViewItem(e,r);if(t)return t}return tr(this.instantiationService,e,{...r,menuAsChild:!1})}getKeybinding(e){let t=this.editorGroupsContainer.activeGroup?.activeEditorPane?.scopedContextKeyService??this.contextKeyService;return this.keybindingService.lookupKeybinding(e.id,t)}createActionToolBar(){this.actionToolBarDisposable.clear(),this.actionToolBar=this.actionToolBarDisposable.add(this.instantiationService.createInstance(pe,this.actionToolBarElement,{contextMenu:x.TitleBarContext,orientation:oi.HORIZONTAL,ariaLabel:R(3584,`Title actions`),getKeyBinding:e=>this.getKeybinding(e),overflowBehavior:{maxItems:9,exempted:[i,a,...Dc]},anchorAlignmentProvider:()=>Ka.RIGHT,telemetrySource:`titlePart`,highlightToggledItems:this.editorActionsEnabled||this.isAuxiliary,actionViewItemProvider:(e,t)=>this.actionViewItemProvider(e,t),hoverDelegate:this.hoverDelegate})),this.editorActionsEnabled&&this.actionToolBarDisposable.add(this.editorGroupsContainer.onDidChangeActiveGroup(()=>this.createActionToolBarMenus({editorActions:!0})))}createActionToolBarMenus(t=!0){t===!0&&(t={editorActions:!0,layoutActions:!0,globalActions:!0,activityActions:!0});let n=()=>{let e={primary:[],secondary:[]};if(this.editorActionsEnabled){this.editorActionsChangeDisposable.clear();let t=this.editorGroupsContainer.activeGroup;if(t){let r=t.createEditorActions(this.editorActionsChangeDisposable,this.isAuxiliary&&this.isCompact?x.CompactWindowEditorTitle:x.EditorTitle);e.primary.push(...r.actions.primary),e.secondary.push(...r.actions.secondary),this.editorActionsChangeDisposable.add(r.onDidChange(()=>n()))}}this.globalToolbarMenu&&nr(this.globalToolbarMenu.getActions(),e),this.layoutToolbarMenu&&nr(this.layoutToolbarMenu.getActions(),e,()=>!this.editorActionsEnabled||this.isCompact),this.activityActionsEnabled&&(r(this.storageService)&&e.primary.push(su),e.primary.push(cu)),this.actionToolBar.setActions(ci(e.primary),ci(e.secondary))};if(t.editorActions)if(this.editorToolbarMenuDisposables.clear(),this.editorActionsEnabled&&this.editorService.activeEditor!==void 0){let e={groupId:this.editorGroupsContainer.activeGroup.id};this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new Ec(e)),this.actionToolBar.context=e}else this.actionToolBar.actionRunner=this.editorToolbarMenuDisposables.add(new Li),this.actionToolBar.context=void 0;t.layoutActions&&(this.layoutToolbarMenuDisposables.clear(),this.layoutControlEnabled?(this.layoutToolbarMenu=this.menuService.createMenu(x.LayoutControlMenu,this.contextKeyService),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu),this.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu.onDidChange(()=>n()))):this.layoutToolbarMenu=void 0),t.globalActions&&(this.globalToolbarMenuDisposables.clear(),this.globalActionsEnabled?(this.globalToolbarMenu=this.menuService.createMenu(x.TitleBar,this.contextKeyService),this.globalToolbarMenuDisposables.add(this.globalToolbarMenu),this.globalToolbarMenuDisposables.add(this.globalToolbarMenu.onDidChange(()=>n()))):this.globalToolbarMenu=void 0),t.activityActions&&(this.activityToolbarDisposables.clear(),this.activityActionsEnabled&&this.activityToolbarDisposables.add(this.storageService.onDidChangeValue(D.PROFILE,e.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,this._store)(()=>n()))),n()}updateStyles(){if(super.updateStyles(),this.element){this.isInactive?this.element.classList.add(`inactive`):this.element.classList.remove(`inactive`);let e=this.getColor(this.isInactive?Ln:Pn,(e,t)=>e.isOpaque()?e:e.makeOpaque(Vn(t)))||``;this.element.style.backgroundColor=e,this.appIconBadge&&(this.appIconBadge.style.backgroundColor=e),e&&Yo.fromHex(e).isLighter()?this.element.classList.add(`light`):this.element.classList.remove(`light`);let t=this.getColor(this.isInactive?Rn:Fn);this.element.style.color=t||``;let n=this.getColor(In);this.element.style.borderBottom=n?`1px solid ${n}`:``}}onContextMenu(e,t){let n=new Mo(N(this.element),e);this.contextMenuService.showContextMenu({getAnchor:()=>n,menuId:t,contextKeyService:this.contextKeyService,domForShadowRoot:tc&&nc?n.target:void 0})}get currentMenubarVisibility(){return this.isAuxiliary?`hidden`:Or(this.configurationService)}get layoutControlEnabled(){return this.configurationService.getValue(h.LAYOUT_ACTIONS)!==!1}get isCommandCenterVisible(){return!this.isCompact&&this.configurationService.getValue(h.COMMAND_CENTER)!==!1}get editorActionsEnabled(){return this.editorGroupsContainer.partOptions.editorActionsLocation===Ze.TITLEBAR||this.editorGroupsContainer.partOptions.editorActionsLocation===Ze.DEFAULT&&this.editorGroupsContainer.partOptions.showTabs===Qe.NONE}get activityActionsEnabled(){let e=this.configurationService.getValue(h.ACTIVITY_BAR_LOCATION);return!this.isCompact&&!this.isAuxiliary&&(e===Xe.TOP||e===Xe.BOTTOM)}get globalActionsEnabled(){return!this.isCompact}get hasZoomableElements(){let e=!(this.currentMenubarVisibility===`hidden`||this.currentMenubarVisibility===`compact`||!rc&&tc),t=this.isCommandCenterVisible,n=this.globalActionsEnabled||this.layoutControlEnabled||this.editorActionsEnabled||this.activityActionsEnabled;return e||t||n}get preventZoom(){return Bo(N(this.element))<1||!this.hasZoomableElements}layout(e,t){this.updateLayout(new Ea(e,t)),super.layoutContents(e,t)}updateLayout(e){this.lastLayoutDimensions=e;let t=Bo(N(this.element));if(this.element.style.setProperty(`--zoom-factor`,t.toString()),this.rootContainer.classList.toggle(`counter-zoom`,this.preventZoom),this.customMenubar.value){let t=new Ea(0,e.height);this.customMenubar.value.layout(t)}let n=this.isCommandCenterVisible||this.title.innerText!==``;this.rootContainer.classList.toggle(`has-center`,n)}focus(){this.customMenubar.value?this.customMenubar.value.toggleFocus():this.element.querySelector(`[tabindex]:not([tabindex="-1"])`)?.focus()}toJSON(){return{type:g.TITLEBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};du=K([q(3,so),q(4,k),q(5,Me),q(6,F),q(7,Ji),q(8,E),q(9,Ce),q(10,Fi),q(11,ht),q(12,Ct),q(13,ir),q(14,wa)],du);let fu=class extends du{constructor(e,t,n,r,i,a,o,s,c,l,u,ee,te){super(g.TITLEBAR_PART,L,l.mainPart,e,t,n,r,i,a,o,s,c,u,ee,te)}};fu=K([q(0,so),q(1,k),q(2,Me),q(3,F),q(4,Ji),q(5,E),q(6,Ce),q(7,Fi),q(8,ht),q(9,xt),q(10,Ct),q(11,ir),q(12,wa)],fu);let pu=class extends du{static{lu=this}static{this.COUNTER=1}get height(){return this.minimumHeight}constructor(e,t,n,r,i,a,o,s,c,l,u,ee,te,ne,re,ie){let ae=lu.COUNTER++;super(`workbench.parts.auxiliaryTitle.${ae}`,N(e),t,r,i,a,o,s,c,l,u,ee,ne,re,ie),this.container=e,this.mainTitlebar=n}get preventZoom(){return Bo(N(this.element))<1||!this.mainTitlebar.hasZoomableElements}};pu=lu=K([q(3,so),q(4,k),q(5,Me),q(6,F),q(7,Ji),q(8,E),q(9,Ce),q(10,Fi),q(11,ht),q(12,xt),q(13,Ct),q(14,ir),q(15,wa)],pu),Bt(),Ke();function mu(){return{[zt.toString()]:new us(uu,[],!1)}}Ye(async e=>{e.get(zt)}),De(),yr();var hu={};J(),G(),en(),Bi(),_e(),we(),Ro(),Hi(),Ni(),Rt(),wt(),st(),Xa(),oa();var gu=class extends S{constructor(e,t,n){super(e,t,void 0,!0),this.model=n,this.checked=!n.isHidden(e)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}},_u=class extends S{constructor(e,t,n){super(e,R(3540,`Hide '{0}'`,t),void 0,!0),this.model=n}async run(){this.model.hide(this.id)}};let vu=class extends S{constructor(e,t){super(`statusbar.manage.extension`,R(3541,`Manage Extension`)),this.extensionId=e,this.commandService=t}run(){return this.commandService.executeCommand(`_extensions.manage`,this.extensionId)}};vu=K([q(1,aa)],vu),w.registerCommandAndKeybindingRule({id:`workbench.statusBar.focusPrevious`,weight:C.WorkbenchContrib,primary:P.LeftArrow,secondary:[P.UpArrow],when:it,handler:e=>{let t=e.get(Un);t.focusPreviousEntry()}}),w.registerCommandAndKeybindingRule({id:`workbench.statusBar.focusNext`,weight:C.WorkbenchContrib,primary:P.RightArrow,secondary:[P.DownArrow],when:it,handler:e=>{let t=e.get(Un);t.focusNextEntry()}}),w.registerCommandAndKeybindingRule({id:`workbench.statusBar.focusFirst`,weight:C.WorkbenchContrib,primary:P.Home,when:it,handler:e=>{let t=e.get(Un);t.focus(!1),t.focusNextEntry()}}),w.registerCommandAndKeybindingRule({id:`workbench.statusBar.focusLast`,weight:C.WorkbenchContrib,primary:P.End,when:it,handler:e=>{let t=e.get(Un);t.focus(!1),t.focusPreviousEntry()}}),w.registerCommandAndKeybindingRule({id:`workbench.statusBar.clearFocus`,weight:C.WorkbenchContrib,primary:P.Escape,when:it,handler:e=>{let t=e.get(Un),n=e.get(Ct);t.isEntryFocused()?t.focus(!1):n.activeEditorPane&&n.activeEditorPane.focus()}});var yu=class extends Ai{constructor(){super({id:`workbench.action.focusStatusBar`,title:Is(3542,`Focus Status Bar`),category:Lt.View,f1:!0})}async run(e){let t=e.get(Ce);t.focusPart(g.STATUSBAR_PART,Fa())}};Pi(yu),W(),rn(),Xa(),ea(),Bs();var bu=class e extends H{static{this.HIDDEN_ENTRIES_KEY=`workbench.statusbar.hidden`}get entries(){return this._entries.slice(0)}get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}constructor(e){super(),this.storageService=e,this._onDidChangeEntryVisibility=this._register(new V),this.onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event,this._entries=[],this.hidden=new Set,this.restoreState(),this.registerListeners()}restoreState(){let t=this.storageService.get(e.HIDDEN_ENTRIES_KEY,D.PROFILE);if(t)try{this.hidden=new Set(JSON.parse(t))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(D.PROFILE,e.HIDDEN_ENTRIES_KEY,this._store)(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){let e=new Set(this.hidden);this.hidden.clear(),this.restoreState();let t=new Set;for(let n of e)this.hidden.has(n)||t.add(n);for(let n of this.hidden)e.has(n)||t.add(n);if(t.size>0)for(let e of this._entries)t.has(e.id)&&(this.updateVisibility(e.id,!0),t.delete(e.id))}add(e){this._entries.push(e),this.updateVisibility(e,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(e){let t=this._entries.indexOf(e);t>=0&&(this._entries.splice(t,1),this._entries.some(t=>an(t.priority.primary)&&t.priority.primary.location.id===e.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(e){return this.hidden.has(e)}hide(e){this.hidden.has(e)||(this.hidden.add(e),this.updateVisibility(e,!0),this.saveState())}show(e){this.hidden.has(e)&&(this.hidden.delete(e),this.updateVisibility(e,!0),this.saveState())}findEntry(e){return this._entries.find(t=>t.container===e)}getEntries(e){return this._entries.filter(t=>t.alignment===e)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(e=>$a(e.container))}focusEntry(e,t){let n=t=>{let n=t,r=n>=0&&n<this._entries.length?this._entries[n]:void 0;for(;r&&this.isHidden(r.id);)n+=e,r=n>=0&&n<this._entries.length?this._entries[n]:void 0;return r},r=this.getFocusedEntry();if(r){let t=n(this._entries.indexOf(r)+e);if(t){this._lastFocusedEntry=t,t.labelContainer.focus();return}}let i=n(t);i&&(this._lastFocusedEntry=i,i.labelContainer.focus())}updateVisibility(e,t){if(typeof e==`string`){let n=e;for(let e of this._entries)e.id===n&&this.updateVisibility(e,t)}else{let n=e,r=this.isHidden(n.id);r?Ya(n.container):ko(n.container),t&&this._onDidChangeEntryVisibility.fire({id:n.id,visible:!r}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(e.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),D.PROFILE,O.USER):this.storageService.remove(e.HIDDEN_ENTRIES_KEY,D.PROFILE)}sort(){let e=new Set(this._entries.map(e=>e.id)),t=new Map,n=new Map;for(let r=0;r<this._entries.length;r++){let i=this._entries[r];if(typeof i.priority.primary==`number`||!e.has(i.priority.primary.location.id))t.set(i,r);else{let e=i.priority.primary.location.id,t=n.get(e);if(!t){for(let r of n.values())if(r.has(e)){t=r;break}t||(t=new Map,n.set(e,t))}t.set(i.id,i)}}let r=Array.from(t.keys());r.sort((e,n)=>{if(e.alignment===n.alignment){let r=typeof e.priority.primary==`number`?e.priority.primary:e.priority.primary.location.priority,i=typeof n.priority.primary==`number`?n.priority.primary:n.priority.primary.location.priority;return r===i?e.priority.secondary===n.priority.secondary?t.get(e)-t.get(n):n.priority.secondary-e.priority.secondary:i-r}return e.alignment===_.LEFT?-1:n.alignment===_.LEFT?1:0});let i;if(n.size>0){i=[];for(let e of r){let t=n.get(e.id),r=t?Array.from(t.values()):void 0;r&&i.push(...r.filter(e=>an(e.priority.primary)&&e.priority.primary.alignment===_.LEFT).sort((e,t)=>t.priority.secondary-e.priority.secondary)),i.push(e),r&&i.push(...r.filter(e=>an(e.priority.primary)&&e.priority.primary.alignment===_.RIGHT).sort((e,t)=>t.priority.secondary-e.priority.secondary)),n.delete(e.id)}for(let[,e]of n)i.push(...Array.from(e.values()).sort((e,t)=>t.priority.secondary-e.priority.secondary))}else i=r;this._entries=i}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(_.LEFT)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(_.RIGHT))}doMarkFirstLastVisibleStatusbarItem(e){let t,n;for(let r of e){r.container.classList.remove(`first-visible-item`,`last-visible-item`);let e=!this.isHidden(r.id);e&&(t||=r,n=r)}t?.container.classList.add(`first-visible-item`),n?.container.classList.add(`last-visible-item`)}};J(),es(),W(),oa(),Zi(),rn(),Yi(),Xa(),Ki(),cc(),Fo(),Ro(),za(),sr(),Sa(),xr();let xu=class extends H{get name(){return sc(this.entry).name}get hasCommand(){return this.entry?.command!==void 0}constructor(e,t,n,r,i,a,o,s){super(),this.container=e,this.hoverDelegate=n,this.commandService=r,this.hoverService=i,this.notificationService=a,this.telemetryService=o,this.themeService=s,this.entry=void 0,this.foregroundListener=this._register(new Us),this.backgroundListener=this._register(new Us),this.commandMouseListener=this._register(new Us),this.commandTouchListener=this._register(new Us),this.commandKeyboardListener=this._register(new Us),this.hover=void 0,this.labelContainer=A(`a.statusbar-item-label`,{role:`button`,tabIndex:-1}),this._register(xa.addTarget(this.labelContainer)),this.label=this._register(new Su(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=A(`.status-bar-item-beak-container`),this.container.appendChild(this.beakContainer),t.content&&this.container.appendChild(t.content),this.update(t)}update(e){if(this.label.showProgress=e.showProgress??!1,(!this.entry||e.text!==this.entry.text)&&(this.label.text=e.text,e.text?ko(this.labelContainer):Ya(this.labelContainer)),(!this.entry||e.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute(`aria-label`,e.ariaLabel),this.labelContainer.setAttribute(`aria-label`,e.ariaLabel)),(!this.entry||e.role!==this.entry.role)&&this.labelContainer.setAttribute(`role`,e.role||`button`),!this.entry||!this.isEqualTooltip(this.entry,e)){let t,n;sn(e.tooltip)?(n=e.tooltip.content,t={actions:e.tooltip.commands.map(e=>({commandId:e.id,label:e.title,run:()=>this.executeCommand(e)}))}):n=e.tooltip;let r=Js(n)?{markdown:n,markdownNotSupportedFallback:void 0}:n;this.hover?this.hover.update(r,t):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,r,t))}if(!this.entry||e.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();let t=e.command;t&&(t!==tn||this.hover)?(this.commandMouseListener.value=M(this.labelContainer,j.CLICK,()=>this.executeCommand(t)),this.commandTouchListener.value=M(this.labelContainer,ba.Tap,()=>this.executeCommand(t)),this.commandKeyboardListener.value=M(this.labelContainer,j.KEY_DOWN,e=>{let n=new Po(e);n.equals(P.Space)||n.equals(P.Enter)?(Da.stop(e),this.executeCommand(t)):(n.equals(P.Escape)||n.equals(P.LeftArrow)||n.equals(P.RightArrow))&&(Da.stop(e),this.hover?.hide())}),this.labelContainer.classList.remove(`disabled`)):this.labelContainer.classList.add(`disabled`)}(!this.entry||e.showBeak!==this.entry.showBeak)&&(e.showBeak?this.container.classList.add(`has-beak`):this.container.classList.remove(`has-beak`));let t=!!e.backgroundColor||e.kind&&e.kind!==`standard`;if(!this.entry||e.kind!==this.entry.kind){for(let e of nn)this.container.classList.remove(`${e}-kind`);e.kind&&e.kind!==`standard`&&this.container.classList.add(`${e.kind}-kind`),this.container.classList.toggle(`has-background-color`,t)}(!this.entry||e.color!==this.entry.color)&&this.applyColor(this.labelContainer,e.color),(!this.entry||e.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle(`has-background-color`,t),this.applyColor(this.container,e.backgroundColor,!0)),this.entry=e}isEqualTooltip({tooltip:e},{tooltip:t}){return e===void 0?t===void 0:Js(e)?Js(t)&&Ys(e,t):e===t}async executeCommand(e){if(e===tn)this.hover?.show(!0);else{let t=typeof e==`string`?e:e.id,n=typeof e==`string`?[]:e.arguments??[];this.telemetryService.publicLog2(`workbenchActionExecuted`,{id:t,from:`status bar`});try{await this.commandService.executeCommand(t,...n)}catch(e){this.notificationService.error(ns(e))}}}applyColor(e,t,n){let r;if(n?this.backgroundListener.clear():this.foregroundListener.clear(),t)if(Wi(t)){r=this.themeService.getColorTheme().getColor(t.id)?.toString();let i=this.themeService.onDidColorThemeChange(r=>{let i=r.getColor(t.id)?.toString();n?e.style.backgroundColor=i??``:e.style.color=i??``});n?this.backgroundListener.value=i:this.foregroundListener.value=i}else r=t;n?e.style.backgroundColor=r??``:e.style.color=r??``}};xu=K([q(3,aa),q(4,br),q(5,Gi),q(6,Xi),q(7,Ji)],xu);var Su=class extends Oc{constructor(e){super(e),this.container=e,this.progressCodicon=Ba(ur),this.currentText=``,this.currentShowProgress=!1}set showProgress(e){this.currentShowProgress!==e&&(this.currentShowProgress=e,this.progressCodicon=Ba(e===`syncing`?ur:lr),this.text=this.currentText)}set text(e){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(let e of Array.from(this.container.childNodes))e!==this.progressCodicon&&e.remove();let t=e??``;t&&=`\u00A0${t}`,Oa(this.container,...Va(t))}else super.text=e}};ao(),J(),G(),W(),Sa(),ss(),rn(),en(),co(),Bi(),Yi(),Hn(),na(),Kn(),Jo(),So(),ho(),_o(),mo(),po(),fo(),go(),yo(),uo(),lo(),Xa(),_i(),Qi(),_e(),we(),ls(),hc(),No(),cc(),Ii(),st(),Bs(),sa();var Cu,wu;oo(hu);let Tu=class extends l{static{Cu=this}static{this.HEIGHT=22}constructor(e,t,n,r,i,a,o,s){super(e,{hasTitle:!1},n,i,a),this.instantiationService=t,this.contextService=r,this.contextMenuService=o,this.contextKeyService=s,this.minimumWidth=0,this.maximumWidth=1/0,this.minimumHeight=Cu.HEIGHT,this.maximumHeight=Cu.HEIGHT,this.pendingEntries=[],this._onWillDispose=this._register(new V),this.onWillDispose=this._onWillDispose.event,this.onDidOverrideEntry=this._register(new V),this.entryOverrides=new Map,this.compactEntriesDisposable=this._register(new Us),this.styleOverrides=new Set,this.viewModel=this._register(new bu(i)),this.onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility,this.hoverDelegate=this._register(this.instantiationService.createInstance(vr,`element`,{instantHover:!0,dynamicDelay(e){if(typeof e==`function`||Co(e)||la(e)&&typeof e.markdown==`function`||ca(e))return 500}},(e,t)=>({persistence:{hideOnKeyDown:!0,sticky:t},appearance:{maxHeightRatio:.9}}))),this.registerListeners()}registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}overrideEntry(e,t){return this.entryOverrides.set(e,t),this.onDidOverrideEntry.fire(e),Ks(()=>{let n=this.entryOverrides.get(e);n===t&&(this.entryOverrides.delete(e),this.onDidOverrideEntry.fire(e))})}withEntryOverride(e,t){let n=this.entryOverrides.get(t);return n&&(e={...e,...n}),e}addEntry(e,t,n,r=0){let i;return i=on(r)?r:{primary:r,secondary:Qo(t)},this.element?this.doAddEntry(e,t,n,i):this.doAddPendingEntry(e,t,n,i)}doAddPendingEntry(e,t,n,r){let i={entry:e,id:t,alignment:n,priority:r};this.pendingEntries.push(i);let a={update:e=>{i.accessor?i.accessor.update(e):i.entry=e},dispose:()=>{i.accessor?i.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(e=>e!==i)}};return a}doAddEntry(e,t,n,r){let i=new U,a=this.doCreateStatusItem(t,n),o=i.add(this.instantiationService.createInstance(xu,a,this.withEntryOverride(e,t),this.hoverDelegate)),s=new class{constructor(){this.id=t,this.extensionId=e.extensionId,this.alignment=n,this.priority=r,this.container=a,this.labelContainer=o.labelContainer}get name(){return o.name}get hasCommand(){return o.hasCommand}},{needsFullRefresh:c}=this.doAddOrRemoveModelEntry(s,!0);c?this.appendStatusbarEntries():this.appendStatusbarEntry(s);let l=e,u={update:e=>{l=e,o.update(this.withEntryOverride(e,t))},dispose:()=>{let{needsFullRefresh:e}=this.doAddOrRemoveModelEntry(s,!1);e?this.appendStatusbarEntries():(a.remove(),this.updateCompactEntries()),i.dispose()}};return i.add(this.onDidOverrideEntry.event(e=>{e===t&&u.update(l)})),u}doCreateStatusItem(e,t,...n){let r=A(`.statusbar-item`,{id:e});return n&&r.classList.add(...n),t===_.RIGHT?r.classList.add(`right`):r.classList.add(`left`),r}doAddOrRemoveModelEntry(e,t){let n=this.viewModel.entries;t?this.viewModel.add(e):this.viewModel.remove(e);let r=this.viewModel.entries;t?n.splice(r.indexOf(e),0,e):n.splice(n.indexOf(e),1);let i=!mc(n,r);return{needsFullRefresh:i}}isEntryVisible(e){return!this.viewModel.isHidden(e)}updateEntryVisibility(e,t){t?this.viewModel.show(e):this.viewModel.hide(e)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(e=!0){this.getContainer()?.focus();let t=this.viewModel.lastFocusedEntry;e&&t&&setTimeout(()=>t.labelContainer.focus(),0)}createContentArea(e){this.element=e;let t=this._register(this.contextKeyService.createScoped(this.element));return it.bindTo(t).set(!0),this.leftItemsContainer=A(`.left-items.items-container`),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=A(`.right-items.items-container`),this.element.appendChild(this.rightItemsContainer),this._register(M(e,j.CONTEXT_MENU,e=>this.showContextMenu(e))),this._register(xa.addTarget(e)),this._register(M(e,ba.Contextmenu,e=>this.showContextMenu(e))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){let e=this.pendingEntries.shift();e&&(e.accessor=this.addEntry(e.entry,e.id,e.alignment,e.priority.primary))}}appendStatusbarEntries(){let e=sc(this.leftItemsContainer),t=sc(this.rightItemsContainer);ka(e),ka(t);for(let n of[...this.viewModel.getEntries(_.LEFT),...this.viewModel.getEntries(_.RIGHT).reverse()]){let r=n.alignment===_.LEFT?e:t;r.appendChild(n.container)}this.updateCompactEntries()}appendStatusbarEntry(e){let t=this.viewModel.getEntries(e.alignment);e.alignment===_.RIGHT&&t.reverse();let n=sc(e.alignment===_.LEFT?this.leftItemsContainer:this.rightItemsContainer),r=t.indexOf(e);r+1===t.length?n.appendChild(e.container):n.insertBefore(e.container,t[r+1].container),this.updateCompactEntries()}updateCompactEntries(){let e=this.viewModel.entries,t=new Map;for(let n of e)this.viewModel.isHidden(n.id)||t.set(n.id,n),n.container.classList.remove(`compact-left`,`compact-right`);let n=new Map;for(let e of t.values())if(an(e.priority.primary)&&e.priority.primary.compact){let r=e.priority.primary.location.id,i=t.get(r);if(!i)continue;let a=n.get(r);if(!a){for(let e of n.values())if(e.has(r)){a=e;break}a||(a=new Map,n.set(r,a))}a.set(e.id,e),a.set(i.id,i),e.priority.primary.alignment===_.LEFT?(i.container.classList.add(`compact-left`),e.container.classList.add(`compact-right`)):(i.container.classList.add(`compact-right`),e.container.classList.add(`compact-left`))}let r=this.getColor(An),i=this.getColor(On);if(this.compactEntriesDisposable.value=new U,r&&i&&!xs(this.theme.type))for(let[,e]of n)for(let t of e.values()){if(!t.hasCommand)continue;this.compactEntriesDisposable.value.add(M(t.labelContainer,j.MOUSE_OVER,()=>{e.forEach(e=>e.labelContainer.style.backgroundColor=r),t.labelContainer.style.backgroundColor=i})),this.compactEntriesDisposable.value.add(M(t.labelContainer,j.MOUSE_OUT,()=>{e.forEach(e=>e.labelContainer.style.backgroundColor=``)}))}}showContextMenu(e){Da.stop(e,!0);let t=new Mo(N(this.element),e),n;this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>(n=this.getContextMenuActions(t),n),onHide:()=>{n&&Gs(n)}})}getContextMenuActions(e){let t=[];t.push(Vi({id:s.ID,label:R(3543,`Hide Status Bar`),run:()=>this.instantiationService.invokeFunction(e=>new s().run(e))})),t.push(new Ri);let n=new Set;for(let e of this.viewModel.entries)n.has(e.id)||(t.push(new gu(e.id,e.name,this.viewModel)),n.add(e.id));let r;for(let t=e.target;t;t=t.parentElement){let e=this.viewModel.findEntry(t);if(e){r=e;break}}return r&&(t.push(new Ri),r.extensionId&&t.push(this.instantiationService.createInstance(vu,r.extensionId)),t.push(new _u(r.id,r.name,this.viewModel))),t}updateStyles(){super.updateStyles();let e=sc(this.getContainer()),t=[...this.styleOverrides].sort((e,t)=>e.priority-t.priority)[0],n=this.getColor(t?.background??(this.contextService.getWorkbenchState()===ta.EMPTY?jn:wn))||``;e.style.backgroundColor=n;let r=this.getColor(t?.foreground??(this.contextService.getWorkbenchState()===ta.EMPTY?Nn:Dn))||``;e.style.color=r;let i=this.getColor(kn),a=this.getColor(t?.border??(this.contextService.getWorkbenchState()===ta.EMPTY?Mn:Tn))||this.getColor(xo);a?(e.classList.add(`status-border-top`),e.style.setProperty(`--status-border-top-color`,a)):(e.classList.remove(`status-border-top`),e.style.removeProperty(`--status-border-top-color`));let o=this.getColor(En);this.styleElement||=gi(e),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${o};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(bo)??i};
					outline-offset: ${a?`-2px`:`-1px`};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${a??n};
				}
			`}layout(e,t,n,r){super.layout(e,t,n,r),super.layoutContents(e,t)}overrideStyle(e){return this.styleOverrides.add(e),this.updateStyles(),Ks(()=>{this.styleOverrides.delete(e),this.updateStyles()})}toJSON(){return{type:g.STATUSBAR_PART}}dispose(){this._onWillDispose.fire(),super.dispose()}};Tu=Cu=K([q(1,F),q(2,Ji),q(3,Gn),q(4,E),q(5,Ce),q(6,so),q(7,Fi)],Tu);let Eu=class extends Tu{constructor(e,t,n,r,i,a,o){super(g.STATUSBAR_PART,e,t,n,r,i,a,o)}};Eu=K([q(0,F),q(1,Ji),q(2,Gn),q(3,E),q(4,Ce),q(5,so),q(6,Fi)],Eu);let Du=class extends Tu{static{wu=this}static{this.COUNTER=1}constructor(e,t,n,r,i,a,o,s){let c=wu.COUNTER++;super(`workbench.parts.auxiliaryStatus.${c}`,t,n,r,i,a,o,s),this.container=e,this.height=Tu.HEIGHT}};Du=wu=K([q(1,F),q(2,Ji),q(3,Gn),q(4,E),q(5,Ce),q(6,so),q(7,Fi)],Du);let Ou=class extends c{constructor(e,t,n){super(`workbench.statusBarService`,n,t),this.instantiationService=e,this._onDidCreateAuxiliaryStatusbarPart=this._register(new V),this.onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event,this.mainPart=this._register(this.instantiationService.createInstance(Eu)),this._register(this.registerPart(this.mainPart)),this.onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(e,t){let n=A(`footer.part.statusbar`,{role:`status`,"aria-live":`off`,tabIndex:`0`});n.style.position=`relative`,e.appendChild(n);let r=t.createInstance(Du,n),i=this.registerPart(r);return r.create(n),zs.once(r.onWillDispose)(()=>i.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(r),r}createScoped(e,t){return t.add(this.instantiationService.createInstance(ku,e))}addEntry(e,t,n,r=0){return e.showInAllWindows?this.doAddEntryToAllWindows(e,t,n,r):this.mainPart.addEntry(e,t,n,r)}doAddEntryToAllWindows(e,t,n,r=0){let i=new U,a=new Set,o=e;function s(e){let s=new U;s.add(e.onWillDispose(()=>s.dispose()));let c=s.add(e.addEntry(o,t,n,r));a.add(c),s.add(Ks(()=>a.delete(c))),i.add(s),s.add(Ks(()=>i.delete(s)))}for(let e of this.parts)s(e);return i.add(this.onDidCreateAuxiliaryStatusbarPart(e=>s(e))),{update:e=>{o=e;for(let t of a)t.update(e)},dispose:()=>i.dispose()}}isEntryVisible(e){return this.mainPart.isEntryVisible(e)}updateEntryVisibility(e,t){for(let n of this.parts)n.updateEntryVisibility(e,t)}overrideEntry(e,t){let n=new U;for(let r of this.parts)n.add(r.overrideEntry(e,t));return n}focus(e){this.activePart.focus(e)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(e){let t=new U;for(let n of this.parts)t.add(n.overrideStyle(e));return t}};Ou=K([q(0,F),q(1,E),q(2,Ji)],Ou);let ku=class extends H{constructor(e,t){super(),this.statusbarEntryContainer=e,this.statusbarService=t,this.onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility}createAuxiliaryStatusbarPart(e,t){return this.statusbarService.createAuxiliaryStatusbarPart(e,t)}createScoped(e,t){return this.statusbarService.createScoped(e,t)}getPart(){return this.statusbarEntryContainer}addEntry(e,t,n,r=0){return this.statusbarEntryContainer.addEntry(e,t,n,r)}isEntryVisible(e){return this.statusbarEntryContainer.isEntryVisible(e)}updateEntryVisibility(e,t){this.statusbarEntryContainer.updateEntryVisibility(e,t)}overrideEntry(e,t){return this.statusbarEntryContainer.overrideEntry(e,t)}focus(e){this.statusbarEntryContainer.focus(e)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(e){return this.statusbarEntryContainer.overrideStyle(e)}};ku=K([q(1,Un)],ku),J(),W(),G(),ss(),yt(),Ht(),Ds(),Ps(),os(),vn();function Au(e){let t=e;return typeof t.id==`string`&&t.id.length>0&&typeof t.name==`string`&&typeof t.text==`string`&&(t.alignment===`left`||t.alignment===`right`)&&(t.command===void 0||typeof t.command==`string`)&&(t.tooltip===void 0||typeof t.tooltip==`string`)&&(t.priority===void 0||typeof t.priority==`number`)&&(t.accessibilityInformation===void 0||Os(t.accessibilityInformation))}const ju={type:`object`,required:[`id`,`text`,`alignment`,`name`],properties:{id:{type:`string`,markdownDescription:R(2509,"The identifier of the status bar entry. Must be unique within the extension. The same value must be used when calling the `vscode.window.createStatusBarItem(id, ...)`-API")},name:{type:`string`,description:R(2510,`The name of the entry, like 'Python Language Indicator', 'Git Status' etc. Try to keep the length of the name short, yet descriptive enough that users can understand what the status bar item is about.`)},text:{type:`string`,description:R(2511,"The text to show for the entry. You can embed icons in the text by leveraging the `$(<name>)`-syntax, like 'Hello $(globe)!'")},tooltip:{type:`string`,description:R(2512,`The tooltip text for the entry.`)},command:{type:`string`,description:R(2513,`The command to execute when the status bar entry is clicked.`)},alignment:{type:`string`,enum:[`left`,`right`],description:R(2514,`The alignment of the status bar entry.`)},priority:{type:`number`,description:R(2515,`The priority of the status bar entry. Higher value means the item should be shown more to the left.`)},accessibilityInformation:{type:`object`,description:R(2516,`Defines the role and aria label to be used when the status bar entry is focused.`),properties:{role:{type:`string`,description:R(2517,`The role of the status bar entry which defines how a screen reader interacts with it. More about aria roles can be found here https://w3c.github.io/aria/#widget_roles`)},label:{type:`string`,description:R(2518,`The aria label of the status bar entry. Defaults to the entry's text.`)}}}}},Mu={description:R(2519,`Contributes items to the status bar.`),oneOf:[ju,{type:`array`,items:ju}]},Nu=Vt.registerExtensionPoint({extensionPoint:`statusBarItems`,jsonSchema:Mu});let Pu=class{constructor(e){let t=new U;Nu.setHandler(n=>{t.clear();for(let r of n){if(!bt(r.description,`contribStatusBarItems`)){r.collector.error(`The ${Nu.name} is proposed API`);continue}let{value:n,collector:i}=r;for(let a of qs.wrap(n)){if(!Au(a)){i.error(R(2520,`Invalid status bar item contribution.`));continue}let n=rs(r.description.identifier,a.id),o=e.setOrUpdateEntry(n,n,Ns.toKey(r.description.identifier),a.name??r.description.displayName??r.description.name,a.text,a.tooltip,a.command?{id:a.command,title:a.name}:void 0,void 0,void 0,a.alignment===`left`,a.priority,a.accessibilityInformation);o===$t.DidDefine&&t.add(Ks(()=>e.unsetEntry(n)))}}})}};Pu=K([q(0,Qt)],Pu);let Fu=class{static{this.ID=`workbench.contrib.statusBarItemsExtensionPoint`}constructor(e){this.instantiationService=e,this.instantiationService.createInstance(Pu)}};Fu=K([q(0,F)],Fu),Oe(Fu.ID,Fu,Ee.BlockStartup),ds(),en(),vn();function Iu(){return{[Un.toString()]:new us(Ou,[],!1),[Qt.toString()]:new us(Zt,[],!1)}}var Lu={};ao(),J(),G(),Xa(),si(),ls(),ss(),Qi(),Yi(),Ls(),_e(),we(),Bi(),ge(),Bs(),Ft(),ma(),Ni(),Rt(),Hi(),Ro(),Ii(),Zs(),sr(),st(),oo(Lu);let Ru=class extends l{get minimumHeight(){return this.visible?this.height:0}get maximumHeight(){return this.visible?this.height:0}get onDidChange(){return this._onDidChangeSize.event}constructor(e,t,n,r,i){super(g.BANNER_PART,{hasTitle:!1},e,n,t),this.contextKeyService=r,this.instantiationService=i,this.height=26,this.minimumWidth=0,this.maximumWidth=1/0,this._onDidChangeSize=this._register(new V),this.visible=!1,this.focusedActionIndex=-1,this.markdownRenderer=this.instantiationService.createInstance(pa,{})}createContentArea(e){this.element=e,this.element.tabIndex=0,this._register(M(this.element,j.FOCUS,()=>{this.focusedActionIndex!==-1&&this.focusActionLink()}));let t=this._register(this.contextKeyService.createScoped(this.element));return Pe.bindTo(t).set(!0),this.element}close(e){this.setVisibility(!1),ka(this.element),typeof e.onClose==`function`&&e.onClose(),this.item=void 0}focusActionLink(){let e=this.item?.actions?.length??0;if(this.focusedActionIndex<e){let e=this.messageActionsContainer?.children[this.focusedActionIndex];Co(e)&&(this.actionBar?.setFocusable(!1),e.focus())}else this.actionBar?.focus(0)}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message==`string`)return e.message}getBannerMessage(e){if(typeof e==`string`){let t=A(`span`);return t.innerText=e,t}return this.markdownRenderer.render(e).element}setVisibility(e){e!==this.visible&&(this.visible=e,this.focusedActionIndex=-1,this.layoutService.setPartHidden(!e,g.BANNER_PART),this._onDidChangeSize.fire(void 0))}focus(){this.focusedActionIndex=-1,this.element.focus()}focusNextAction(){let e=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex<e?this.focusedActionIndex+1:0,this.focusActionLink()}focusPreviousAction(){let e=this.item?.actions?.length??0;this.focusedActionIndex=this.focusedActionIndex>0?this.focusedActionIndex-1:e,this.focusActionLink()}hide(e){this.item?.id===e&&this.setVisibility(!1)}show(e){if(e.id===this.item?.id){this.setVisibility(!0);return}ka(this.element);let t=this.getAriaLabel(e);t&&this.element.setAttribute(`aria-label`,t);let n=Oa(this.element,A(`div.icon-container`));n.setAttribute(`aria-hidden`,`true`),z.isThemeIcon(e.icon)?n.appendChild(A(`div${z.asCSSSelector(e.icon)}`)):(n.classList.add(`custom-icon`),Xs.isUri(e.icon)&&(n.style.backgroundImage=di(e.icon)));let r=Oa(this.element,A(`div.message-container`));if(r.setAttribute(`aria-hidden`,`true`),r.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Oa(this.element,A(`div.message-actions-container`)),e.actions)for(let t of e.actions)this._register(this.instantiationService.createInstance(he,this.messageActionsContainer,{...t,tabIndex:-1},{}));let i=Oa(this.element,A(`div.action-container`));this.actionBar=this._register(new ai(i));let a=e.closeLabel??R(2941,`Close Banner`),o=this._register(new S(`banner.close`,a,z.asClassName(dr),!0,()=>this.close(e)));this.actionBar.push(o,{icon:!0,label:!1}),this.actionBar.setFocusable(!1),this.setVisibility(!0),this.item=e}toJSON(){return{type:g.BANNER_PART}}};Ru=K([q(0,Ji),q(1,Ce),q(2,E),q(3,Fi),q(4,F)],Ru),w.registerCommandAndKeybindingRule({id:`workbench.banner.focusBanner`,weight:C.WorkbenchContrib,primary:P.Escape,when:Pe,handler:e=>{let t=e.get(Pt);t.focus()}}),w.registerCommandAndKeybindingRule({id:`workbench.banner.focusNextAction`,weight:C.WorkbenchContrib,primary:P.RightArrow,secondary:[P.DownArrow],when:Pe,handler:e=>{let t=e.get(Pt);t.focusNextAction()}}),w.registerCommandAndKeybindingRule({id:`workbench.banner.focusPreviousAction`,weight:C.WorkbenchContrib,primary:P.LeftArrow,secondary:[P.UpArrow],when:Pe,handler:e=>{let t=e.get(Pt);t.focusPreviousAction()}});var zu=class e extends Ai{static{this.ID=`workbench.action.focusBanner`}static{this.LABEL=Is(2942,`Focus Banner`)}constructor(){super({id:e.ID,title:e.LABEL,category:Lt.View,f1:!0})}async run(e){let t=e.get(Ce);t.focusPart(g.BANNER_PART)}};Pi(zu),J(),ft(),De(),Ft(),ea(),Qi(),Ne(),Zs(),Ls();var Bu;let Vu=class{static{Bu=this}static{this.WELCOME_BANNER_DISMISSED_KEY=`workbench.banner.welcome.dismissed`}constructor(e,t,n){let r=n.options?.welcomeBanner;if(!r||t.getBoolean(Bu.WELCOME_BANNER_DISMISSED_KEY,D.PROFILE,!1))return;let i;typeof r.icon==`string`?i=z.fromId(r.icon):r.icon&&(i=Xs.revive(r.icon)),e.show({id:`welcome.banner`,message:r.message,icon:i,actions:r.actions,onClose:()=>{t.store(Bu.WELCOME_BANNER_DISMISSED_KEY,!0,D.PROFILE,O.MACHINE)}})}};Vu=Bu=K([q(0,Pt),q(1,E),q(2,Me)],Vu),Ss.as(Te.Workbench).registerWorkbenchContribution(Vu,qt.Restored),ds(),Ft(),Ke();function Hu(){return{[Pt.toString()]:new us(Ru,[],!1)}}Ye(async e=>{e.get(Pt)}),J(),wi(),ss(),we(),ds(),St(),wt(),_c(),Xa(),ws(),Vo(),Ge(),Ke(),ke(),re(),ze(),je(),Ue(),Ve(),It(),kt(),_e(),er();let Uu=class extends eu{constructor(e,t,n){super(We(),e,new Fr,t),this.instantiationService=n,this.mainContainer.classList.add(`monaco-workbench-part`)}registerErrorHandler(e){bc(t=>this.handleUnexpectedError(t,e))}createNotificationsHandlers(){}initServices(){return this.instantiationService}restore(){try{this.restoreParts()}catch(e){yc(e)}}};Uu=K([q(1,Ci),q(2,F)],Uu),qe(async e=>{e.get(Ce).startup();let t=Ma(L,We());io(t!=null&&!t.guess,L)}),Je(async e=>{e.get(F).createInstance(qa)});function Wu(e,t){return{...ra(t),...u({isKeybindingConfigurationVisible:()=>!0,shouldUseGlobalPicker:()=>!0}),...Sc({shouldUseGlobalKeybindings:()=>!0}),[Ce.toString()]:new us(Uu,[e],!1),[xt.toString()]:new us(Tc,[],!1),[Ct.toString()]:new us(xc,[void 0],!1),...mu(),...Iu(),...Hu()}}export{He as AbstractResourceEditorInput,Be as AbstractTextResourceEditorInput,Re as ConfirmResult,va as DomScrollableElement,ut as EditorInput,Ot as EditorInputCapabilities,g as Parts,Ae as RegisteredEditorPriority,$n as SplitView,m as ViewContainerLocation,ne as ViewPaneContainer,Wu as default,mi as onDidChangeSideBarPosition};