import{c$ as e,cS as t,cZ as n,c_ as r,d0 as i,d1 as a,d2 as o,d3 as s,dB as c,dC as l,dD as u,f6 as d,f7 as f,ff as p,fg as m,fh as h,fi as g,fj as _,gM as v,gR as y,gU as b,ga as x,gb as S,gc as C,gd as w,gg as T,gh as E,gq as D,gr as O,h2 as k,hB as A,hC as j,hd as M,ho as N,hq as P,i7 as F,i8 as I,iH as L,iI as R,iJ as z,iK as B,if as V,ig as H,ih as U,jQ as W,jR as G,jS as K,jY as q,kj as J,kk as Y,kl as X}from"./index-Diz4JYK5.js";t(),r(),s(),u(),E(),O(),k(),P(),A(),I(),V(),B(),G(),q(),X();var Z={};f(),h(),S();var Q;j(Z);let $=class extends K{static{Q=this}static{this.ID=`editor.contrib.inspectTokens`}static get(e){return e.getContribution(Q.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(e=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(e=>this.stop())),this._register(T.onDidChange(e=>this.stop())),this._register(this._editor.onKeyUp(e=>e.keyCode===N.Escape&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new re(this._editor,this._languageService))}stop(){this._widget&&=(this._widget.dispose(),null)}};$=Q=J([Y(1,n),Y(2,D)],$);var ee=class extends p{constructor(){super({id:`editor.action.inspectTokens`,label:c.inspectTokensAction,alias:`Developer: Inspect Tokens`,precondition:void 0})}run(e,t){let n=$.get(t);n?.launch()}};function te(e){let t=``;for(let n=0,r=e.length;n<r;n++){let r=e.charCodeAt(n);switch(r){case W.Tab:t+=`→`;break;case W.Space:t+=`·`;break;default:t+=String.fromCharCode(r)}}return t}function ne(e,t){let n=T.get(t);if(n)return n;let r=e.encodeLanguageId(t);return{getInitialState:()=>x,tokenize:(e,n,r)=>C(t,r),tokenizeEncoded:(e,t,n)=>w(r,n)}}var re=class e extends K{static{this._ID=`editor.contrib.inspectTokensWidget`}constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=b(`div`),this._domNode.className=`tokens-inspect-widget`,this._tokenizationSupport=ne(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(e=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return e._ID}_compute(e){let t=this._getTokensAtLine(e.lineNumber),n=0;for(let r=t.tokens1.length-1;r>=0;r--){let i=t.tokens1[r];if(e.column-1>=i.offset){n=r;break}}let r=0;for(let n=t.tokens2.length>>>1;n>=0;n--)if(e.column-1>=t.tokens2[n<<1]){r=n;break}let i=this._model.getLineContent(e.lineNumber),a=``;if(n<t.tokens1.length){let e=t.tokens1[n].offset,r=n+1<t.tokens1.length?t.tokens1[n+1].offset:i.length;a=i.substring(e,r)}M(this._domNode,v(`h2.tm-token`,void 0,te(a),v(`span.tm-token-length`,void 0,`${a.length} ${a.length===1?`char`:`chars`}`))),y(this._domNode,v(`hr.tokens-inspect-separator`,{style:`clear:both`}));let o=(r<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(r<<1)+1]):null;y(this._domNode,v(`table.tm-metadata-table`,void 0,v(`tbody`,void 0,v(`tr`,void 0,v(`td.tm-metadata-key`,void 0,`language`),v(`td.tm-metadata-value`,void 0,`${o?o.languageId:`-?-`}`)),v(`tr`,void 0,v(`td.tm-metadata-key`,void 0,`token type`),v(`td.tm-metadata-value`,void 0,`${o?this._tokenTypeToString(o.tokenType):`-?-`}`)),v(`tr`,void 0,v(`td.tm-metadata-key`,void 0,`font style`),v(`td.tm-metadata-value`,void 0,`${o?this._fontStyleToString(o.fontStyle):`-?-`}`)),v(`tr`,void 0,v(`td.tm-metadata-key`,void 0,`foreground`),v(`td.tm-metadata-value`,void 0,`${o?F.Format.CSS.formatHex(o.foreground):`-?-`}`)),v(`tr`,void 0,v(`td.tm-metadata-key`,void 0,`background`),v(`td.tm-metadata-value`,void 0,`${o?F.Format.CSS.formatHex(o.background):`-?-`}`))))),y(this._domNode,v(`hr.tokens-inspect-separator`)),n<t.tokens1.length&&y(this._domNode,v(`span.tm-token-type`,void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){let t=T.getColorMap(),n=z.getLanguageId(e),r=z.getTokenType(e),i=z.getFontStyle(e),a=z.getForeground(e),o=z.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:r,fontStyle:i,foreground:t[a],background:t[o]}}_tokenTypeToString(e){switch(e){case R.Other:return`Other`;case R.Comment:return`Comment`;case R.String:return`String`;case R.RegEx:return`RegEx`;default:return`??`}}_fontStyleToString(e){let t=``;return e&L.Italic&&(t+=`italic `),e&L.Bold&&(t+=`bold `),e&L.Underline&&(t+=`underline `),e&L.Strikethrough&&(t+=`strikethrough `),t.length===0&&(t=`---`),t}_getTokensAtLine(e){let t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),r=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:r.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++){let e=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t);t=e.endState}return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[d.BELOW,d.ABOVE]}}};_($.ID,$,m.Lazy),g(ee),h(),r(),u();var ie=class extends p{constructor(){super({id:`editor.action.toggleHighContrast`,label:l.toggleHighContrast,alias:`Toggle High Contrast Theme`,precondition:void 0}),this._originalThemeName=null}run(t,r){let s=t.get(n),c=s.getColorTheme();U(c.type)?(s.setTheme(this._originalThemeName||(H(c.type)?a:o)),this._originalThemeName=null):(s.setTheme(H(c.type)?e:i),this._originalThemeName=c.themeName)}};g(ie);function ae(){return{}}export{ae as default};